(window.webpackJsonp=window.webpackJsonp||[]).push([["threadview-utv"],{"+ADX":function(e,t,n){"use strict";var a,r,i=n("az9m"),o=n("Ktcs"),s=n.n(o),c=n("VfuR"),u=n.n(c),l=n("9f1P"),d=n.n(l),p=n("uOqy"),m=n("M2Ie"),h=n("xL7U"),f=n("jrah"),b="primary",g="secondary",v={PRIMARY:b,SECONDARY:g},O=(a={},Object(m.a)(a,b,h.PRIMARY),Object(m.a)(a,g,h.SECONDARY),a),j=function(e){return O[e]},y=(r={},Object(m.a)(r,b,f.SECONDARY),Object(m.a)(r,g,f.PRIMARY),r),C=function(e){return y[e]},x=v,k=n("3RBx"),E=d()(p.a).withConfig({displayName:"VizExLoadingButton__Spinner",componentId:"ruu7j6-0"})(["height:0;position:absolute;top:50%;right:0;transition:opacity 0.2s;opacity:",";"],function(e){return e.show?1:0}),T=d.a.div.withConfig({displayName:"VizExLoadingButton__ReadyWrapper",componentId:"ruu7j6-1"})(["transition:opacity 0.2s;opacity:",";"],function(e){return e.show?1:0}),I=function(e){var t=e.children,n=e.Button,a=e.result,r=e.use,o=e.theme,c=e.currentState,u=e.onClick,l=Object(i.a)(e,["children","Button","result","use","theme","currentState","onClick"]),d="ready"===c,p="submitting"===c,m="done"===c;return s.a.createElement(n,Object.assign({theme:o,onClick:p||m?function(){}:u,use:j(r),style:{position:"relative"}},l),s.a.createElement(T,{"data-testid":"VizExLoadingButton-Ready",show:d},t),s.a.createElement(E,{size:"xs",grow:!0,use:C(r),theme:o,showResult:m,show:p||m,"data-testid":"VizExLoadingButton-Spinner"},a))};I.propTypes={Button:u.a.node.isRequired,children:u.a.node.isRequired,currentState:u.a.oneOf(["ready","submitting","done"]),onClick:u.a.func,result:u.a.node,theme:k.a,use:u.a.oneOf(Object.values(x))};I.defaultProps={"data-test-id":"loading-button",use:x.PRIMARY,onClick:function(){}};I.displayName="VizExLoadingButton";t.a=I},"+cIb":function(e,t,n){"use strict";var a=n("QYOI"),r=Object(a.Record)({avatar:null,email:null,firstName:null,id:null,lastName:null,senderType:null},"Sender");t.a=r},"+rg3":function(e,t,n){"use strict";n.r(t);n.d(t,"attachmentError",function(){return i});var a=n("CRij"),r=n("bDpH"),i=Object(a.createAction)(r.a,function(e,t){return{error:e,threadId:t}})},"/A3W":function(e,t,n){"use strict";n.r(t);n.d(t,"getHubspotUtk",function(){return o});var a=n("ib5I"),r=n("mu3n"),i=n("30X/"),o=Object(a.a)(i.a,function(e){return Object(r.getHubspotUtk)(e)})},"/Zaq":function(e,t,n){var a=n("fwVr"),r="__lodash_hash_undefined__";function i(e,t){var n=this.__data__;this.size+=this.has(e)?0:1;n[e]=a&&void 0===t?r:t;return this}e.exports=i},"/gqD":function(e,t){function n(e,t){return null==e?void 0:e[t]}e.exports=n},"00xA":function(e,t,n){var a=n("RWBV"),r=n("15fP"),i=n("RSm/"),o=n("ce3V"),s=n("h8ap");function c(e){var t=-1,n=null==e?0:e.length;this.clear();for(;++t<n;){var a=e[t];this.set(a[0],a[1])}}c.prototype.clear=a;c.prototype.delete=r;c.prototype.get=i;c.prototype.has=o;c.prototype.set=s;e.exports=c},"064J":function(e,t,n){"use strict";var a=n("az9m"),r=n("VfuR"),i=n.n(r),o=n("yvRk"),s=n.n(o),c=n("Ktcs"),u=n.n(c),l=n("E7sj"),d=n.n(l);t.a=s()({displayName:"FormattedSize",propTypes:{value:i.a.number.isRequired},render:function(){var e=this.props,t=e.value,n=Object(a.a)(e,["value"]);return u.a.createElement("span",null,d.a.formatSize(t,n))}})},"08NH":function(e,t,n){"use strict";n.r(t);n.d(t,"getMostRecentMessageIsEmailPrompt",function(){return s});var a=n("ib5I"),r=n("42Z2"),i=n("2S+z"),o=n("Aw1I"),s=Object(a.a)([r.a],function(e){return Object(i.getType)(e.last())===o.j})},"0v5j":function(e,t,n){"use strict";n.d(t,"a",function(){return u});var a=n("QYOI"),r=n("ib5I"),i=n("BjQQ"),o=n("rkDb"),s=n("Xqh6"),c=n("4ajQ"),u=Object(r.a)([s.a,c.typingStates],function(e,t){var n=Object(o.getThreadId)(e);return Object(i.a)(""+n,t)||Object(a.Map)()})},"15fP":function(e,t,n){var a=n("I04N"),r=Array.prototype.splice;function i(e){var t=this.__data__,n=a(t,e);if(n<0)return!1;n==t.length-1?t.pop():r.call(t,n,1);--this.size;return!0}e.exports=i},"1z1z":function(e,t,n){"use strict";var a=n("+FUr"),r=n("woGC"),i=n("YZ/j"),o=n("MEIQ"),s=n("QYOI"),c=n("Njlw"),u=function(e){Object(o.a)(t,e);function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(a.a)(this,t);return Object(r.a)(this,Object(i.a)(t).call(this,Object.assign({},e,{localId:Object(c.generateIdForFile)({file:e.file,timestamp:Date.now()})})))}return t}(Object(s.Record)({file:null,localId:"",fileId:-1,uploadProgress:0},"FileUploadRecord"));t.a=u},"28/i":function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n("xq+X"),r=function(e){return Object(a.a)(["id"],e)||Object(a.a)(["message","id"],e)||-1}},"2NeP":function(e,t,n){"use strict";n.r(t);var a=n("ib5I"),r=n("kJ+w"),i=n("dIiL"),o=Object(a.a)([r.getThreadByThreadId],i.a),s=n("L6i2");n.d(t,"shouldRecordUrlContextUpdate",function(){return c});var c=Object(a.a)([o,s.getMessagesPageUri],function(e,t){return e!==t})},"2a3n":function(e,t,n){"use strict";n.d(t,"a",function(){return s});var a=n("erfM"),r=n("+cIb"),i=n("lPZn"),o=n("ib5I"),s=Object(o.b)(function(e,t,n){var o=Object(a.agentTypeToSenderType)(Object(i.getAgentType)(e)||n);return new r.a({id:Object(i.getUserId)(e)||t,avatar:Object(i.getAvatar)(e),firstName:Object(i.getFirstName)(e),email:Object(i.getEmail)(e),lastName:Object(i.getLastName)(e),senderType:o})})},"2aGJ":function(e,t,n){var a=n("fwVr"),r="__lodash_hash_undefined__",i=Object.prototype.hasOwnProperty;function o(e){var t=this.__data__;if(a){var n=t[e];return n===r?void 0:n}return i.call(t,e)?t[e]:void 0}e.exports=o},"3+Oy":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n("BjQQ"),r=n("ib5I"),i=Object(a.a)("gdpr"),o=Object(r.a)([i],Object(a.a)("hasVisitorGivenConsentToProcess"))},"32t3":function(e,t,n){"use strict";n.r(t);n.d(t,"attachmentUploadStart",function(){return i});var a=n("CRij"),r=n("bDpH"),i=Object(a.createAction)(r.d)},"3ApS":function(e,t,n){"use strict";n.r(t);n.d(t,"shouldRecordImplicitConsentToProcess",function(){return c});var a=n("ib5I"),r=n("go3a"),i=n("XQVM"),o=n("qeXV"),s=n("3+Oy"),c=Object(a.a)([o.getLatestWidgetData,s.a],function(e,t){return Object(r.gdprConsentToProcessEnabled)(e)&&!Object(i.gdprExplicitConsentRequired)(e)&&!t})},"3R6H":function(e,t,n){"use strict";n.d(t,"a",function(){return m});var a=n("ib5I"),r=n("BjQQ"),i=n("VO0R"),o=n("RuRH"),s=n("44sD"),c=n("YhCZ"),u=n("9VMc"),l=n("lGcn"),d=n("pnsR"),p=Object(r.a)("subscriptions"),m=Object(a.a)([u.getAsyncStagedThread,s.getAsyncPubSubClient,c.hasPersistedThreads,p,l.a,d.a],function(e,t,n,a,r,s){return!Object(i.isStarted)(e)&&(!(!Object(i.isUninitialized)(e)||n)||!(!Object(i.isSucceeded)(r)&&!Object(i.isUninitialized)(r)||!Object(i.isSucceeded)(s)&&!Object(i.isUninitialized)(s))&&(!!(n&&Object(o.isClientReady)(t)&&Object(i.isSucceeded)(a))||!!(Object(i.isSucceeded)(e)&&Object(o.isClientReady)(t)&&Object(i.isSucceeded)(a))))})},"42Z2":function(e,t,n){"use strict";var a=n("Dogn"),r=n("bK42"),i=n("rkDb"),o=n("QYOI"),s=n("ib5I"),c=n("D1/i"),u=n("etd5");u.a.implement(Array,function(e,t){return o.Iterable.isIterable(e)?t.concat(e.toJS()):t.concat(e)});u.a.implementInherited(o.Seq.Indexed,function(e,t){return t.concat(e)});u.a.implementInherited(o.Collection.Indexed,function(e,t){return t.concat(e)});u.a.implement(String,function(e,t){return t.concat(e)});var l,d=u.a,p=Object(c.a)(d),m=n("A3tK"),h=n("iRI7"),f=n("qENm"),b=n("cep6"),g=n("826o"),v=n("6uLn"),O=n("6yZo");n.d(t,"a",function(){return j});var j=Object(s.a)([b.a,v.a,f.a,O.a],function(e,t,n,s){var c=Object(i.getChannelName)(e),u=Object(i.getThreadId)(e),d=Object(a.b)(t)||Object(o.List)(),f=Object(h.a)(p(d),p(n),Object(m.a)(Object(r.wrapFailedMessage)({threadId:u,channel:c})),p(s))(Object(o.List)()),b=f.size?f.filter(g.isSupportedMessageType):Object(o.List)();Object(o.is)(l,b)||(l=b);return l})},"5Dxy":function(e,t,n){"use strict";n.d(t,"a",function(){return s});var a=n("mnU7"),r=n("nncj"),i=n("rkDb"),o=n("oEjG"),s=function(e){var t=e.attachment,n=e.thread;return function(e){var s=Object(i.getThreadId)(n),c=Object(a.getLocalId)(t);e(Object(o.removeAttachment)({localId:c,threadId:s}));e(Object(r.trackInteraction)("remove-staged-attachment",{action:"remove staged attachment"}))}}},"5EC7":function(e,t,n){"use strict";n.d(t,"a",function(){return c});var a=n("bamq"),r=n("ib5I"),i=n("u70c"),o=n("42Z2"),s=!1,c=Object(r.a)([o.a],function(e){return Object(a.insertDatesIntoMessageList)(e,i.a,s)})},"5EvN":function(e,t){function n(e){var t=this.has(e)&&delete this.__data__[e];this.size-=t?1:0;return t}e.exports=n},"5F1J":function(e,t,n){"use strict";n.r(t);n.d(t,"getFileSize",function(){return i});var a=n("BjQQ"),r=n("mnU7"),i=function(e){var t=Object(r.getFile)(e);return Object(a.a)("size",t)||0}},"5Utl":function(e,t,n){"use strict";var a=n("QYOI"),r=Object(a.Record)({tileBackgroundColor:"rgba(255, 255, 255, 1)"},"FileAttachmentTheme");t.a=r},"6uLn":function(e,t,n){"use strict";n.d(t,"a",function(){return u});var a=n("A9rd"),r=n("ib5I"),i=n("pnsR"),o=n("V/zO"),s=n("9VMc"),c=n("sjvu"),u=Object(r.a)([o.getCurrentThreadId,i.a,s.getStagedThreadHistory],function(e,t,n){return e===c.a?n:Object(a.a)(t)||null})},"6uUH":function(e,t){function n(e,t){return e===t||e!=e&&t!=t}e.exports=n},"6yZo":function(e,t,n){"use strict";var a=n("M2Ie"),r=n("erfM"),i=n("lPZn"),o=n("ib5I"),s=n("cep6"),c=n("PRHD"),u=Object(o.a)([function(e){return e},s.a],function(e,t){return Object(c.a)(e,{thread:t})}),l=n("V/zO"),d=n("QYOI"),p=n("SE0r"),m=n("zGuL"),h=n("/5gn");n.d(t,"a",function(){return f});var f=Object(o.a)([u,l.getCurrentThreadId],function(e,t){if(!e||!t)return Object(d.List)();var n=Object(r.agentTypeToCMFSenderType)(Object(i.getAgentType)(e),!0),o=Object(h.a)(n);return Object(d.List)([new p.a({id:Object(m.generateUuid)(),typingState:null,sender:Object(a.a)({"@type":n},o,Object(i.getUserId)(e))})])})},"7+AW":function(e,t,n){"use strict";n.r(t);n.d(t,"trackSendMessage",function(){return r});var a=n("nncj"),r=function(e){var t=e.threadId;return function(e){var n={};"number"==typeof t&&(n.threadId=t);e(Object(a.trackInteraction)("send-message",n))}}},"7RMX":function(e,t,n){var a=n("fwVr"),r=Object.prototype.hasOwnProperty;function i(e){var t=this.__data__;return a?void 0!==t[e]:r.call(t,e)}e.exports=i},"826o":function(e,t,n){"use strict";n.r(t);n.d(t,"isSupportedMessageType",function(){return l});var a=n("teao"),r=n("k7Gs"),i=n("zwQg"),o=n("NFcK"),s=n("u70c"),c=n("2S+z"),u=n("dQWp"),l=function(e){if(e instanceof a.a||e instanceof r.a){e=Object(i.a)(e);if(Object(c.getSenderType)(e)!==u.e)return!1}if(Object(o.a)(e))return!1;var t=Object(c.getType)(e);return Object.keys(s.a).some(function(e){return e===t})}},"8cQJ":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n("ib5I"),r=n("nKka"),i=n("sdvt"),o=Object(a.a)([i.getAssignedResponderInWidget],function(e){return Boolean(e&&Object(r.a)(e))})},"8fPJ":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n("8qT0"),r=n("MscV"),i=function(e){return Object(a.buildSenderLocator)(Object(r.getType)(e),Object(r.getId)(e))}},"8qT0":function(e,t,n){"use strict";n.r(t);var a=n("dQWp"),r=n("QYOI"),i=Object(r.Record)({senderId:null,senderType:null},"SenderLocator");n.d(t,"buildSenderLocator",function(){return s});var o=[a.a,a.b,a.d,a.e,a.c],s=function(e,t){o.includes(e)||console.warn("buildSenderLocator recevied invalid sender type "+e+" expected one of: "+o);return e===a.e?i({senderType:a.e}):i({senderType:e,senderId:t?""+t:null})}},"9H+j":function(e,t,n){"use strict";n.r(t);n.d(t,"updateSessionId",function(){return i});var a=n("CRij"),r=n("lPFy"),i=Object(a.createAction)(r.b,function(e){return{sessionId:e}})},"9J2q":function(e,t,n){var a=n("wzyz")(n("QN3r"),"Map");e.exports=a},"9O5s":function(e,t,n){"use strict";n.r(t);n.d(t,"getMessageId",function(){return o});var a=n("ib5I"),r=n("BjQQ"),i=n("8XG9"),o=Object(a.a)(i.a,Object(r.a)("id"))},AJY7:function(e,t,n){"use strict";n.r(t);n.d(t,"isUploadCompleted",function(){return r});var a=n("mnU7"),r=function(e){return-1!==Object(a.getFileId)(e)}},AXPb:function(e,t,n){"use strict";var a=n("QYOI"),r="<<anonymous>>",i={listOf:d,mapOf:m,orderedMapOf:h,setOf:f,orderedSetOf:b,stackOf:g,iterableOf:v,recordOf:O,shape:y,contains:y,mapContains:C,list:c("List",a.List.isList),map:c("Map",a.Map.isMap),orderedMap:c("OrderedMap",a.OrderedMap.isOrderedMap),set:c("Set",a.Set.isSet),orderedSet:c("OrderedSet",a.OrderedSet.isOrderedSet),stack:c("Stack",a.Stack.isStack),seq:c("Seq",a.Seq.isSeq),record:c("Record",function(e){return e instanceof a.Record}),iterable:c("Iterable",a.Iterable.isIterable)};function o(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":e instanceof a.Iterable?"Immutable."+e.toSource().split(" ")[0]:t}function s(e){function t(t,n,a,i,o,s){for(var c=arguments.length,u=Array(c>6?c-6:0),l=6;l<c;l++)u[l-6]=arguments[l];s=s||a;i=i||r;return null!=n[a]?e.apply(void 0,[n,a,i,o,s].concat(u)):t?new Error("Required "+o+" `"+s+"` was not specified in `"+i+"`."):void 0}var n=t.bind(null,!1);n.isRequired=t.bind(null,!0);return n}function c(e,t){function n(n,a,r,i,s){var c=n[a];if(!t(c)){var u=o(c);return new Error("Invalid "+i+" `"+s+"` of type `"+u+"` supplied to `"+r+"`, expected `"+e+"`.")}return null}return s(n)}function u(e,t,n){function a(a,r,i,s,c){for(var u=arguments.length,l=Array(u>5?u-5:0),d=5;d<u;d++)l[d-5]=arguments[d];var p=a[r];if(!n(p)){var m=s,h=o(p);return new Error("Invalid "+m+" `"+c+"` of type `"+h+"` supplied to `"+i+"`, expected an Immutable.js "+t+".")}if("function"!=typeof e)return new Error("Invalid typeChecker supplied to `"+i+"` for propType `"+c+"`, expected a function.");for(var f=p.toArray(),b=0,g=f.length;b<g;b++){var v=e.apply(void 0,[f,b,i,s,c+"["+b+"]"].concat(l));if(v instanceof Error)return v}}return s(a)}function l(e){function t(t,n,a,r,i){for(var o=arguments.length,s=Array(o>5?o-5:0),c=5;c<o;c++)s[c-5]=arguments[c];var u=t[n];if("function"!=typeof e)return new Error("Invalid keysTypeChecker (optional second argument) supplied to `"+a+"` for propType `"+i+"`, expected a function.");for(var l=u.keySeq().toArray(),d=0,p=l.length;d<p;d++){var m=e.apply(void 0,[l,d,a,r,i+" -> key("+l[d]+")"].concat(s));if(m instanceof Error)return m}}return s(t)}function d(e){return u(e,"List",a.List.isList)}function p(e,t,n,a){function r(){for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return u(e,n,a).apply(void 0,i)||t&&l(t).apply(void 0,i)}return s(r)}function m(e,t){return p(e,t,"Map",a.Map.isMap)}function h(e,t){return p(e,t,"OrderedMap",a.OrderedMap.isOrderedMap)}function f(e){return u(e,"Set",a.Set.isSet)}function b(e){return u(e,"OrderedSet",a.OrderedSet.isOrderedSet)}function g(e){return u(e,"Stack",a.Stack.isStack)}function v(e){return u(e,"Iterable",a.Iterable.isIterable)}function O(e){function t(t,n,r,i,s){for(var c=arguments.length,u=Array(c>5?c-5:0),l=5;l<c;l++)u[l-5]=arguments[l];var d=t[n];if(!(d instanceof a.Record)){var p=o(d);return new Error("Invalid "+i+" `"+s+"` of type `"+p+"` supplied to `"+r+"`, expected an Immutable.js Record.")}for(var m in e){var h=e[m];if(h){var f=d.toObject(),b=h.apply(void 0,[f,m,r,i,s+"."+m].concat(u));if(b)return b}}}return s(t)}function j(e){var t=void 0===arguments[1]?"Iterable":arguments[1],n=void 0===arguments[2]?a.Iterable.isIterable:arguments[2];function r(a,r,i,s,c){for(var u=arguments.length,l=Array(u>5?u-5:0),d=5;d<u;d++)l[d-5]=arguments[d];var p=a[r];if(!n(p)){var m=o(p);return new Error("Invalid "+s+" `"+c+"` of type `"+m+"` supplied to `"+i+"`, expected an Immutable.js "+t+".")}var h=p.toObject();for(var f in e){var b=e[f];if(b){var g=b.apply(void 0,[h,f,i,s,c+"."+f].concat(l));if(g)return g}}}return s(r)}function y(e){return j(e)}function C(e){return j(e,"Map",a.Map.isMap)}e.exports=i},B948:function(e,t,n){"use strict";n.r(t);n.d(t,"buildVisitorCommonMessage",function(){return m});var a=n("M2Ie"),r=n("dQWp"),i=n("JBk1"),o=n("/5gn"),s=n("6wez"),c=n("Aw1I"),u=n("zGuL"),l=n("ax+l"),d=n("P4AH"),p=n("rkDb"),m=function(e){var t,n=e.clientType,m=e.fileAttachment,h=e.quickReply,f=e.richText,b=e.senderId,g=e.text,v=e.thread,O=Object(p.getSource)(v),j=Object(s.b)(r.e),y=Object(o.a)(j),C=[];m&&C.push(m);h&&C.push(new i.a(h));return Object(d.buildCommonMessage)({status:{source:O,messageStatus:l.b},clientType:n,attachments:C,text:g,richText:f,id:Object(u.generateUuid)(),sender:(t={},Object(a.a)(t,c.p,j),Object(a.a)(t,y,b),t)})}},BBNf:function(e,t,n){"use strict";var a=n("19qb"),r=n("5Dxy"),i=n("Qu2R"),o=n("Ta4D"),s=n("Gbx4"),c=n("3R6H"),u=n("ib5I"),l=n("VO0R"),d=n("44sD"),p=Object(u.a)([d.getAsyncPubSubClient],l.isFailed),m=n("cep6"),h=n("zC+/"),f=n("L6i2"),b=n("RPTv"),g=n("GAhl"),v=n("rXC1"),O=n("ilp/"),j=n("999m"),y=n("/bxT"),C=n("E53m"),x=n("KMxH"),k=n("MS0j"),E=n("HmhQ"),T=n("Pett"),I=n("xq+X"),w=Object(I.a)(["isAttachmentDisabled"]),R=n("TcSF"),S=Object(u.a)([R.a],function(e){return w(e)}),A=n("bz7q"),M=n("BjQQ"),P=function(e){return Object(M.a)("messageEditorStaging",e)},N=n("7RmY"),q=function(e,t){return Object(I.a)([e,N.a],t)},_=Object(u.a)(A.getSelectedThreadId,P,function(e,t){return q(e,t)}),L=n("CRij"),F=n("2n97"),z=Object(L.createAction)(F.H,function(e){return e}),D=Object(L.createAction)(F.A),B=function(e){return function(t,n){t(z({stagingText:e,threadId:Object(A.getSelectedThreadId)(n())}))}},U=function(){return function(e,t){e(D(Object(A.getSelectedThreadId)(t())))}},Q=n("E+Od"),H=n("Qq8X"),V=n("+Tc3"),W=n("e1jc"),Y=function(e){var t=Object(m.a)(e),n=!Object(C.a)(e,{thread:t})&&Object(g.a)(e,{thread:t}),a=Object(x.getIsBot)(e)&&Object(W.getIsWidgetInAwayMode)(e)&&!Object(V.isPersistedThread)(t);return{coloring:Object(h.a)(e),currentConversation:t,disablePublish:!Object(c.a)(e),disableTextInput:n||a,showQuickReplyPlaceholder:n,isOnFocus:Object(T.a)(e),stagedMessage:_(e),messagesPageUri:Object(f.getMessagesPageUri)(e),networkOffline:p(e),showingHsBranding:Object(b.a)(e),showInitialMessageBubble:Object(y.a)(e),stagedAttachments:Object(o.a)(e),mobile:Object(k.getIsMobile)(e),shouldDisableAttachment:S(e),shouldSendInputStagingEvent:Object(H.a)()}},K={closeInitialMessageBubble:j.a,inputStagingEvent:Q.a,onRemoveAttachment:r.a,onSelectAttachmentFile:i.a,publishMessage:s.a,publishTypingMessage:v.a,toggleOnAndOffInputFocus:E.a,setMessageEditorStagingText:B,removeMessageEditorStagingText:U};t.a=Object(a.connect)(Y,K)(O.a)},BOd2:function(e,t,n){var a=n("QWT7");function r(e){return a(this,e).get(e)}e.exports=r},BaOL:function(e,t,n){"use strict";n.r(t);n.d(t,"attachmentUploadProgress",function(){return i});var a=n("CRij"),r=n("bDpH"),i=Object(a.createAction)(r.c)},BvgU:function(e,t,n){"use strict";var a=n("NbFO"),r="\\.",i='\\s\\?\\#\\/\\(\\)\\=\\:\\;\\@\\\\"'+r,o="(?:www"+r+")",s="(?:[%a-zA-Z0-9_-]+)",c="(?:(?:\\.[%a-zA-Z0-9-]+)[^\\.\\s])",u="\\s\\?\\#\\&",l=new RegExp("^(?:.+)@"+{www:o,domain:o+"?(?:(?:[^"+i+"]+)"+r+")+(?:[^"+i+"]+)",protocol:"(?:(?:https?:)?\\/\\/)",protocolRequired:"(?:https?:\\/\\/)",path:"(?:(?:\\/[^\\s\\/\\#\\&\\?]*)+\\/?)",wildcardPath:"(?:(/(?:[%a-zA-Z0-9_-])*?)*(?:/[\\*]))",file:""+s+c,fileName:s,fileExtension:c,search:"(?:([\\?&#][^"+u+"]*?=?([^"+u+"]*))+)",ungroupedSearch:"(?:(?:[\\?&#][^"+u+"]*?=?(?:[^"+u+"]*))+)"}.domain+"$");t.a=Object(a.a)({name:"EmailAddress",validator:function(e){return l.test(e)}})},CbkJ:function(e,t,n){"use strict";var a=n("az9m"),r=n("Ktcs"),i=n.n(r),o=n("9f1P"),s=n.n(o),c=n("c0kh"),u=c.b,l=c.a,d=c.i,p=function(){return"#f5f8fa"},m=function(){return"#eaf0f6"},h=n("VfuR"),f=n.n(h),b=n("3RBx"),g=function(e){var t=e.theme;return Object(o.css)(["color:",";background-color:",";"],u(t),l(t))},v=s.a.div.withConfig({displayName:"VizExFileAttachment__AttachmentWrapper",componentId:"sc-4siid1-0"})(["display:flex;font-size:12px;padding:12px;padding-right:32px;border-radius:3px;position:relative;max-width:100%;flex-direction:row;background-color:",";border:1px solid ",";color:",";",";"],function(e){var t=e.theme;return p(t)},function(e){var t=e.theme;return m(t)},function(e){var t=e.theme;return d(t)},function(e){return e.processing&&g(e)}),O=s.a.div.withConfig({displayName:"VizExFileAttachment__ContentWrapper",componentId:"sc-4siid1-1"})(["display:flex;position:relative;max-width:100%;> *:nth-child(2){padding-left:12px;}"]),j=s.a.div.withConfig({displayName:"VizExFileAttachment__PreviewWrapper",componentId:"sc-4siid1-2"})(["overflow-y:hidden;overflow-x:hidden;align-items:center;display:flex;flex-basis:auto;justify-content:center;flex-shrink:0;font-size:32px;max-height:32px;width:32px;"]),y=s.a.div.withConfig({displayName:"VizExFileAttachment__FileInfoWrapper",componentId:"sc-4siid1-3"})(["flex-grow:1;flex-shrink:0;flex-basis:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;@media all and (-ms-high-contrast:none){flex-basis:auto;max-width:100%;padding-right:12px;}"]),C=s.a.b.withConfig({displayName:"VizExFileAttachment__FileName",componentId:"sc-4siid1-4"})(["font-weight:600;font-size:12px;line-height:12px;"]),x=s.a.div.withConfig({displayName:"VizExFileAttachment__FileInfo",componentId:"sc-4siid1-5"})(["font-size:12px;line-height:12px;"]),k=function(e){var t=e.processing,n=e.preview,r=e.fileName,o=e.fileInfo,s=e.children,c=e.theme,u=Object(a.a)(e,["processing","preview","fileName","fileInfo","children","theme"]);return i.a.createElement(v,Object.assign({},u,{theme:c,processing:t}),s,i.a.createElement(O,null,n&&i.a.createElement(j,null,n),i.a.createElement(y,null,i.a.createElement(C,null,r),i.a.createElement(x,null,o))))};k.propTypes={children:f.a.node,fileInfo:f.a.node,fileName:f.a.node,preview:f.a.node,processing:f.a.bool,theme:b.a};k.displayName="VizExFileAttachment";t.a=k},DHw3:function(e,t,n){"use strict";n.r(t);n.d(t,"clickedConsentToProcess",function(){return f});n.d(t,"consentToProcessSucceeded",function(){return b});n.d(t,"consentToProcessFailed",function(){return g});n.d(t,"consentToProcess",function(){return v});var a=n("CRij"),r=n("4scq"),i=n("Dho5"),o=n("xOvp"),s=n("9O5s"),c=n("xqCo"),u=n("Jtvd"),l=n("gmfO"),d=n("9H+j"),p=n("/A3W"),m=n("nncj"),h=n("qeXV"),f=Object(a.createAction)(i.d),b=Object(a.createAction)(i.f),g=Object(a.createAction)(i.e);function v(){return function(e,t){var n=Object(o.getSessionId)(t()),a=Object(s.getMessageId)(t()),i=Object(p.getHubspotUtk)(t()),v=Object(h.getLatestWidgetData)(t());e(f());Object(c.sendConsentToProcess)({sessionId:n,hubspotUtk:i,welcomeMessageId:a,widgetData:v}).then(function(n){var a=n.sessionId;Object(l.gdprCookieConsentOnExitIntentEnabled)(t(),v)||e(Object(u.handleStoreMessagesCookie)(Object(r.getMessagesUtk)(t())));e(Object(d.updateSessionId)(a));e(b());e(Object(m.trackInteraction)("widget-interaction",{action:"clicked consent to process button"}))},function(t){return e(g({error:t}))}).done()}}},DZ7b:function(e,t,n){"use strict";var a=n("+FUr"),r=n("LjY7"),i=n("woGC"),o=n("YZ/j"),s=n("MEIQ"),c=n("E7sj"),u=n.n(c),l=n("rsRY"),d=n("VfuR"),p=n.n(d),m=n("Ktcs"),h=n.n(m),f=n("r1tY"),b=n.n(f),g=n("9f1P"),v=n.n(g),O=n("zSU9"),j=n("9hgJ"),y=n("az9m"),C=["left","right"],x=["top","bottom"],k=C.concat(x).concat(["left top","left bottom","right top","right bottom","top left","top right","bottom left","bottom right","top center","bottom center","left middle","right middle"]);function E(e){return e.split(" ")[0]}function T(e){return C.includes(e)}function I(e){var t=e.split(" ")[1];return t||(T(E(e))?"middle":"center")}var w=16,R=8,S=function(e){switch(E(e.placement)){case"top":return Object(g.css)(["transform:rotate(45deg);top:-","px;"],w+5);case"right":return Object(g.css)(["transform:rotate(135deg);right:-","px;"],w+5);case"bottom":return Object(g.css)(["transform:rotate(-135deg);bottom:-","px;"],w+5);case"left":return Object(g.css)(["transform:rotate(-45deg);left:-","px;"],w+5);default:return""}},A=function(e){switch(I(e.placement)){case"top":return Object(g.css)(["top:","px;"],R);case"middle":return Object(g.css)(["top:calc(50% - ","px);"],w/2);case"bottom":return Object(g.css)(["bottom:","px;"],R);case"left":return Object(g.css)(["left:","px;"],R);case"center":return Object(g.css)(["left:calc(50% - ","px);"],w/2);case"right":return Object(g.css)(["right:","px;"],R);default:return""}},M=function(e){var t=e.placement;return Object(g.css)(["",";",";"],S({placement:t}),A({placement:t}))},P=n("FS71"),N="#425b76",q=function(){return N},_=function(){return P.l},L=v.a.div.withConfig({displayName:"VizExTooltipArrow",componentId:"myy70c-0"})(["position:absolute;pointer-events:none;border:none;clip-path:polygon(100% 100%,0 100%,100% 0);border-top-left-radius:100%;border-radius:3px;border-top-color:transparent !important;border-left-color:transparent !important;border-bottom-right-radius:3px;width:16px;height:16px;background-color:",";",""],function(e){var t=e.theme;return q(t)},M),F=16,z=function(e){switch(I(e.placement)){case"top":return Object(g.css)(["top:0;"]);case"bottom":return Object(g.css)(["bottom:0;"]);case"left":return Object(g.css)(["left:0;"]);case"right":return Object(g.css)(["right:0;"]);default:return""}},D=function(e){switch(E(e.placement)){case"top":return Object(g.css)(["transform:translateY(-100%);top:-","px;"],F-5);case"right":return Object(g.css)(["transform:translateX(100%);right:-","px;"],F-5);case"bottom":return Object(g.css)(["transform:translateY(100%);bottom:-","px;"],F-5);case"left":return Object(g.css)(["transform:translateX(-100%);left:-","px;"],F-5);default:return""}},B=function(e){switch(e.placement){case"top center":case"top middle":return Object(g.css)(["transform:translate(-50%,-100%);left:50%;"]);case"bottom middle":case"bottom center":return Object(g.css)(["transform:translate(-50%,100%);left:50%;"]);case"left center":case"left middle":return Object(g.css)(["transform:translate(-100%,-50%);top:50%;"]);case"right center":case"right middle":return Object(g.css)(["transform:translate(100%,-50%);top:50%;"]);default:return""}},U=function(e){var t=e.placement;return Object(g.css)(["",";",";",""],D({placement:t}),z({placement:t}),B({placement:t}))},Q=v.a.div.withConfig({displayName:"VizExTooltipBody",componentId:"qy3p0o-0"})(["border-radius:3px;font-size:13px;max-width:232px;display:block;position:absolute;visibility:visible;box-shadow:0 3px 8px rgba(0,0,0,0.1);line-height:1.5;padding:10px 16px;text-decoration:none;word-wrap:break-word;",";white-space:nowrap;background-color:",";color:",";pointer-events:",";"],U,function(e){var t=e.theme;return q(t)},function(e){var t=e.theme;return _(t)},function(e){return e.open?"all":"none"}),H=n("3RBx"),V=n("b4vT"),W=v.a.div.withConfig({displayName:"VizExTooltip__Popover",componentId:"qngada-0"})(["transition-property:",";transition-duration:","ms;opacity:",";transform:",";position:absolute;pointer-events:none;width:100%;height:100%;"],function(e){return e.transitioning?"opacity ease-out, transform ease-out":"none"},function(e){return e.duration},function(e){return e.open?"1":"0"},function(e){var t=e.open,n=e.transitioning;return t&&!n?"none":t?"scale(1)":"scale(.75)"}),Y=v.a.div.withConfig({displayName:"VizExTooltip__PopoverWrapper",componentId:"qngada-1"})(["display:inline-block;position:relative;"]),K=function(e){var t=e.content,n=e.backgroundColor,a=e.textColor,r=e.placement,i=e.children,o=e.theme,s=e.onOpenChange,c=e.open,u=Object(y.a)(e,["content","backgroundColor","textColor","placement","children","theme","onOpenChange","open"]),l=Object(m.useState)(!1),d=Object(j.a)(l,2),p=d[0],f=d[1];if(!t)return i;var b="boolean"==typeof c,g=function(){if(!b){Object(V.a)(s,!0);f(!0)}},v=function(){if(!b){Object(V.a)(s,!1);f(!1)}},O=b?c:p;return h.a.createElement(Y,Object.assign({},u,{onMouseEnter:g,onMouseLeave:v}),h.a.createElement(W,{open:O,duration:250,transitioning:!0},h.a.createElement(Q,{textColor:a,backgroundColor:n,placement:r,open:O,theme:o,"data-test-open":O},t),h.a.createElement(L,{backgroundColor:n,placement:r,theme:o})),i)};K.propTypes={backgroundColor:p.a.string,children:p.a.node,content:p.a.node,onOpenChange:p.a.func,open:p.a.bool,placement:p.a.oneOf(k),textColor:p.a.string,theme:H.a};K.displayName="VizExTooltip";K.defaultProps={placement:"top right"};var G=K,X=n("TSck"),Z=n("Q0d5"),J=v.a.input.withConfig({displayName:"AttachmentPickerButton__HiddenInput",componentId:"mj74yt-0"})(["display:none;"]),$=function(e){Object(s.a)(t,e);function t(e){var n;Object(a.a)(this,t);(n=Object(i.a)(this,Object(o.a)(t).call(this,e))).inputRefCallback=function(e){n.inputRef=e};n.findInputNode=function(){return n.inputRef?b.a.findDOMNode(n.inputRef):null};n.clearInputNode=function(){var e=n.findInputNode();e&&(e.value="")};n.handlePickerClick=function(e){var t=n.findInputNode();t&&t.click();n.props.onClick(e)};n.onInputChange=function(e){var t=e.target.files;n.props.onSelectFiles({files:t});n.clearInputNode()};n.renderMaxFileSizeTooltip=function(){if(!n.props.mobile)return h.a.createElement(l.a,{message:"conversations-visitor-ui.fileSizeLimit",options:{size:u.a.formatSize(n.props.maxAttachmentFileSize)}})};n.inputRef=null;return n}Object(r.a)(t,[{key:"render",value:function(){var e=this.props.disabled;return h.a.createElement(h.a.Fragment,null,h.a.createElement(G,{content:this.renderMaxFileSizeTooltip(),placement:"top center"},h.a.createElement(O.a,{disabled:e,onClick:this.handlePickerClick,use:"transparent-on-background","aria-label":u.a.text("conversations-visitor-ui.visitorExperienceAriaLabels.attachment"),shape:"circle"},h.a.createElement(X.a,{icon:h.a.createElement(Z.a,null)}))),h.a.createElement(J,{accept:this.props.accept.join(","),"data-selenium-test":"visitor-attachment-file-input",disabled:this.props.disabled,ref:this.inputRefCallback,type:"file",multiple:this.props.allowMultiple,onChange:this.onInputChange}))}}]);return t}(h.a.PureComponent);$.displayName="AttachmentPickerButton";$.propTypes={accept:p.a.arrayOf(p.a.string).isRequired,allowMultiple:p.a.bool.isRequired,disabled:p.a.bool,maxAttachmentFileSize:p.a.number.isRequired,mobile:p.a.bool,onClick:p.a.func,onSelectFiles:p.a.func.isRequired};$.defaultProps={accept:[],allowMultiple:!1,onClick:function(){}};t.a=$},DyWv:function(e,t,n){"use strict";var a=n("+FUr"),r=n("LjY7"),i=n("woGC"),o=n("YZ/j"),s=n("MEIQ"),c=n("19qb"),u=n("VfuR"),l=n.n(u),d=n("E7sj"),p=n.n(d),m=n("Ktcs"),h=n.n(m),f=n("9hgJ"),b=n("9f1P"),g=n.n(b),v=n("fA4S"),O=n("rsRY"),j=n("lLpL"),y=n("ZSew"),C=n("gAti"),x=n("/d/l"),k=n("mdUv"),E=g.a.div.withConfig({displayName:"ConsentModal__ConsentModalContainer",componentId:"f7b00d-0"})(["position:absolute;display:flex;align-items:flex-start;justify-content:center;height:calc(100% - ","px);top:","px;width:100%;background-color:rgba(45,62,80,0.79);backdrop-filter:blur(2px);padding-top:20%;border-bottom-left-radius:","px;border-bottom-right-radius:","px;overflow-y:hidden;"],x.d,x.d,C.a,C.a),T=g.a.div.withConfig({displayName:"ConsentModal__ContentContainer",componentId:"f7b00d-1"})(["display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;padding:12px 24px;background-color:white;border-radius:3px;box-shadow:0 2px 4px -1px rgba(0,0,0,0.75);margin:0 20px;"]),I=g()(k.a).withConfig({displayName:"ConsentModal__SmallNoParagraphPadding",componentId:"f7b00d-2"})(["display:block;word-break:break-word;word-wrap:break-word;-ms-word-break:break-all;p{margin-bottom:0;}"]),w=g()(v.a).withConfig({displayName:"ConsentModal__FullWidthButton",componentId:"f7b00d-3"})(["padding:9px 16px;flex:0 1 100%;&:not(:first-child){margin-left:8px;}"]),R=g.a.div.withConfig({displayName:"ConsentModal__ButtonsContainer",componentId:"f7b00d-4"})(["display:flex;flex-direction:row;margin:12px 0 0 0;width:100%;"]),S=g.a.p.withConfig({displayName:"ConsentModal__Header",componentId:"f7b00d-5"})(["text-transform:none;font-size:18px;font-weight:500;margin-top:18px;margin-bottom:12px;line-height:normal;"]),A=function(e){var t=e.headerMessage,n=e.message,a=e.onClick,r=e.onDeclineClick,i=Object(m.useState)({isEntering:!0,shouldRender:!0,callback:function(){}}),o=Object(f.a)(i,2),s=o[0],c=o[1],u=function(){if(!s.isEntering){s.callback();c(Object.assign({},s,{shouldRender:!1}))}},l=function(e){c(Object.assign({},s,{isEntering:!1,callback:e}))};return s.shouldRender?h.a.createElement(E,{style:{animation:(s.isEntering?"consent-modal-background-fadeIn":"consent-modal-background-fadeOut")+" .3s"},"data-test-id":"gdpr-consent-prompt-container",onAnimationEnd:u,key:Math.random+"-consent-modal-container"},h.a.createElement(y.a,null,function(e){return h.a.createElement(T,{key:"consent-modal-content-container","data-test-id":"gdpr-consent-prompt",style:{animation:(s.isEntering?"consent-modal-content-fadeIn":"consent-modal-content-fadeOut")+" .3s"}},t&&h.a.createElement(S,null,t),h.a.createElement(I,{use:"help","data-test-id":"gdpr-consent-text",dangerouslySetInnerHTML:{__html:Object(j.a)(n)}}),h.a.createElement(R,null,h.a.createElement(w,{onClick:function(){l(a)},"data-test-id":"gdpr-consent-agree-button",use:"primary"},h.a.createElement(O.a,{message:"conversations-visitor-experience-components.buttons.agree",options:{locale:e}})),h.a.createElement(w,{onClick:function(){l(r)},"data-test-id":"gdpr-consent-dismiss-button"},h.a.createElement(O.a,{message:"conversations-visitor-experience-components.buttons.disagree",options:{locale:e}}))))})):null};A.defaultProps={animationTimeMs:300,onClick:function(){},onDeclineClick:function(){}};A.propTypes={headerMessage:l.a.node,message:l.a.string.isRequired,onClick:l.a.func.isRequired,onDeclineClick:l.a.func.isRequired};A.displayName="ConsentModal";var M=A,P=n("dLcb"),N=n("nncj"),q=n("lEuo"),_=n("CWLX"),L=n("gmfO"),F=n("QaKq");function z(){return function(e,t){(Object(L.gdprCookieConsentOnExitIntentEnabled)(t())||Object(F.getAPIEnableWidgetCookieBannerOnExitIntent)(t()))&&e(Object(_.a)(!1));e(Object(N.trackInteraction)("widget-interaction",{action:"clicked decline cookies button"}))}}var D=n("zC+/"),B=n("XpET"),U=n("qeXV"),Q=n("Yuqq"),H=function(e){Object(s.a)(t,e);function t(){Object(a.a)(this,t);return Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}Object(r.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.trackInteraction)("widget-interaction",{action:"view consent to cookies"})}},{key:"render",value:function(){var e=this;return h.a.createElement(y.a,null,function(t){return e.props.isExitIntentPrompt?h.a.createElement(M,{headerMessage:h.a.createElement(O.a,{message:"conversations-visitor-ui.gdpr.consentToCookies.promptHeader",options:{locale:t}}),message:p.a.text("conversations-visitor-ui.gdpr.consentToCookies.exitIntentCookieConsent",{locale:t}),onDeclineClick:e.props.declineCookies,onClick:e.props.consentToCookies,coloring:e.props.coloring}):h.a.createElement(P.a,{message:p.a.text("conversations-visitor-ui.gdpr.consentToCookies.pageLoadCookieConsent",{locale:t}),onDeclineClick:e.props.declineCookies,onClick:e.props.consentToCookies,coloring:e.props.coloring,showButton:!0})})}}]);return t}(m.Component);H.displayName="CookieConsentPrompt";H.propTypes={coloring:Object(B.a)("ColoringRecord"),consentToCookies:l.a.func.isRequired,declineCookies:l.a.func.isRequired,isExitIntentPrompt:l.a.bool.isRequired,trackInteraction:l.a.func.isRequired};var V={consentToCookies:q.a,declineCookies:z,trackInteraction:N.trackInteraction},W=function(e){return{coloring:Object(D.a)(e),widgetData:Object(U.getLatestWidgetData)(e),isExitIntentPrompt:Object(L.gdprCookieConsentOnExitIntentEnabled)(e)&&!Object(Q.getAPIEnableWidgetCookieBanner)(e)}};t.a=Object(c.connect)(W,V)(H)},"E+Od":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n("wjj1"),r=n("Wjp6"),i=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n){n(Object(a.postExternalApiEvent)({eventType:r.d,payload:{visitorMessageData:e,isEmptyInput:t}}))}}},E53m:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var a=n("ib5I"),r=n("KGLF"),i=n("t1l6"),o=n("nmWS"),s=n("d04J"),c=n("+UNX"),u=Object(a.a)([r.historyDataForThread],function(e){if(!e||!Object(c.hasMessages)(e))return!0;var t=Object(o.a)(e).filter(function(e){return Object(i.isChatMessage)(e)||Object(i.isInitialMessage)(e)}).last();return Object(s.c)(t)})},E6l7:function(e,t,n){"use strict";var a=n("+FUr"),r=n("LjY7"),i=n("woGC"),o=n("YZ/j"),s=n("Q9/I"),c=n("MEIQ"),u=n("y+AS"),l=n.n(u),d=n("mnU7"),p=n("AJY7"),m=n("XpET"),h=n("gwgA"),f=n("E7sj"),b=n.n(f),g=n("QYOI"),v=n("VfuR"),O=n.n(v),j=n("Ktcs"),y=n.n(j),C=n("r1tY"),x=n.n(C),k=n("9f1P"),E=n.n(k),T=E.a.div.withConfig({displayName:"MessageComposer__FullWidth",componentId:"sc-1vkd68j-0"})(["width:100%;"]),I=E.a.div.withConfig({displayName:"MessageComposer__InputWrapper",componentId:"sc-1vkd68j-1"})(["display:flex;width:100%;align-items:center;justify-content:space-between;flex-wrap:nowrap;"]),w=function(e){Object(c.a)(t,e);function t(){Object(a.a)(this,t);return Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}Object(r.a)(t,[{key:"render",value:function(){var e="input-container m-bottom-2"+(this.props.showingHsBranding?"":" no-branding");return y.a.createElement("div",{className:e},this.props.fileUploads&&y.a.createElement(T,null,this.props.fileUploads()),y.a.createElement(I,null,this.props.inputToRender(),this.props.children&&y.a.createElement("div",{className:"display-flex flex-row m-left-1 no-shrink"},this.props.children)))}}]);return t}(j.Component);w.propTypes={children:O.a.node,fileUploads:O.a.func,inputToRender:O.a.func.isRequired,showingHsBranding:O.a.bool};w.defaultProps={fileUploads:null,showingHsBranding:!1};w.displayName="MessageComposer";var R=w,S=n("TlSS"),A=y.a.createContext(void 0),M=A.Consumer,P=(A.Provider,n("9hgJ")),N=n("az9m"),q=function(e){Object(j.useEffect)(function(){var t=function(t){if(e(t)){t.stopPropagation();t.preventDefault()}};document.addEventListener("touchmove",t,{passive:!1});return function(){document.removeEventListener("touchmove",t)}},[e])},_=function(){},L=function(e){var t=y.a.forwardRef(function(t,n){var a=t.onBlur,r=t.onFocus,i=Object(N.a)(t,["onBlur","onFocus"]),o=n||Object(j.useRef)(),s=Object(j.useState)(null),c=Object(P.a)(s,2),u=c[0],l=c[1];q(function(e){if(u&&e.target!==u){o.current&&o.current.blur();l(null);return!1}return Boolean(u)});var d=function(e){l(null);a(e)},p=function(e){e.target&&l(e.target);r(e)};return y.a.createElement(e,Object.assign({},i,{ref:o,onFocus:p,onBlur:d}))});t.propTypes={onBlur:O.a.func,onFocus:O.a.func};t.defaultProps={onBlur:_,onFocus:_};t.displayName="Component";return t};L.propTypes={innerRef:O.a.func.isRequired,onBlur:O.a.func.isRequired,onFocus:O.a.func.isRequired};var F=L,z=n("3RBx"),D=n("mdUv"),B=E.a.div.withConfig({displayName:"VizExFormControl__FormControlWrapper",componentId:"unxire-0"})(["width:100%;flex-basis:100%;"]),U=function(e){Object(c.a)(t,e);function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];(n=Object(i.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(s)))).getChildProps=function(e){var t=e.ariaLabel,n=e.newError,a=e.newRequired,r=e.validationMessage,i=e.fallbackId,o={"aria-label":t,required:a,"aria-invalid":n,"aria-required":a,ref:e.ref};i&&(o.id=i);n&&(o.error=r);return o};return n}Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e["aria-label"],n=e.error,a=e.validationMessage,r=e.required,i=e.theme,o=e.children,s=Object(N.a)(e,["aria-label","error","validationMessage","required","theme","children"]),c=o(Object.assign({},this.getChildProps({ariaLabel:t,newError:n,newRequired:r,validationMessage:a})));return y.a.createElement(B,s,c,a?y.a.createElement(D.a,{use:n?"error":"default",theme:i},a):null)}}]);return t}(y.a.Component);U.displayName="VizExFormControl";U.propTypes={"aria-label":O.a.string,children:O.a.func.isRequired,error:O.a.bool,required:O.a.bool.isRequired,theme:z.a,validationMessage:O.a.node};U.defaultProps={error:!1,required:!1};var Q=U,H=n("b4vT"),V=n("c0kh"),W=V.f,Y=V.e,K=V.c,G=V.a,X=V.b,Z=V.g,J="unstyled",$="default",ee=function(e){return(new DOMParser).parseFromString(e,"text/html").body.textContent||""},te=window.navigator?navigator.userAgent.toLowerCase():"",ne=function(){return te.includes("trident/")},ae=function(e){return""===e.trim()||"<br />"===e.trim()||"<br>"===e.trim()||"<br/>"===e.trim()},re=function(){return Object(k.css)(["outline:none;"])},ie=function(e){var t=e.use,n=e.theme;switch(t){case J:return Object(k.css)(["border:none;background-color:transparent;"]);case $:default:return Object(k.css)(["border:2px solid;border-color:",";background-color:",";"],W(n),Y(n))}},oe=function(e){var t=e.theme;return Object(k.css)(["cursor:not-allowed;background-color:",";color:",";&[contenteditable][placeholder]:empty::after{color:",";cursor:not-allowed;}"],G(t),X(t),X(t))},se=function(e){var t=e.theme;return Object(k.css)(["border:2px solid;border-color:",";"],K(t))},ce=E.a.div.withConfig({displayName:"VizExExpandingInput__StyledInput",componentId:"sc-17oasje-0"})(["border-radius:3px;font-size:16px;line-height:22px;min-height:40px;max-height:",";overflow-x:hidden;overflow-y:auto;padding:8px;position:relative;width:100%;flex-basis:100%;word-break:break-word;cursor:text;",";",";@supports (-webkit-touch-callout:none){cursor:pointer;}&[contenteditable][placeholder]:empty{overflow-y:hidden;}&[contenteditable][placeholder]:empty::after{display:block;content:attr(placeholder);position:relative;color:",";background-color:transparent;cursor:text;user-select:none;font-size:16px;line-height:22px;height:22px;}@media all and (-ms-high-contrast:none){&[contenteditable][placeholder]:empty::after{position:absolute;top:50%;transform:translateY(-50%);}}:focus{",";}",";",";"],function(e){var t=e.maxHeight;return"number"==typeof t?t+"px":t||"150px"},function(e){return e.focus&&re()},ie,function(e){var t=e.theme;return Z(t)},re,function(e){return e.disabled&&oe(e)},function(e){return e.error&&se(e)}),ue=y.a.forwardRef(function(e,t){var n=t||Object(j.useRef)(),a=e.onInput,r=e.placeholder,i=e.onChange,o=e.value,s=e.maxHeight,c=e.disabled,u=e.shouldAutofocus,l=Object(N.a)(e,["onInput","placeholder","onChange","value","maxHeight","disabled","shouldAutofocus"]),d=function(e){e.persist();n.current.innerHTML&&ae(n.current.innerHTML)&&(n.current.innerHTML="");e.target.value=e.target.innerText;for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];H.a.apply(void 0,[i,e].concat(r));H.a.apply(void 0,[a,e].concat(r))},p=function(e){e.preventDefault();var t;try{t=e.clipboardData.getData("text/plain")}catch(n){t=ee(e.clipboardData.getData("text"))}document.queryCommandSupported("insertText")?document.execCommand("insertText",!1,t):document.execCommand("paste",!1,t)};Object(j.useLayoutEffect)(function(){null!==o&&void 0!==o&&o!==n.current.innerText&&(n.current.innerText=o)},[n,o]);Object(j.useEffect)(function(){u&&n&&n.current&&n.current.focus()},[]);var m=ne()?{onKeyUp:d}:{onInput:d};return y.a.createElement(ce,Object.assign({},l,{ref:n,placeholder:r},m,{onPaste:p,contentEditable:!c,maxHeight:s,disabled:c,"aria-disabled":c}))});ue.displayName="VizExExpandingInput";ue.propTypes={disabled:O.a.bool,error:O.a.bool,maxHeight:O.a.number,onChange:O.a.func,onInput:O.a.func,placeholder:O.a.string,shouldAutofocus:O.a.bool,theme:z.a,use:O.a.oneOf([J,$]),value:O.a.string};var le=F(ue);function de(e){var t=e.disabled,n=e.error,a=e.messageText,r=e.onChange,i=e.onInputBlur,o=e.onInputFocus,s=e.onKeyDown,c=e.setEditorRef,u=e.validationMessage,l=e.showQuickReplyPlaceholder;return y.a.createElement(M,null,function(e){return y.a.createElement(Q,{"aria-label":b.a.text(l?"conversations-visitor-ui.chatTextArea.forceQuickReplyPlaceholder":"conversations-visitor-ui.chatTextArea.placeholder",{locale:e}),validationMessage:u,error:n,required:!0},function(u){return y.a.createElement(le,Object.assign({},u,{use:"unstyled",error:n,className:"widget-textarea message-box","data-test-id":"widget-textarea",tabIndex:"0",innerRef:c,maxHeight:100,placeholder:b.a.text(l?"conversations-visitor-ui.chatTextArea.forceQuickReplyPlaceholder":"conversations-visitor-ui.chatTextArea.placeholder",{locale:e}),disabled:t,onChange:r,onKeyDown:s,value:a,onFocus:o,onBlur:i,shouldAutofocus:!0}))})})}de.propTypes={disabled:O.a.bool.isRequired,error:O.a.bool.isRequired,messageText:O.a.string.isRequired,onChange:O.a.func.isRequired,onInputBlur:O.a.func,onInputFocus:O.a.func,onKeyDown:O.a.func.isRequired,setEditorRef:O.a.func.isRequired,showQuickReplyPlaceholder:O.a.bool.isRequired,validationMessage:O.a.string.isRequired};de.displayName="TextInput";var pe=de,me=n("qxzd"),he=n("DZ7b"),fe=n("JeR6"),be=n("vNKw"),ge=n("zSU9"),ve=n("L1d0"),Oe=n("TSck"),je=n("cGcR"),ye=13,Ce=E.a.div.withConfig({displayName:"MessageEditor__FileUploadWrapper",componentId:"sc-8t1ye7-0"})(["display:flex;overflow:auto;& > *:not(:last-child){margin-right:8px;}"]),xe=function(e){Object(c.a)(t,e);function t(e){var n;Object(a.a)(this,t);(n=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={messageText:e.stagedMessageEditorText||""};n.handleChange=n.handleChange.bind(Object(s.a)(n));n.handlePublish=n.handlePublish.bind(Object(s.a)(n));n.handleKeyDown=n.handleKeyDown.bind(Object(s.a)(n));n.setEditorRef=n.setEditorRef.bind(Object(s.a)(n));n.focusEditor=n.focusEditor.bind(Object(s.a)(n));n.renderTextInput=n.renderTextInput.bind(Object(s.a)(n));n.renderFileUploads=n.renderFileUploads.bind(Object(s.a)(n));n.handleSelectAttachmentFiles=n.handleSelectAttachmentFiles.bind(Object(s.a)(n));n.editorRef=null;n.onInputFocus=n.onInputFocus.bind(Object(s.a)(n));n.onInputBlur=n.onInputBlur.bind(Object(s.a)(n));return n}Object(r.a)(t,[{key:"componentDidMount",value:function(){this.focusEditor()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){!e.disabled&&this.props.disabled&&this.focusEditor()}},{key:"focusEditor",value:function(){var e=this.editorRef;e&&setTimeout(function(){e.focus()})}},{key:"getMessageText",value:function(){return this.state.messageText}},{key:"messageTextIsWithinLimit",value:function(){return this.getMessageText().length<h.a}},{key:"hasAttachments",value:function(){return this.props.stagedAttachments&&this.props.stagedAttachments.size}},{key:"attachmentsAreValid",value:function(){return!this.props.stagedAttachments||this.props.stagedAttachments.every(p.isUploadCompleted)}},{key:"canUploadAttachment",value:function(){return!this.props.hasUnansweredQuickReplyMessage&&(!this.props.stagedAttachments||!this.props.stagedAttachments.size)}},{key:"messageContentsAreValid",value:function(){var e=this.getMessageText()&&""!==this.getMessageText().trim();return this.messageTextIsWithinLimit()&&this.attachmentsAreValid()&&(e||this.hasAttachments())}},{key:"canPublish",value:function(){var e=this.props,t=e.disabled,n=e.networkOffline,a=e.disablePublish;return this.messageContentsAreValid()&&!n&&!t&&!a}},{key:"handleChange",value:function(e){var t=this.props,n=t.chatInputChanged,a=t.shouldSendInputStagingEvent,r=t.inputStaging,i=e.target.value;this.setState({messageText:i});a&&!i&&r(i,!0);""!==i&&n(i)}},{key:"handleKeyDown",value:function(e){if(e.keyCode===ye&&!1===e.shiftKey){this.handlePublish();e.preventDefault();e.stopPropagation();return!1}return!0}},{key:"handlePublish",value:function(){var e=this.props.inputStaging;if(this.canPublish()){var t=this.getMessageText();this.props.publishMessage({text:t,richText:"<div>"+l.a.link(Object(je.a)(t),{stripPrefix:!1})+"</div>"});this.setState({messageText:""});e("",!0);var n=this.props,a=n.mobile,r=n.isOnFocus;if(a&&Object(me.isIOSDevice)()&&!r)return;this.focusEditor()}}},{key:"getValidationMessage",value:function(){return this.messageTextIsWithinLimit()?"":b.a.text("conversations-visitor-ui.chatTextArea.validationMessage")}},{key:"setEditorRef",value:function(e){var t=x.a.findDOMNode(e);this.editorRef=t}},{key:"handleSelectAttachmentFiles",value:function(e){var t=e.files;this.props.onSelectAttachmentFiles({files:t});this.focusEditor()}},{key:"onInputFocus",value:function(){var e=this.props,t=e.toggleOnAndOffInputFocus;e.disabled||t(!0)}},{key:"onInputBlur",value:function(){(0,this.props.toggleOnAndOffInputFocus)(!1)}},{key:"renderTextInput",value:function(){return y.a.createElement(pe,{disabled:this.props.disabled||this.props.networkOffline,error:!this.messageTextIsWithinLimit(),messageText:this.state.messageText,onChange:this.handleChange,onKeyDown:this.handleKeyDown,showQuickReplyPlaceholder:this.props.showQuickReplyPlaceholder,setEditorRef:this.setEditorRef,showingHsBranding:this.props.showingHsBranding,validationMessage:this.getValidationMessage(),onInputFocus:this.onInputFocus,onInputBlur:this.onInputBlur})}},{key:"renderFileUploads",value:function(){var e=this;return this.props.stagedAttachments&&this.props.stagedAttachments.size?y.a.createElement(Ce,{className:"m-bottom-2"+(this.props.showingHsBranding?" m-top-2":"")},this.props.stagedAttachments.map(function(t){return y.a.createElement(S.a,{key:Object(d.getLocalId)(t),attachment:t,onRemove:function(){e.props.onRemoveAttachment({attachment:t})}})})):null}},{key:"render",value:function(){var e=Object(fe.c)(this.props.coloring)?null:Object(fe.a)(this.props.coloring),t=!this.canPublish();return y.a.createElement(R,{inputToRender:this.renderTextInput,fileUploads:this.renderFileUploads,showingHsBranding:this.props.showingHsBranding},y.a.createElement(y.a.Fragment,null,this.props.supportsAttachments&&!this.props.shouldDisableAttachment?y.a.createElement("div",{className:this.props.mobile?"m-right-3":""},y.a.createElement(he.a,{accept:this.props.fileTypes,color:e,disabled:!this.canUploadAttachment(),mobile:this.props.mobile,onClick:this.props.onAttachmentButtonClick,onSelectFiles:this.handleSelectAttachmentFiles,maxAttachmentFileSize:this.props.maxAttachmentFileSize})):null,y.a.createElement(ge.a,{className:"chat-send-button","data-test-id":"chat-send-button",disabled:t,shape:"circle",onClick:this.handlePublish,use:"transparent-on-background","aria-label":b.a.text("conversations-visitor-ui.visitorExperienceAriaLabels.send")},y.a.createElement(Oe.a,{icon:y.a.createElement(ve.a,null)}))))}}]);return t}(j.Component);xe.propTypes={chatInputChanged:O.a.func.isRequired,coloring:Object(m.a)("ColoringRecord"),disablePublish:O.a.bool.isRequired,disabled:O.a.bool.isRequired,fileTypes:O.a.arrayOf(O.a.string).isRequired,hasUnansweredQuickReplyMessage:O.a.bool.isRequired,inputStaging:O.a.func.isRequired,isOnFocus:O.a.bool,maxAttachmentFileSize:O.a.number.isRequired,mobile:O.a.bool,networkOffline:O.a.bool.isRequired,onAttachmentButtonClick:O.a.func,onRemoveAttachment:O.a.func.isRequired,onSelectAttachmentFiles:O.a.func.isRequired,publishMessage:O.a.func.isRequired,shouldDisableAttachment:O.a.bool,shouldSendInputStagingEvent:O.a.bool.isRequired,showQuickReplyPlaceholder:O.a.bool.isRequired,showingHsBranding:O.a.bool,stagedAttachments:O.a.instanceOf(g.List),stagedMessageEditorText:O.a.string,supportsAttachments:O.a.bool.isRequired,toggleOnAndOffInputFocus:O.a.func};xe.displayName="MessageEditor";xe.defaultProps={hasUnansweredQuickReplyMessage:!1,isThreadStarted:!0,disablePublish:!1,onRemoveAttachment:function(){},onSelectAttachmentFiles:function(){},createNewThread:function(){},supportsAttachments:!1,fileTypes:be.a};t.a=xe},FSCz:function(e,t,n){"use strict";n.r(t);n.d(t,"sendVisitorEmailAddress",function(){return r});var a=n("kMAx");function r(e){var t=e.threadId,n=e.email,r=e.sessionId,i=e.hubspotUtk;return a.a.post("livechat-public/v1/visitor/public",{query:{threadId:t,email:n,sessionId:r,hubspotUtk:i}})}},GAhl:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var a=n("ib5I"),r=n("d04J"),i=n("t1l6"),o=n("KGLF"),s=n("+UNX"),c=n("nmWS"),u=Object(a.a)(o.historyDataForThread,function(e){if(!e||!Object(s.hasMessages)(e))return!1;var t=Object(c.a)(e).filter(function(e){return Object(i.isChatMessage)(e)||Object(i.isInitialMessage)(e)}).last();return Boolean(Object(r.a)(t))})},Gbx4:function(e,t,n){"use strict";n.d(t,"a",function(){return C});var a=n("rkDb"),r=n("or3H"),i=n("BvgU"),o=n("QWZm"),s=n("ivel"),c=n("tkdj"),u=n("+Tc3"),l=n("4scq"),d=n("Z0PP"),p=n("cep6"),m=n("7+AW"),h=n("B948"),f=n("tLtU"),b=n("TUZh"),g=n("L6i2"),v=n("2NeP"),O=n("WQ6g"),j=n("O3Qn"),y=n("08NH");function C(e){var t=e.text,n=e.richText,C=e.quickReply,x=e.fileAttachment;return function(e,k){var E=Object(p.a)(k()),T=Object(u.isPersistedThread)(E),I=Object(a.getChannelName)(E),w=Object(a.getThreadId)(E),R=Object(l.getMessagesUtk)(k()),S=Object(g.getMessagesPageUri)(k()),A=Object(h.buildVisitorCommonMessage)({clientType:r.a,fileAttachment:x,quickReply:C,richText:n,senderId:R,text:t,thread:E});e(Object(d.a)(w));e(Object(m.trackSendMessage)({threadId:w}));if(!T){e(Object(f.stageMessageOnStubbedThread)(A));return e(Object(o.createNewThread)())}if(Object(v.shouldRecordUrlContextUpdate)(k(),{threadId:w})){e(Object(c.publishMessage)({channel:I,message:Object(b.a)(S),threadId:w})).done();e(Object(O.a)({threadId:w,currentUrl:S}))}Object(y.getMostRecentMessageIsEmailPrompt)(k())&&i.a.test(t)&&e(Object(j.sendVisitorEmailAddress)({email:t,consentToCommunicate:!1,threadId:w}));return e(Object(c.publishMessage)({channel:I,message:A,threadId:w})).then(function(){return e(Object(s.applyGdprConsent)())})}}},Gcf9:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n("BjQQ"),r=Object(a.a)("resolvedAttachments")},HmhQ:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n("CRij"),r=n("2n97"),i=Object(a.createAction)(r.J,function(e){return{widgetInputIsOnFocus:e}});function o(e){return function(t){t(i(e))}}},HopT:function(e,t,n){var a=n("d9q4"),r=n("UI7R"),i=n("y3MR"),o=n("cXje"),s=/[\\^$.*+?()[\]{}|]/g,c=/^\[object .+?Constructor\]$/,u=Function.prototype,l=Object.prototype,d=u.toString,p=l.hasOwnProperty,m=RegExp("^"+d.call(p).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function h(e){return!(!i(e)||r(e))&&(a(e)?m:c).test(o(e))}e.exports=h},I04N:function(e,t,n){var a=n("6uUH");function r(e,t){for(var n=e.length;n--;)if(a(e[n][0],t))return n;return-1}e.exports=r},I3fj:function(e,t,n){"use strict";n("E7sj");var a=n("xq+X"),r=(n("dQWp"),["avatar"]),i=["data"],o=["email"],s=["firstName"],c=["id"],u=["lastName"],l=["senderType"],d=["status"];n.d(t,"a",function(){return p});n.d(t,"c",function(){return m});n.d(t,"d",function(){return h});n.d(t,"e",function(){return f});n.d(t,"f",function(){return b});n.d(t,"g",function(){return g});n.d(t,"b",function(){return v});n.d(t,"h",function(){return O});var p=Object(a.a)(r),m=Object(a.a)(o),h=Object(a.a)(s),f=Object(a.a)(c),b=Object(a.a)(u),g=Object(a.a)(l),v=Object(a.a)(i),O=Object(a.a)(d)},InPC:function(e,t,n){"use strict";n.d(t,"a",function(){return i});n.d(t,"b",function(){return o});var a=n("CRij"),r=n("Dho5"),i=Object(a.createAction)(r.g);function o(){return function(e){e(i())}}},K7wl:function(e,t,n){"use strict";var a=n("XpET"),r=n("VfuR"),i=n.n(r),o=n("AXPb"),s=n.n(o);t.a=s.a.mapOf(s.a.recordOf({data:Object(a.a)("Sender"),status:i.a.string.isRequired}),Object(a.a)("SenderLocator"))},KOwh:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var a=n("M2Ie"),r=n("wJy0"),i=n("oQsv"),o=n("A9rd"),s=n("yIGR"),c=n("QYOI"),u=n("ib5I"),l=n("6C5m"),d=n("VT1R"),p=n("2a3n"),m=n("8fPJ"),h=Object(u.a)([d.getResponders],function(e){return Object(s.getEntries)(e).reduce(function(e,t,n){var s,c=Object(o.a)(t);return Object(l.a)([Object(m.a)(n)],Object(r.a)((s={},Object(a.a)(s,i.a,c?Object(p.a)(c):null),Object(a.a)(s,i.c,Object(o.c)(t)),s)),e)},Object(c.Map)())})},L1d0:function(e,t,n){"use strict";var a=n("Ktcs"),r=n.n(a),i=function(e){return r.a.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 24 24"},e),r.a.createElement("defs",null,r.a.createElement("path",{d:"M21.158.222L2.568 11.815c-.8.498-.749 1.215.113 1.591l4.406 1.923 10.395-9.903c1.377-1.296 1.569-1.119.426.395L8.254 18.215v4.927c0 .953.5 1.141 1.113.418l4.473-5.282 5.055 2.207c.861.376 1.643-.092 1.736-1.04l1.81-18.404c.094-.949-.484-1.317-1.283-.819",id:"send__a"})),r.a.createElement("use",{xlinkHref:"#send__a",fillRule:"evenodd"}))};i.displayName="SVGSend";t.a=i},"L1i+":function(e,t,n){"use strict";"use es6";function a(){var e,t;return{promise:new Promise(function(n,a){t=n;e=a}),reject:e,resolve:t}}t.a=a},LI65:function(e,t,n){"use strict";n.r(t);n.d(t,"fileExceedsSizeLimit",function(){return r});var a=n("ZyKU"),r=function(e){return e.size>a.b}},LKvj:function(e,t,n){"use strict";n.d(t,"b",function(){return u});var a,r=n("M2Ie"),i=n("3I2d"),o=n("Ktcs"),s=n("XCGw"),c=n("YxZp"),u=(a={},Object(r.a)(a,s.b,Object(c.a)()),Object(r.a)(a,s.a,Object(c.a)()),Object(r.a)(a,s.c,Object(c.a)({backgroundColor:i.c,borderColor:i.d,alignment:"flex-end"})),a),l=Object(o.createContext)(u);t.a=l},"M+r2":function(e,t,n){"use strict";n.r(t);n.d(t,"fetchAttachmentUploadUrlClient",function(){return i});var a=n("kMAx"),r="livechat-public/v1/attachment/upload-url",i=function(e){var t=e.sessionId,n=e.threadId;return a.a.get(r,{query:{sessionId:t,threadId:n}})}},NFcK:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n("+GUp"),r=n("t1l6"),i=function(e){return Object(r.isTypingMessage)(e)&&Object(a.isFromVisitor)(e)}},Njlw:function(e,t,n){"use strict";n.r(t);n.d(t,"generateIdForFile",function(){return a});var a=function(e){var t=e.file,n=e.timestamp;return t.name+"-"+n}},O3Qn:function(e,t,n){"use strict";n.r(t);n.d(t,"sendVisitorEmailAddressRequested",function(){return m});n.d(t,"sendVisitorEmailAddressFailed",function(){return h});n.d(t,"sendVisitorEmailAddressSucceeded",function(){return f});n.d(t,"sendVisitorEmailAddress",function(){return b});var a=n("CRij"),r=n("xOvp"),i=n("2n97"),o=n("fS1x"),s=n("FSCz"),c=n("Wgd9"),u=n("nncj"),l=n("kJ+w"),d=n("/A3W"),p=n("rkDb"),m=Object(a.createAction)(i.B,function(e){return{email:e}}),h=Object(a.createAction)(i.C,function(e){return{error:e}}),f=Object(a.createAction)(i.D,function(e){return{email:e}});function b(e){var t=e.consentToCommunicate,n=void 0!==t&&t,a=e.email,i=e.threadId;return function(e,t){e(m(a));var b=Object(l.getThreadByThreadId)(t(),{threadId:i}),g=Object(p.getChannelName)(b),v=Object(r.getSessionId)(t()),O=Object(d.getHubspotUtk)(t()),j=function(){e(f(a));e(Object(o.default)({channel:g,email:a,threadId:i}));n&&e(Object(c.d)(n));e(Object(u.trackInteraction)("widget-interaction",{action:"submit email"}));return{error:null}},y=function(t){e(h(t));return{error:t}};return s.sendVisitorEmailAddress({threadId:i,email:a,sessionId:v,hubspotUtk:O}).then(j,y)}}},O7fF:function(e,t,n){"use strict";n.d(t,"b",function(){return a});n.d(t,"e",function(){return r});n.d(t,"a",function(){return i});n.d(t,"d",function(){return o});n.d(t,"c",function(){return s});var a="NETWORK_OFFLINE",r="THREAD_HISTORY_FAILED",i="CREATE_NEW_THREAD_FAILED",o="SUBSCRIPTIONS_FAILED",s="PUBSUB_FAILED"},P3KS:function(e,t,n){"use strict";n.r(t);n.d(t,"createVisitorThread",function(){return o});var a=n("nDpY"),r=n.n(a),i=n("kMAx");function o(e){var t=e.sessionId,n=e.messageId,a=e.hubspotUtk,o=e.messagesPageUri,s=e.visitorThreadInitialHistory;return i.a.post("livechat-public/v1/thread/visitor",{query:{sessionId:t,welcomeMessageId:n,hubspotUtk:a,portalId:r.a.get(),expectedResponseType:"WRAPPER_V2"},data:{visitorThreadInitialHistory:s},headers:{"X-HubSpot-Messages-Uri":o}})}},PHMb:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n("wjj1"),r=n("Wjp6"),i=n("7ecw"),o=function(e){var t=e.thread;return function(e){e(Object(a.postExternalApiEvent)({eventType:r.c,payload:{conversation:Object(i.serializeThreadForExternalEvent)(t)}}))}}},PI7G:function(e,t,n){"use strict";n.r(t);var a=n("22QI"),r=n("QO1+"),i=n("7Ypx"),o=n("iRI7"),s=n("t1l6"),c=n("E4X6"),u=n("Dogn"),l=function(e){Object(c.threadHistoryInvariant)(e);return Object(o.a)(u.b,Object(i.a)(s.isConversationalMessage),function(e){return e&&e.last()})(e)},d=n("9A/W");n.d(t,"buildCreatedThread",function(){return p});var p=function(e){var t=e.channelDetails,n=e.messagesPageUri,i=e.threadHistory,o=e.threadId;return Object(d.a)({channelDetails:t,currentUrl:n,source:r.a,status:a.a.STARTED,threadId:o}).set("latestMessage",l(i))}},PRHD:function(e,t,n){"use strict";var a=n("ib5I"),r=n("D1/i"),i=n("b5Ei"),o=Object(r.a)(i.a),s=n("BjQQ"),c=n("lPZn"),u=n("zFd5"),l=n("6uLX"),d=n("0v5j");n.d(t,"a",function(){return p});var p=Object(a.a)([d.a,l.a,u.a],function(e,t,n){var a=Object(c.getUserId)(n);return Object(s.a)(a,e)?n:t&&t.find(function(t){var n=Object(c.getUserId)(t);return o(n,e)})})},Q0d5:function(e,t,n){"use strict";var a=n("Ktcs"),r=n.n(a),i=function(e){return r.a.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 24 24"},e),r.a.createElement("defs",null,r.a.createElement("path",{d:"M16.233 8.738c.564-.502.564-1.317 0-1.818-.564-.503-1.477-.503-2.04 0l-7.128 6.35c-1.374 1.223-1.374 3.213 0 4.436.686.612 1.587.918 2.49.918.9 0 1.802-.306 2.489-.918l10.318-9.193h.001c2.183-1.946 2.183-5.11 0-7.055-2.181-1.944-5.733-1.944-7.918 0l-12.2 10.87c-2.993 2.667-2.993 7.006 0 9.673C3.742 23.334 5.707 24 7.673 24c1.965 0 3.93-.666 5.427-2l9.01-8.027c.563-.501.563-1.316 0-1.818-.564-.503-1.478-.503-2.042 0l-9.009 8.027c-1.867 1.664-4.906 1.663-6.773 0-1.867-1.664-1.867-4.37 0-6.035l12.2-10.869c1.058-.944 2.779-.943 3.836-.001s1.057 2.475 0 3.417h-.002l-10.317 9.194c-.249.22-.651.22-.897 0-.248-.22-.248-.58 0-.8l7.127-6.35z",id:"attach__a"})),r.a.createElement("use",{xlinkHref:"#attach__a",fillRule:"evenodd"}))};i.displayName="SVGAttach";t.a=i},QWT7:function(e,t,n){var a=n("cbPM");function r(e,t){var n=e.__data__;return a(t)?n["string"==typeof t?"string":"hash"]:n.map}e.exports=r},QWZm:function(e,t,n){"use strict";n.r(t);n.d(t,"createNewThread",function(){return w});var a=n("0z5O"),r=n("CRij"),i=n("QYOI"),o=n("BjQQ"),s=n("ED6b"),c=n("Jtvd"),u=n("ZjIF"),l=n("L6i2"),d=n("xOvp"),p=n("PI7G"),m=n("9VMc"),h=n("nncj"),f=n("/A3W"),b=n("4scq"),g=n("9H+j"),v=n("P3KS"),O=n("VfRw"),j=n("PHMb"),y=n("0UrN"),C=n("qeXV"),x=n("gmfO"),k=n("eBLR"),E=Object(r.createAction)(O.a.STARTED),T=Object(r.createAction)(O.a.SUCCEEDED),I=Object(r.createAction)(O.a.FAILED);function w(){return function(e,t){var n=Object(d.getSessionId)(t()),r=Object(u.getMessageId)(t()),O=Object(l.getMessagesPageUri)(t()),w=Object(f.getHubspotUtk)(t()),R=Object(C.getLatestWidgetData)(t());e(E());return Object(v.createVisitorThread)({sessionId:n,hubspotUtk:w,messageId:r,messagesPageUri:O,visitorThreadInitialHistory:Object(m.getVisitorInitialThreadHistory)(t()),widgetData:R}).then(function(n){var r=n.channelDetails,u=n.sessionId,l=n.id,d=n.history,m=new a.a(Object.assign({},d,{attachments:Object(i.Map)(Object(o.a)("attachments",d))})),f=Object(p.buildCreatedThread)({channelDetails:r,messagesPageUri:O,threadId:l,threadHistory:m});e(Object(g.updateSessionId)(u));e(Object(h.trackInteraction)("start-conversation",{action:"new conversation started",threadId:l}));e(T({channel:Object(y.a)(r),threadId:l,conversation:f,threadHistory:m}));e(Object(s.addAvailabilityMessage)({channel:Object(y.a)(r),threadId:l}));e(Object(j.a)({thread:f}));Object(x.gdprCookieConsentOnExitIntentEnabled)(t(),R)||Object(k.getIsPrivateLoad)(R)||e(Object(c.handleStoreMessagesCookie)(Object(b.getMessagesUtk)(t())))}).catch(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e(I({status:t.status,message:t.message,error:t}))})}}},Qirt:function(e,t,n){"use strict";var a=n("ib5I"),r=n("qeXV"),i=n("30X/"),o=n("Uz3j"),s=n("BjQQ"),c=Object(s.a)("cookieBannerOnExitVisible"),u=n("Yuqq"),l=n("gmfO");n.d(t,"a",function(){return d});var d=Object(a.a)([r.getLatestWidgetData,i.a,u.getAPIEnableWidgetCookieBanner,c],function(e,t,n,a){var r=Object(l.gdprCookieConsentOnWidgetLoadEnabled)(e);return!(!(n||r)&&!a)&&Object(o.getIsFirstVisitorSession)(t)})},Qu2R:function(e,t,n){"use strict";var a=n("1z1z"),r=n("nncj"),i=n("T7hB"),o=function(e){switch(e){case i.a:return"size limit exceeded";default:return null}},s=n("+rg3"),c=n("rkDb"),u=n("sToE"),l=n("rvWB");n.d(t,"a",function(){return d});var d=function(e){var t=e.file,n=e.thread;return function(e){var i=Object(c.getThreadId)(n);return Object(u.validateAttachmentFile)(t).then(function(){var n=new a.a({file:t,progress:0});return e(Object(l.uploadAttachment)({attachment:n,threadId:i}))}).catch(function(t){e(Object(s.attachmentError)(t,i));e(Object(r.trackInteraction)("failed-to-attach-file",{action:"failed to attach file","failure-type":o(t)}))})}}},QzTW:function(e,t,n){var a=n("QWT7");function r(e){var t=a(this,e).delete(e);this.size-=t?1:0;return t}e.exports=r},RPTv:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n("BjQQ"),r=n("ib5I"),i=n("qeXV"),o=Object(r.a)(i.getLatestWidgetData,Object(a.a)("showingHsBranding"))},"RSm/":function(e,t,n){var a=n("I04N");function r(e){var t=this.__data__,n=a(t,e);return n<0?void 0:t[n][1]}e.exports=r},RWBV:function(e,t){function n(){this.__data__=[];this.size=0}e.exports=n},SWAX:function(e,t,n){"use strict";n.r(t);var a=n("a4p2"),r=n("19qb"),i=n("ib5I"),o=n("go3a"),s=n("qeXV"),c=Object(i.a)([s.getLatestWidgetData],function(e){return Object(o.gdprConsentToProcessEnabled)(e)}),u=n("Qirt"),l=n("3+Oy"),d=n("Zqdz"),p=n("cep6"),m=n("RPTv"),h=n("ZWy4"),f=n("8cQJ"),b=n("HmhQ");n.d(t,"WEBPACK_3_FORCE_MODULE_IMPORT",function(){return O});var g=function(e){return{shouldShowMeetingsLink:Object(f.a)(e),isThreadStarted:Object(a.a)(Object(p.a)(e)),requiresExplicitConsentToProcess:Object(d.a)(e),showingGdprProcess:c(e)&&!Object(l.a)(e),renderCookieConsentPrompt:Object(u.a)(e),showingHsBranding:Object(m.a)(e)}},v={toggleOnAndOffInputFocus:b.a},O=(t.default=Object(r.connect)(g,v)(h.a),1)},T7hB:function(e,t,n){"use strict";n.d(t,"a",function(){return a});n.d(t,"b",function(){return r});var a="SIZE_LIMIT_EXCEEDED",r="UPLOAD_ERROR"},TGEe:function(e,t,n){"use strict";var a=n("ib5I"),r=n("iRI7"),i=n("LnxI"),o=n("FdJ2"),s=Object(r.a)(i.e,o.getGdprConsentToCommunicateEnabled),c=n("qeXV");n.d(t,"a",function(){return u});var u=Object(a.a)([c.getLatestWidgetData],function(e){return s(e)})},TUZh:function(e,t,n){"use strict";var a=n("M2Ie"),r=n("D3DS"),i=n("Aw1I"),o="ENTRY_URL",s=n("zGuL");n.d(t,"a",function(){return c});function c(e){var t;return new r.a({contexts:Object(a.a)({},o,(t={},Object(a.a)(t,i.p,o),Object(a.a)(t,"url",e),t)),id:Object(s.generateUuid)(),timestamp:Date.now()})}},Ta4D:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var a=n("QYOI"),r=n("ib5I"),i=n("BjQQ"),o=n("V/zO"),s=n("lBOe"),c=Object(r.a)([s.a,o.getCurrentThreadId],function(e,t){var n=Object(i.a)(t,e);return n?n.toList():Object(a.List)()})},TlSS:function(e,t,n){"use strict";var a=n("+FUr"),r=n("LjY7"),i=n("woGC"),o=n("YZ/j"),s=n("MEIQ"),c=n("VfuR"),u=n.n(c),l=n("Ktcs"),d=n.n(l),p=n("E7sj"),m=n.n(p),h=n("rsRY"),f=n("064J"),b=["PNG","GIF","JPEG","JPG"],g=function(e){var t=e.name.split("."),n=t[t.length-1]||"";return-1!==b.indexOf(n.toUpperCase())},v=n("mnU7"),O=function(e){var t=Object(v.getFile)(e),n=Object(v.getUploadProgress)(e);return t&&n?n/100*t.size:0},j=n("q5yn"),y=n("5F1J"),C=n("AJY7"),x=n("lbaU"),k=function(e){Object(s.a)(t,e);function t(e){var n;Object(a.a)(this,t);(n=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={imageDataUrl:""};return n}Object(r.a)(t,[{key:"componentDidMount",value:function(){this.processImageFile(this.props.imageFile)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.imageFile!==this.props.imageFile&&this.processImageFile(e.imageFile)}},{key:"shouldComponentUpdate",value:function(e,t){return t.imageDataUrl!==this.state.imageDataUrl}},{key:"processImageFile",value:function(e){var t=this,n=new FileReader;n.addEventListener("load",function(){t.setState({imageDataUrl:n.result})});n.readAsDataURL(e)}},{key:"render",value:function(){return d.a.createElement(x.a,{src:this.state.imageDataUrl})}}]);return t}(d.a.Component);k.displayName="ImageAttachmentPreview";k.propTypes={imageFile:u.a.instanceOf(File).isRequired};var E=k,T=n("XpET"),I=n("kg2J"),w=n("CbkJ"),R=n("25lx"),S=function(e){Object(s.a)(t,e);function t(){Object(a.a)(this,t);return Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}Object(r.a)(t,[{key:"customFilePreview",value:function(){var e=this.props.attachment,t=Object(v.getFile)(e);if(g(t))return d.a.createElement(E,{imageFile:t})}},{key:"fileInfo",value:function(){return Object(C.isUploadCompleted)(this.props.attachment)?d.a.createElement(f.a,{value:Object(y.getFileSize)(this.props.attachment)}):d.a.createElement(h.a,{message:"conversations-visitor-ui.stagedAttachment.uploadProgress",options:{uploadedBytes:m.a.formatSize(O(this.props.attachment),{precision:2,strip_insignificant_zeroes:!0}),totalBytes:m.a.formatSize(Object(y.getFileSize)(this.props.attachment))}})}},{key:"renderProgress",value:function(){return Object(C.isUploadCompleted)(this.props.attachment)?null:d.a.createElement(I.a,{value:Object(v.getUploadProgress)(this.props.attachment)})}},{key:"render",value:function(){return d.a.createElement(w.a,{processing:!Object(C.isUploadCompleted)(this.props.attachment),fileName:Object(j.getFileName)(this.props.attachment),fileInfo:this.fileInfo(),preview:this.customFilePreview(),style:{minWidth:220}},d.a.createElement(R.a,{size:"xs",onClick:this.props.onRemove}),this.renderProgress())}}]);return t}(d.a.Component);S.displayName="FileUpload";S.propTypes={attachment:Object(T.a)("FileUploadRecord").isRequired,onRemove:u.a.func.isRequired};t.a=S},UI7R:function(e,t,n){var a,r=n("YaGm"),i=(a=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||""))?"Symbol(src)_1."+a:"";function o(e){return!!i&&i in e}e.exports=o},W3K0:function(e,t,n){"use strict";n.r(t);n.d(t,"createFormDataForAttachment",function(){return a});var a=function(e){var t=e.file,n=new FormData;n.append("file",t);return n}},WQ6g:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n("CRij"),r=n("e+cU"),i=Object(a.createAction)(r.b,function(e){return{currentUrl:e.currentUrl,threadId:e.threadId}})},Wgd9:function(e,t,n){"use strict";n.d(t,"a",function(){return l});n.d(t,"c",function(){return d});n.d(t,"b",function(){return p});n.d(t,"d",function(){return m});var a=n("CRij"),r=n("Dho5"),i=n("mluK"),o=n("9H+j"),s=n("xOvp"),c=n("bz7q"),u=n("/A3W"),l=Object(a.createAction)(r.a),d=Object(a.createAction)(r.c),p=Object(a.createAction)(r.b,function(e){return{error:e}});function m(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?function(e,t){var n=Object(s.getSessionId)(t()),a=Object(c.getSelectedThreadId)(t()),r=Object(u.getHubspotUtk)(t());e(l());var m=function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).sessionId;e(Object(o.updateSessionId)(t));e(d())},h=function(t){e(p(t))};Object(i.sendConsentToCommunicate)({sessionId:n,hubspotUtk:r,threadId:a}).then(m,h).done()}:null}},XCGw:function(e,t,n){"use strict";n.d(t,"a",function(){return a});n.d(t,"b",function(){return r});n.d(t,"c",function(){return i});var a="agent",r="default",i="visitor"},XQVM:function(e,t,n){"use strict";n.r(t);n.d(t,"gdprExplicitConsentRequired",function(){return o});var a=n("iRI7"),r=n("LnxI"),i=n("FdJ2"),o=Object(a.a)(r.e,i.getGdprExplicitConsentRequired)},XuUM:function(e,t,n){var a=n("igt9"),r=n("00xA"),i=n("9J2q");function o(){this.size=0;this.__data__={hash:new a,map:new(i||r),string:new a}}e.exports=o},YaGm:function(e,t,n){var a=n("QN3r")["__core-js_shared__"];e.exports=a},YxZp:function(e,t,n){"use strict";var a=n("5Utl"),r=n("3I2d"),i=n("QYOI"),o=n("mP5C"),s=Object(i.Record)({alignItems:"flex-start",avatarWidth:"32px",backgroundColor:r.l,borderColor:r.a,borderRadius:"4px",borderWidth:"1px",messageSpacing:"8px",textColor:r.k,fileAttachmentTheme:Object(a.a)(),quickReplyTheme:Object(o.a)(),widgetAccent:r.k},"Theme");t.a=s},Z0PP:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n("CRij"),r=n("bDpH"),i=Object(a.createAction)(r.e,function(e){return{threadId:e}})},ZWy4:function(e,t,n){"use strict";var a=n("+FUr"),r=n("LjY7"),i=n("woGC"),o=n("YZ/j"),s=n("MEIQ"),c=n("VfuR"),u=n.n(c),l=n("Ktcs"),d=n.n(l),p=n("9f1P"),m=n.n(p),h=n("BBNf"),f=n("gXxc"),b=n("19qb"),g=n("cep6"),v=n("7ij/"),O=n("nncj"),j=n("XpET"),y=n("T7hB"),C=n("O7fF"),x=n("pRQC"),k=n("E7sj"),E=n.n(k),T=n("rsRY"),I=n("vNKw"),w=n("sURU"),R=n("az9m"),S=n("b4vT"),A=m.a.input.withConfig({displayName:"VizExFileButton__FilePickerInput",componentId:"sc-1p4t8gi-0"})(["display:none;"]),M=function(e){var t=e.children,n=e.multiple,a=e.accept,r=e.onChange,i=e.onClick,o=Object(R.a)(e,["children","multiple","accept","onChange","onClick"]),s=Object(l.useRef)(),c=function(e){s.current.click();Object(S.a)(i,e)};return d.a.createElement(l.Fragment,null,t({onClick:c}),d.a.createElement(A,Object.assign({},o,{ref:s,type:"file",accept:a.join(","),multiple:n,onChange:r})))};M.displayName="VizExFileButton";M.defaultProps={accept:[]};M.propTypes={accept:u.a.arrayOf(u.a.string),children:u.a.func.isRequired,multiple:u.a.bool,onChange:u.a.func,onClick:u.a.func};var P=M,N=function(e){return d.a.createElement(P,{accept:I.a,use:"unstyled",onClick:e.onClick,onChange:e.onChange},function(t){return d.a.createElement(w.a,Object.assign({use:"on-bright"},t),e.children)})};N.displayName="FilePickerLink";N.propTypes={children:u.a.node.isRequired,onChange:u.a.func.isRequired,onClick:u.a.func};var q=N,_=n("ZyKU"),L=n("rkDb"),F=function(e){var t=e.attachmentsError,n=e.dismissAttachmentsError,a=e.selectAttachmentFile,r=e.thread,i=e.trackInteraction,o=function(){n({threadId:Object(L.getThreadId)(r)})},s=function(e){var t=e.target.files;if(t&&t.length){var n=t.item(0);a({file:n,thread:r})}},c=function(){i("retry-attachment-upload",{action:"retry attachment upload"})},u=function(){switch(t){case y.a:return d.a.createElement(T.a,{message:"cvVisitorUIAttachments.errors.fileSizeExceeded",options:{maxSize:E.a.formatSize(_.b)}});case y.b:return d.a.createElement(T.a,{message:"cvVisitorUIAttachments.errors.uploadError"});default:return null}}();return d.a.createElement(x.a,{title:u,onClose:o,link:d.a.createElement(q,{onChange:s,onClick:c},d.a.createElement(T.a,{message:"cvVisitorUIAttachments.tryAgain"}))})};F.displayName="AttachmentErrorAlerts";F.propTypes={attachmentsError:u.a.oneOf([y.a,y.b]),dismissAttachmentsError:u.a.func.isRequired,selectAttachmentFile:u.a.func.isRequired,thread:Object(j.a)("Thread").isRequired,trackInteraction:u.a.func.isRequired};var z=F,D=n("aHOs"),B=n("9hgJ"),U=function(e){var t=e.createNewThread,n=e.fetchOlderThreadHistory,a=e.networkError,r=e.startPubSub,i=e.resubscribe,o=Object(l.useState)([]),s=Object(B.a)(o,2),c=s[0],u=s[1],p=function(){u([].concat(Object(D.a)(c),[a]))};if(c.includes(a))return null;var m=function(){switch(a){case C.b:case C.c:case C.d:return d.a.createElement(T.a,{message:"conversations-visitor-ui.network.offline.title"});case C.e:return d.a.createElement(T.a,{message:"conversations-visitor-ui.network.pubSubFailure.title"});case C.a:return d.a.createElement(T.a,{message:"conversations-visitor-ui.network.newThreadFailure.title"});default:return null}}(),h=function(){switch(a){case C.e:return d.a.createElement(w.a,{use:"on-bright",onClick:n},d.a.createElement(T.a,{message:"conversations-visitor-ui.network.pubSubFailure.retry"}));case C.a:return d.a.createElement(w.a,{use:"on-bright",onClick:t},d.a.createElement(T.a,{message:"conversations-visitor-ui.network.pubSubFailure.retry"}));case C.d:return d.a.createElement(w.a,{use:"on-bright",onClick:i},d.a.createElement(T.a,{message:"conversations-visitor-ui.network.pubSubFailure.retry"}));case C.c:return d.a.createElement(w.a,{use:"on-bright",onClick:r},d.a.createElement(T.a,{message:"conversations-visitor-ui.network.pubSubFailure.retry"}));default:return null}}();return d.a.createElement(x.a,{title:m,onClose:p,link:h})};U.displayName="NetworkErrorAlerts";U.propTypes={createNewThread:u.a.func.isRequired,fetchOlderThreadHistory:u.a.func.isRequired,networkError:u.a.oneOf([C.b,C.e,C.a,C.c,C.d]).isRequired,resubscribe:u.a.func.isRequired,startPubSub:u.a.func.isRequired};var Q=U,H=function(e){Object(s.a)(t,e);function t(){Object(a.a)(this,t);return Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.attachmentsError,n=e.createNewThread,a=e.dismissAttachmentsError,r=e.fetchOlderThreadHistory,i=e.networkError,o=e.resubscribe,s=e.selectAttachmentFile,c=e.startPubSub,u=e.thread,l=e.trackInteraction;return t?d.a.createElement(z,{attachmentsError:t,dismissAttachmentsError:a,selectAttachmentFile:s,thread:u,trackInteraction:l}):i?d.a.createElement(Q,{createNewThread:n,fetchOlderThreadHistory:r,networkError:i,resubscribe:o,startPubSub:c}):null}}]);return t}(l.Component);H.displayName="ChatAreaAlertContainer";H.propTypes={attachmentsError:u.a.oneOf([y.a,y.b]),createNewThread:u.a.func.isRequired,dismissAttachmentsError:u.a.func.isRequired,fetchOlderThreadHistory:u.a.func.isRequired,networkError:u.a.oneOf([C.b,C.e,C.a,C.c,C.d]),resubscribe:u.a.func.isRequired,selectAttachmentFile:u.a.func.isRequired,startPubSub:u.a.func.isRequired,thread:Object(j.a)("Thread").isRequired,trackInteraction:u.a.func.isRequired};var V=H,W=n("tRLC"),Y=n("zF3W"),K=n("Qu2R"),G=n("eqno"),X=n("bz7q"),Z=n("xOvp"),J=n("sjvu"),$=n("KGLF"),ee=n("p0mF"),te=n("Dogn"),ne=function(){return function(e,t){var n=t(),a=Object(Z.getSessionId)(n),r=Object(X.getSelectedThreadId)(n);if(null!==r&&r!==J.a){var i=Object(g.a)(n),o=Object($.historyDataForThread)(n,{thread:i}),s=Object(te.c)(o),c=Object(te.d)(o);e(Object(ee.fetchThreadHistory)({offsetOrdinal:s,offsetTimestamp:c,threadId:r,sessionId:a}))}}},ae=n("QWZm"),re=n("LlPi"),ie=function(e,t){var n=t.thread;return{attachmentsError:Object(W.a)(e,{thread:n}),networkError:Object(G.a)(e)}},oe={createNewThread:ae.createNewThread,dismissAttachmentsError:Y.a,fetchOlderThreadHistory:ne,selectAttachmentFile:K.a,trackInteraction:O.trackInteraction,startPubSub:re.startPubSub,resubscribe:v.resubscribe},se=Object(b.connect)(ie,oe)(V),ce=function(e){return{thread:Object(g.a)(e)}},ue=Object(b.connect)(ce)(se),le=n("DHw3"),de=n("InPC"),pe=n("ib5I"),me=n("qeXV"),he=n("LnxI"),fe=Object(pe.a)([me.getLatestWidgetData],function(e){return Object(he.d)(e)}),be=n("Zqdz"),ge=n("t2YF"),ve=n("zC+/"),Oe=n("BjQQ"),je=Object(Oe.a)("gdpr"),ye=Object(pe.a)([je],Object(Oe.a)("consentToProcessError")),Ce=function(e){return{consentToProcessMessage:fe(e),showGdprConsentToProcessButton:Object(be.a)(e),coloring:Object(ve.a)(e),consentToProcessError:ye(e)}},xe={consentToProcess:le.consentToProcess,dismissConsentToProcessError:de.b,trackInteraction:O.trackInteraction},ke=Object(b.connect)(Ce,xe)(ge.a),Ee=n("DyWv"),Te=n("nKzi"),Ie=n("3I2d"),we=n("1GJt"),Re=n("7J8z"),Se=function(e){var t=e.ariaLabel,n=e.children,a=e.onClick,r=e.href;r||(r=void 0);return d.a.createElement(w.a,{theme:Object(we.a)(Object(Re.e)(Ie.m)),onClick:a,href:r,external:!0,"aria-label":t},n)};Se.propTypes={ariaLabel:u.a.string,children:u.a.node.isRequired,href:u.a.string,onClick:u.a.func};Se.defaultProps={href:"",onClick:function(){}};Se.displayName="BrandingLink";var Ae=Se,Me=n("TSck"),Pe=function(e){return d.a.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 24 24"},e),d.a.createElement("defs",null,d.a.createElement("path",{d:"M17 16c-1.38 0-2.5-1.12-2.5-2.5S15.62 11 17 11s2.5 1.12 2.5 2.5S18.38 16 17 16m.906-8.43V4.832c.716-.338 1.218-1.061 1.218-1.9v-.064c0-1.158-.95-2.105-2.11-2.105h-.064c-1.161 0-2.111.947-2.111 2.105v.064c0 .839.503 1.562 1.219 1.9V7.57c-1.067.164-2.042.603-2.846 1.249L5.676 2.97c.05-.191.085-.387.085-.594C5.762 1.067 4.698.001 3.384 0 2.069-.001 1 1.06 1 2.372.998 3.683 2.063 4.748 3.378 4.75c.428 0 .825-.121 1.172-.318l7.413 5.753c-.63.95-1 2.087-1 3.311 0 1.282.406 2.467 1.093 3.443L9.8 19.188c-.178-.053-.363-.091-.56-.091-1.08 0-1.956.874-1.956 1.952 0 1.078.876 1.951 1.956 1.951 1.081 0 1.957-.873 1.957-1.95 0-.196-.038-.381-.091-.559l2.23-2.225c1.012.772 2.273 1.235 3.645 1.235 3.324 0 6.018-2.69 6.018-6.005 0-3.002-2.21-5.482-5.094-5.926",id:"sprocket__a"})),d.a.createElement("use",{xlinkHref:"#sprocket__a",fillRule:"evenodd"}))};Pe.displayName="SVGSprocket";var Ne=Pe,qe=n("DT7G"),_e=n("mdUv"),Le=function(e){Object(s.a)(t,e);function t(){Object(a.a)(this,t);return Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.liveChatHref,n=e.onLinkClick;return d.a.createElement("div",{className:"m-bottom-2 align-center justify-center"},d.a.createElement(Me.a,{theme:Object(we.a)(Object(qe.b)(Ie.m)),icon:d.a.createElement(Ne,null),className:"m-right-1"}),d.a.createElement(_e.a,{use:"help"},d.a.createElement(Te.a,{message:"conversations-visitor-experience-components.chatArea.branding_jsx",elements:{Link:Ae},options:{ariaLabel:E.a.text("conversations-visitor-experience-components.chatArea.brandingAriaLabel"),href:t,onClick:n}})))}}]);return t}(d.a.PureComponent);Le.propTypes={liveChatHref:u.a.string,onLinkClick:u.a.func};Le.displayName="WidgetBranding";var Fe=Le,ze=n("/wcQ"),De=n("yybq"),Be=function(e){return{liveChatHref:Object(ze.a)(e),onLinkClick:De.clickedViralLink}},Ue=Object(b.connect)(Be)(Fe),Qe=n("sNjR"),He=1e3,Ve=m.a.div.withConfig({displayName:"UnifiedThreadView__UnifiedThreadViewWrapper",componentId:"sc-7c4u6b-0"})(["display:flex;flex-direction:column;height:",";"],function(e){return e.shouldShowMeetingsLink?"calc(100% - 44px)":"100%"}),We=function(e){Object(s.a)(t,e);function t(e){var n;Object(a.a)(this,t);(n=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={renderNewThreadPrompt:!e.isThreadStarted};return n}Object(r.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this,n=this.props,a=n.isThreadStarted,r=n.toggleOnAndOffInputFocus,i=e.isThreadStarted;a||a===i||setTimeout(function(){t.setRenderNewThreadPromptTrue();r(!1)},He);a&&this.state.renderNewThreadPrompt&&this.setRenderNewThreadPromptFalse()}},{key:"setRenderNewThreadPromptTrue",value:function(){this.setState({renderNewThreadPrompt:!0})}},{key:"setRenderNewThreadPromptFalse",value:function(){this.setState({renderNewThreadPrompt:!1})}},{key:"renderMessageEditor",value:function(){var e=this.props,t=e.requiresExplicitConsentToProcess,n=e.renderCookieConsentPrompt,a=this.state.renderNewThreadPrompt;return t||n||a?null:d.a.createElement(l.Fragment,null,d.a.createElement(ue,null),d.a.createElement(h.a,null))}},{key:"renderError",value:function(){var e=d.a.createElement(T.a,{message:"conversations-visitor-ui.network.pubSubFailure.title"});return d.a.createElement(x.a,{title:e,onClose:function(){}})}},{key:"render",value:function(){var e=this.props,t=e.shouldShowMeetingsLink,n=e.showingGdprProcess,a=e.showingHsBranding,r=e.renderCookieConsentPrompt,i=this.state.renderNewThreadPrompt;return d.a.createElement(Ve,{shouldShowMeetingsLink:t},d.a.createElement(Qe.a,{renderError:this.renderError,errorLoggingTitle:"ConnectedThreadHistory"},d.a.createElement(f.a,{shouldRenderNewThreadPrompt:i})),r&&d.a.createElement(Ee.a,null),n&&!r&&d.a.createElement(ke,null),this.renderMessageEditor(),a&&d.a.createElement(Ue,null))}}]);return t}(l.PureComponent);We.displayName="UnifiedThreadView";We.propTypes={isThreadStarted:u.a.bool.isRequired,renderCookieConsentPrompt:u.a.bool.isRequired,requiresExplicitConsentToProcess:u.a.bool.isRequired,shouldShowMeetingsLink:u.a.bool.isRequired,showingGdprProcess:u.a.bool.isRequired,showingHsBranding:u.a.bool.isRequired,toggleOnAndOffInputFocus:u.a.func.isRequired};t.a=We},ZjIF:function(e,t,n){"use strict";n.r(t);n.d(t,"getMessageId",function(){return i});var a=n("ib5I"),r=n("qeXV"),i=Object(a.a)([r.getLatestWidgetData],function(e){return e.message.id})},Zqdz:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var a=n("ib5I"),r=n("go3a"),i=n("XQVM"),o=n("qeXV"),s=n("3+Oy"),c=Object(a.a)([o.getLatestWidgetData,s.a],function(e,t){return Object(r.gdprConsentToProcessEnabled)(e)&&!t&&Object(i.gdprExplicitConsentRequired)(e)})},ZyKU:function(e,t,n){"use strict";n.d(t,"a",function(){return a});n.d(t,"b",function(){return r});n.d(t,"c",function(){return i});var a="filemanager/api",r=10485760,i=95},b4vT:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];"function"==typeof e&&e.apply(void 0,n)}},bK42:function(e,t,n){"use strict";n.r(t);n.d(t,"wrapFailedMessage",function(){return c});var a=n("ax+l"),r=n("2S+z"),i=n("/MuR"),o=n("k7Gs"),s=n("D1/i"),c=Object(s.a)(function(e,t){var n=e.threadId,s=e.channel,c=e.allowRetry,u=void 0===c||c;return Object(i.a)(t)&&Object(r.getStatusForCmf)(t)===a.a?Object(o.a)({message:t,threadId:n,channel:s,allowRetry:u}):t})},bTtM:function(e,t,n){"use strict";var a=n("yvRk"),r=n.n(a),i=n("Ktcs"),o=n.n(i),s=n("nRb/");t.a=r()({displayName:"FormattedHTMLMessage",mixins:[s.a],propTypes:s.c,render:function(){this.props.message;var e=Object(s.b)(Object(s.d)(this.props));return o.a.createElement("i18n-string",Object.assign({},e,{dangerouslySetInnerHTML:{__html:this._getValue()}}))}})},bamq:function(e,t,n){"use strict";n.r(t);var a,r=n("QYOI"),i=n("zRU2"),o=n.n(i),s=n("2S+z"),c=function(e,t){return Boolean(t[Object(s.getType)(e)])},u=n("M2Ie"),l=n("bmAq"),d=Object(r.Record)((a={},Object(u.a)(a,l.b,l.a),Object(u.a)(a,"timestamp",null),Object(u.a)(a,"id",null),a),"DateMessage"),p=n("E7sj"),m=n.n(p),h=function(e,t){var n=m.a.moment(Object(s.getTimestamp)(e)),a=m.a.moment(Object(s.getTimestamp)(t));return!n.isSame(a,"day")},f=function(e,t,n){return!(!t&&!n)&&Boolean(Object(s.getTimestamp)(e)&&(!t||h(t,e)))},b=n("28/i");n.d(t,"insertDatesIntoMessageList",function(){return v});var g=o()(d,function(e){return e.id}),v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e.reduce(function(a,r,i){var o=i>0?e.get(i-1):void 0;f(r,o,n)&&c(r,t)&&(a=a.push(g({id:Object(b.a)(r)+"-date",timestamp:Object(s.getTimestamp)(r)})));return a.push(r)},Object(r.List)())}},bmAq:function(e,t,n){"use strict";n.d(t,"b",function(){return a});n.d(t,"a",function(){return r});var a="@type",r="DATE_MESSAGE"},cDXp:function(e,t){e.exports="//static.hsappstatic.net/salesImages/static-1.409/messages/bot-avatar.svg"},cXje:function(e,t){var n=Function.prototype.toString;function a(e){if(null!=e){try{return n.call(e)}catch(e){}try{return e+""}catch(e){}}return""}e.exports=a},cbPM:function(e,t){function n(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}e.exports=n},ce3V:function(e,t,n){var a=n("I04N");function r(e){return a(this.__data__,e)>-1}e.exports=r},d9q4:function(e,t,n){var a=n("XITf"),r=n("y3MR"),i="[object AsyncFunction]",o="[object Function]",s="[object GeneratorFunction]",c="[object Proxy]";function u(e){if(!r(e))return!1;var t=a(e);return t==o||t==s||t==i||t==c}e.exports=u},dIiL:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n("BjQQ"),r=Object(a.a)("currentUrl")},dLcb:function(e,t,n){"use strict";var a=n("9hgJ"),r=n("VfuR"),i=n.n(r),o=n("Ktcs"),s=n.n(o),c=n("9f1P"),u=n.n(c),l=n("+ADX"),d=n("fA4S"),p=n("rsRY"),m=n("3I2d"),h=n("lLpL"),f=n("ZSew"),b=n("mdUv"),g=u.a.div.withConfig({displayName:"ConsentPrompt__Container",componentId:"sc-15mvq40-0"})(["border-top:2px solid ",";display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;padding:12px 24px;"],m.f),v=u()(b.a).withConfig({displayName:"ConsentPrompt__SmallNoParagraphPadding",componentId:"sc-15mvq40-1"})(["display:block;word-break:break-word;word-wrap:break-word;-ms-word-break:break-all;p{margin-bottom:0;}"]),O=u()(d.a).withConfig({displayName:"ConsentPrompt__FullWidthButton",componentId:"sc-15mvq40-2"})(["flex:0 1 100%;"]),j=u.a.div.withConfig({displayName:"ConsentPrompt__FlexWrapper",componentId:"sc-15mvq40-3"})(["display:flex;flex-direction:row;width:100%;margin:12px 0 8px 0;"]),y=function(e){var t=e.message,n=e.onClick,r=e.showButton,i=Object(o.useState)(!1),c=Object(a.a)(i,2),u=c[0],d=c[1],m=function(){n();d(!0)};return s.a.createElement(g,{"data-test-id":"gdpr-consent-prompt"},s.a.createElement(v,{use:"help","data-test-id":"gdpr-consent-text",dangerouslySetInnerHTML:{__html:Object(h.a)(t)}}),s.a.createElement(j,null,r&&s.a.createElement(l.a,{currentState:u?"submitting":"ready",Button:O,"data-test-id":"gdpr-consent-agree-button",onClick:m},s.a.createElement(f.a,null,function(e){return s.a.createElement(p.a,{message:"conversations-visitor-experience-components.buttons.agree",options:{locale:e}})}))))};y.propTypes={message:i.a.string.isRequired,onClick:i.a.func.isRequired,showButton:i.a.bool.isRequired};y.displayName="ConsentPrompt";t.a=y},eqno:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var a=n("ib5I"),r=n("BjQQ"),i=n("O7fF"),o=n("VO0R"),s=n("A9rd"),c=n("9VMc"),u=n("44sD"),l=n("pnsR"),d=function(e){return e.clientData.isPubNubClientConnected},p=Object(r.a)("subscriptions"),m=Object(a.a)([l.a,c.getAsyncStagedThread,p,u.getAsyncPubSubClient,d],function(e,t,n,a,r){if(Object(o.isFailed)(e))return i.e;if(Object(o.isFailed)(t)){var c=Object(s.b)(t),u=c&&418===c.status;if(!c||!u)return i.a}return Object(o.isFailed)(n)?i.d:Object(o.isFailed)(a)?i.c:r?null:i.b})},fA4S:function(e,t,n){"use strict";var a=n("az9m"),r=n("VfuR"),i=n.n(r),o=n("Ktcs"),s=n.n(o),c=n("9f1P"),u=n.n(c),l=n("BGbT"),d=n("3RBx"),p=n("jmj1"),m=n("xL7U"),h=n("c0kh"),f=h.h,b=h.j,g=(h.b,h.a,n("gJFg")),v=function(e){var t=e.theme;switch(e.use){case m.PRIMARY:var n=f(t);return Object(c.css)(["background-color:",";"],Object(g.a)(n,20));case m.SECONDARY:default:var a=f(t);return Object(c.css)(["background-color:",";"],Object(g.a)(a,95))}},O=function(e){var t=e.theme;switch(e.use){case m.PRIMARY:var n=f(t);return Object(c.css)(["background-color:",";"],Object(g.a)(n,-10));case m.SECONDARY:default:var a=f(t);return Object(c.css)(["background-color:",";"],Object(g.a)(a,90))}},j=function(e){var t,n=e.theme,a=e.use,r=e.active,i=e.hover,o=e.disabled,s=e.isSubmitting;if(o&&!s)return Object(c.css)(["background-color:",";border:none;"],Object(h.a)(n));r&&(t=O({theme:n,use:a}));i&&(t=v({theme:n,use:a}));switch(a){case m.PRIMARY:return Object(c.css)(["background-color:",";border:none;",""],f(n),t);case m.SECONDARY:default:return Object(c.css)(["background-color:transparent;border-color:",";",""],f(n),t)}},y=function(e){var t=e.theme,n=e.use,a=e.disabled,r=e.isSubmitting;if(a&&!r)return Object(c.css)(["color:",";"],Object(h.b)(t));switch(n){case m.PRIMARY:return Object(c.css)(["color:",";"],b(t));case m.SECONDARY:default:return Object(c.css)(["color:",";"],f(t))}},C=Object(c.css)(["&:hover{","}&:active{","}"],v,O),x=u.a.button.withConfig({displayName:"VizExButton__AbstractVizExButton",componentId:"sc-1hxibsz-0"})(["flex-shrink:0;border-radius:3px;padding:",";font-size:",";line-height:16px;outline:none;transition:background-color 150ms ease-out;border-style:solid;border-width:1px;cursor:",";user-select:",";text-align:center;"," "," ",";&:focus{outline:0;}"],function(e){var t=e.size;return p.b[t]},function(e){var t=e.size;return p.a[t]},function(e){return e.disabled?"not-allowed":"pointer"},function(e){return e.disabled?"none":null},y,j,function(e){return e.disabled?null:C}),k=u.a.div.withConfig({displayName:"VizExButton__NoSelect",componentId:"sc-1hxibsz-1"})(["user-select:none;"]),E=function(e){var t=e.children,n=e.onClick,r=e.use,i=e.theme,o=e.hover,c=e.active,u=e.disabled,l=Object(a.a)(e,["children","onClick","use","theme","hover","active","disabled"]);return s.a.createElement(x,Object.assign({},l,{theme:i,use:r,onClick:n,hover:o,active:c,disabled:u}),s.a.createElement(k,null,t))};E.displayName="VizExButton";E.propTypes={active:i.a.bool,children:i.a.node,disabled:i.a.bool,hover:i.a.bool,onClick:i.a.func,size:i.a.oneOf(Object.keys(p.c)),theme:d.a,use:i.a.oneOf(Object.values(m))};E.defaultProps={use:m.SECONDARY,disabled:!1,size:l.e};t.a=E},fS1x:function(e,t,n){"use strict";n.r(t);n.d(t,"default",function(){return f});n.d(t,"publishEmailCaptureResponseMessage",function(){return f});var a=n("dQWp"),r=n("LjJW"),i=n("clH5"),o=n("K+6c"),s=n("9nkA"),c=n("8JFU"),u=n("Iv5K"),l=n("pWAE"),d=n("zGuL"),p=n("rkDb"),m=n("ax+l"),h=n("cep6"),f=function(e){var t=e.channel,n=e.email,f=e.threadId;return function(e,b){var g,v=Object(p.getSource)(Object(h.a)(b())),O=u.SYSTEM_SENDER;g=Object(l.isUngatedForPersistedMessages)(b())?new s.a({id:Object(d.generateUuid)(),text:n,sender:{"@type":O},status:{source:v,messageStatus:m.b}}):Object(r.buildUnpublishedMessage)({descriptor:{},metadata:new i.a({email:n}),senderId:o.a,senderType:a.d,threadId:f});e(Object(c.publishMessageToConversation)({channel:t,message:g,threadId:f}))}}},fjDW:function(e,t,n){"use strict";var a=n("az9m"),r=n("Ktcs"),i=n.n(r),o=n("VfuR"),s=n.n(o),c=n("9f1P"),u=n.n(c),l=n("3RBx"),d="default",p="on-dark",m=n("GWyd"),h=n("c0kh"),f=n("FS71"),b=h.a,g=h.b,v=h.g,O=h.h,j=function(){return f.l},y=function(e){var t=e.theme;switch(e.use){case p:return Object(c.css)(["background-color:",";"],j(t));case d:default:return null}},C=function(e){var t=e.theme;return Object(c.css)(["cursor:not-allowed;background-color:",";"],b(t))},x=function(e){var t=e.theme;return Object(c.css)(["color:",";cursor:not-allowed;&::after{color:",";}"],g(t),g(t))},k=u.a.input.withConfig({displayName:"VizExInput__StyledTextInput",componentId:"r1x2l3-0"})(["",";height:100%;width:100%;line-height:22px;font-size:16px;padding-left:10px;padding-right:10px;border:none;border-radius:3px;background:transparent;",";:focus{outline:none;}::placeholder{color:",";}"],m.a,function(e){return e.disabled&&x(e)},function(e){var t=e.theme;return v(t)}),E=u.a.div.withConfig({displayName:"VizExInput__InputContainer",componentId:"r1x2l3-1"})(["height:42px;line-height:22px;font-size:16px;display:flex;flex-direction:row;justify-content:space-between;align-items:center;border:1px solid;border-color:",";background-color:",";:focus-within{border-color:",";}border-radius:3px;"," ",";"],function(e){var t=e.theme;return e.focus?O(t):Object(h.f)(t)},function(e){var t=e.theme;return Object(h.e)(t)},function(e){var t=e.theme;return O(t)},y,function(e){return e.disabled&&C(e)}),T=function(e){var t=e.suffix,n=e.prefix,r=e.disabled,o=e.placeholder,s=e.value,c=e.onChange,u=e.containerStyles,l=e.theme,d=e.use,p=e.focus,m=Object(a.a)(e,["suffix","prefix","disabled","placeholder","value","onChange","containerStyles","theme","use","focus"]);return i.a.createElement(E,{disabled:r,style:u,theme:l,use:d,focus:p,"data-testid":"VizExInput-Container"},n,i.a.createElement(k,Object.assign({"aria-disabled":r,disabled:r,placeholder:o,value:s,onChange:c,theme:l,use:d,"data-testid":"VizExInput-Input"},m)),t)};T.displayName="VizExInput";T.defaultProps={placeholder:""};T.propTypes={containerStyles:s.a.object,disabled:s.a.bool,focus:s.a.bool,onChange:s.a.func,onInput:s.a.func,placeholder:s.a.string,prefix:s.a.node,suffix:s.a.node,theme:l.a,use:s.a.oneOfType([d,p]),value:s.a.string};t.a=T},fwVr:function(e,t,n){var a=n("wzyz")(Object,"create");e.exports=a},"g+7s":function(e,t,n){var a=n("QWT7");function r(e){return a(this,e).has(e)}e.exports=r},gXxc:function(e,t,n){"use strict";var a,r=n("nDpY"),i=n.n(r),o=n("19qb"),s=n("+FUr"),c=n("LjY7"),u=n("woGC"),l=n("YZ/j"),d=n("MEIQ"),p=n("QYOI"),m=n("VfuR"),h=n.n(m),f=n("Ktcs"),b=n.n(f),g=n("9f1P"),v=n.n(g),O=n("2S+z"),j=n("M2Ie"),y=n("3I2d"),C=n("XCGw"),x=n("o5Ko"),k=(a={},Object(j.a)(a,C.b,Object(x.a)()),Object(j.a)(a,C.a,Object(x.a)()),Object(j.a)(a,C.c,Object(x.a)({backgroundColor:y.c,borderColor:y.d})),a),E=Object(f.createContext)(k),T=n("K7wl"),I=n("Aw1I"),w=n("zwQg"),R=function(e,t){return Object(O.getSenderId)(e)===Object(O.getSenderId)(t)&&Object(O.getSenderType)(e)===Object(O.getSenderType)(t)},S=function(e,t){return Object(O.getType)(e)===Object(O.getType)(t)},A=function(e){return function(t,n){var a=Object(O.getTimestamp)(t),r=Object(O.getTimestamp)(n);return Math.abs(a-r)>=e}}(6e4),M=function(e,t){e=Object(w.a)(e)||e;t=Object(w.a)(t)||t;return R(e,t)&&S(e,t)&&!A(e,t)},P=function(e){return Object(w.a)(e)||e},N=n("SRO8"),q=n("H5rY"),_=Object(N.a)(function(e,t){e=P(e);return Object(q.fileAttachmentIdsInMessage)(e).reduce(function(e,n){return t.has(""+n)?e.push(t.get(""+n)):e},Object(p.List)())}),L=n("28/i"),F=n("mqjQ"),z=function(e,t,n,a){var r,i=!t,o=!M(e,t),s=!a&&!M(e,n),c=!n,u=(r={},Object(j.a)(r,F.a,i),Object(j.a)(r,F.b,o),Object(j.a)(r,F.d,s),Object(j.a)(r,F.c,c),r);return Object.keys(u).reduce(function(e,t){return u[t]?e.add(t):e},Object(p.Set)())},D=n("h3zd"),B=n("gwLF"),U=function(e,t){return!Object.keys(e).some(function(n){return"fileAttachments"===n||"positionDescriptors"===n||"senders"===n?!Object(p.is)(e[n],t[n]):e[n]!==t[n]})},Q=Object(f.memo)(function(e){var t=e.fileAttachments,n=e.historyConfig,a=e.message,r=e.portalId,i=e.positionDescriptors,o=e.presentSenderLocators,s=e.senders,c=e.visitorLastReadTimestamp,u=e.lastMessageId,l=Object(j.a)({},B.a,Object(L.a)(a)),d=n[Object(O.getType)(a)];return d?b.a.createElement("div",l,b.a.createElement(d,{fileAttachments:t,message:a,portalId:r,positionDescriptors:i,senders:s,presentSenderLocators:o,visitorLastReadTimestamp:c,lastMessageId:u})):null},U);Q.displayName="MessageHistoryItem";Q.propTypes={fileAttachments:h.a.instanceOf(p.List),historyConfig:h.a.object.isRequired,lastMessageId:h.a.string,message:h.a.instanceOf(p.Record).isRequired,portalId:h.a.number.isRequired,positionDescriptors:D.a.isRequired,presentSenderLocators:h.a.instanceOf(p.Set),senders:T.a,visitorLastReadTimestamp:h.a.number};Q.defaultProps={innerRef:function(){},positionDescriptors:[]};var H=Q,V=v.a.div.withConfig({displayName:"MessageHistory__ReflowElement",componentId:"sc-8u77yf-0"})(["z-index:0;padding-top:4px;padding-left:16px;padding-right:16px;flex-shrink:0;@media screen and (max-width:900px){padding-left:8px;padding-right:8px;}"]),W=function(e){Object(d.a)(t,e);function t(){Object(s.a)(this,t);return Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}Object(c.a)(t,[{key:"getDontIncludeLastInGroup",value:function(e,t){var n=this.props.messages.get(t+2);return!(!n||!M(e,n))}},{key:"renderHistory",value:function(){var e=this,t=this.props,n=t.fileAttachments,a=t.getAdditionalPositionDescriptors,r=t.historyConfig,i=t.lastMessageId,o=t.messages,s=t.portalId,c=t.presentSenderLocators,u=t.senders,l=t.visitorLastReadTimestamp,d=a(o);return o.map(function(t,a){var m,h=a>0?o.get(a-1):void 0,f=o.get(a+1);Object(O.getType)(f)===I.v&&(m=e.getDontIncludeLastInGroup(t,a));var g=_(t,n),v=z(t,h,f,m),j=Object(O.getId)(t);v=v.merge(d.get(j,Object(p.Set)()));return b.a.createElement(H,{historyConfig:r,fileAttachments:g,portalId:s,positionDescriptors:v,key:Object(L.a)(t),message:t,senders:u,presentSenderLocators:c,visitorLastReadTimestamp:l,lastMessageId:i})})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.themeConfig;return b.a.createElement(V,{className:t},b.a.createElement(E.Provider,{value:n},this.renderHistory()))}}]);return t}(b.a.PureComponent);W.displayName="MessageHistory";W.propTypes={className:h.a.string,fileAttachments:h.a.instanceOf(p.Map),getAdditionalPositionDescriptors:h.a.func,historyConfig:h.a.object.isRequired,lastMessageId:h.a.string,messages:h.a.instanceOf(p.List),portalId:h.a.number.isRequired,presentSenderLocators:h.a.instanceOf(p.Set),senders:T.a,themeConfig:h.a.object,visitorLastReadTimestamp:h.a.number};W.defaultProps={getAdditionalPositionDescriptors:function(){return Object(p.Map)()},fileAttachments:Object(p.Map)(),preventAutoscroll:!1,presentSenderLocators:Object(p.Set)(),scrollContainerToBottom:function(){},displayEmailDeleteBanner:!1};var Y=W,K=n("XpET"),G=n("LKvj"),X=Object(f.memo)(function(e){var t=e.themeConfig,n=e.children;return b.a.createElement(G.a.Provider,{value:t},n)});X.displayName="ThemeConfigProvider";X.propTypes={children:h.a.node.isRequired,themeConfig:h.a.objectOf(Object(K.a)("Theme"))};var Z=X,J=n("PhfE").a,$=n("u70c"),ee=n("VO0R"),te=n("xOvp"),ne=n("p0mF"),ae=n("znLu"),re=n("6uLn"),ie=n("pnsR"),oe=n("V/zO"),se=n("Pett"),ce=function(e){var t=Object(ie.a)(e);return{isLoadingHistory:Object(ee.isStarted)(t),loadingHistoryFailed:Object(ee.isFailed)(t),sessionId:Object(te.getSessionId)(e),threadHistory:Object(re.a)(e),threadId:Object(oe.getCurrentThreadId)(e),isOnFocus:Object(se.a)(e)}},ue={fetchThreadHistory:ne.fetchThreadHistory},le=Object(o.connect)(ce,ue)(ae.a),de=n("JeR6"),pe=Object(p.Record)({tileBackgroundColor:"rgba(255, 255, 255, 0.5)"},"FileAttachmentTheme"),me=n("mP5C"),he=n("YxZp"),fe=pe({tileBackgroundColor:y.j}),be=function(e){var t,n=e.coloring;return t={},Object(j.a)(t,C.b,Object(he.a)({borderRadius:"0px 8px 8px 8px",borderWidth:"0px",fileAttachmentTheme:fe})),Object(j.a)(t,C.a,Object(he.a)({borderRadius:"0px 8px 8px 8px",borderWidth:"0px",fileAttachmentTheme:fe,widgetAccent:Object(de.c)(n)?y.k:Object(de.a)(n),quickReplyTheme:Object(me.a)({borderColor:Object(de.c)(n)?y.h:Object(de.a)(n),color:Object(de.c)(n)?y.k:Object(de.b)(n)})})),Object(j.a)(t,C.c,Object(he.a)({alignItems:"flex-end",backgroundColor:Object(de.c)(n)?y.l:Object(de.a)(n),borderColor:"rgba(0, 0, 0, 0.2)",borderRadius:"8px 0px 8px 8px",borderWidth:"0px",textColor:Object(de.c)(n)?y.k:Object(de.b)(n),fileAttachmentTheme:fe,widgetAccent:Object(de.c)(n)?y.k:Object(de.a)(n)})),t},ge=n("rsRY"),ve=n("ZSew"),Oe=n("sURU"),je=v.a.div.withConfig({displayName:"NewThreadPrompt__NewThreadpromptContainer",componentId:"efoo07-0"})(["padding:32px 20px 12px 20px;text-align:center;width:100%;"]);function ye(e){var t=e.createNewThread;return b.a.createElement(ve.a,null,function(e){return b.a.createElement(je,null,b.a.createElement("p",{className:"m-bottom-0"},b.a.createElement(ge.a,{message:"conversations-visitor-ui.newThreadPrompt.newHeading",options:{locale:e}})),b.a.createElement(Oe.a,{"data-test-id":"visitor-widget-start-new-thread-button",onClick:t},b.a.createElement(ge.a,{message:"conversations-visitor-ui.newThreadPrompt.newButton",options:{locale:e}})))})}ye.propTypes={createNewThread:h.a.func.isRequired};ye.displayName="NewThreadPrompt";var Ce=ye,xe=n("xI+G"),ke=n("zC+/"),Ee=function(e){return{accentColor:Object(de.a)(Object(ke.a)(e))}},Te={createNewThread:xe.a},Ie=Object(o.connect)(Ee,Te)(Ce),we=function(e){Object(d.a)(t,e);function t(){Object(s.a)(this,t);return Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.coloring,n=e.fileAttachments,a=e.messagesList,r=e.portalId,i=e.senders,o=e.shouldRenderNewThreadPrompt;return b.a.createElement(le,{messageCount:J(a),shouldScrollToBottom:o},b.a.createElement(Z,{themeConfig:be({coloring:t})},b.a.createElement(Y,{fileAttachments:n,historyConfig:$.a,messages:a,portalId:r,senders:i}),o&&b.a.createElement(Ie,null)))}}]);return t}(f.Component);we.propTypes={coloring:Object(K.a)("ColoringRecord").isRequired,fileAttachments:h.a.instanceOf(p.Map).isRequired,messagesList:h.a.instanceOf(p.List),portalId:h.a.number.isRequired,senders:h.a.instanceOf(p.Map).isRequired,shouldRenderNewThreadPrompt:h.a.bool.isRequired};we.displayName="ThreadHistory";var Re=we,Se=n("5EC7"),Ae=n("KOwh"),Me=n("oMfq"),Pe=n("qJCA"),Ne=n("rD5t"),qe=function(e){var t;try{t=Object(Se.a)(e)}catch(e){Object(Pe.reportError)({error:Object(Ne.a)("ConnectedChatHistoryGetMessagesList selector threw: "+e.message,e)});throw e}return{coloring:Object(ke.a)(e),fileAttachments:Object(Me.a)(e),messagesList:t,portalId:i.a.get(),senders:Object(Ae.a)(e)}},_e={};t.a=Object(o.connect)(qe,_e)(Re)},gwLF:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a="data-cv-message-history-id"},gwgA:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a=1024},h3zd:function(e,t,n){"use strict";var a=n("VfuR"),r=n.n(a),i=n("AXPb");t.a=Object(i.setOf)(r.a.string)},h8ap:function(e,t,n){var a=n("I04N");function r(e,t){var n=this.__data__,r=a(n,e);if(r<0){++this.size;n.push([e,t])}else n[r][1]=t;return this}e.exports=r},iKkD:function(e,t,n){"use strict";n.r(t);n.d(t,"attachmentUploadComplete",function(){return i});var a=n("CRij"),r=n("bDpH"),i=Object(a.createAction)(r.b)},ifQL:function(e,t,n){var a=n("QWT7");function r(e,t){var n=a(this,e),r=n.size;n.set(e,t);this.size+=n.size==r?0:1;return this}e.exports=r},igt9:function(e,t,n){var a=n("wxZq"),r=n("5EvN"),i=n("2aGJ"),o=n("7RMX"),s=n("/Zaq");function c(e){var t=-1,n=null==e?0:e.length;this.clear();for(;++t<n;){var a=e[t];this.set(a[0],a[1])}}c.prototype.clear=a;c.prototype.delete=r;c.prototype.get=i;c.prototype.has=o;c.prototype.set=s;e.exports=c},"ilp/":function(e,t,n){"use strict";var a=n("+FUr"),r=n("LjY7"),i=n("woGC"),o=n("YZ/j"),s=n("Q9/I"),c=n("MEIQ"),u=n("E6l7"),l=n("aVsq"),d=n.n(l),p=n("VfuR"),m=n.n(p),h=n("Ktcs"),f=n.n(h),b=n("zYvt"),g=n("+Tc3"),v=n("XpET"),O=n("ZyKU"),j=n("QYOI"),y=n("prD3"),C=n("vNKw"),x=1e3,k=function(e){Object(c.a)(t,e);function t(e){var n;Object(a.a)(this,t);(n=Object(i.a)(this,Object(o.a)(t).call(this,e))).publishTypingMessage=d()(n.props.publishTypingMessage,b.a,{leading:!0,trailing:!1,maxWait:b.a});n.onChatInputChanged=n.onChatInputChanged.bind(Object(s.a)(n));n.onPublishMessage=n.onPublishMessage.bind(Object(s.a)(n));n.onSelectAttachmentFiles=n.onSelectAttachmentFiles.bind(Object(s.a)(n));n.onRemoveAttachment=n.onRemoveAttachment.bind(Object(s.a)(n));n.inputStagingEvent=d()(n.props.inputStagingEvent,x);return n}Object(r.a)(t,[{key:"onChatInputChanged",value:function(e){var t=this.props,n=t.currentConversation,a=t.disablePublish,r=t.shouldSendInputStagingEvent,i=t.showInitialMessageBubble;(0,t.setMessageEditorStagingText)(e);a||this.publishTypingMessage({thread:n});r&&this.inputStagingEvent(e,!1);i&&this.props.closeInitialMessageBubble()}},{key:"onPublishMessage",value:function(e){var t=e.text,n=e.richText,a=e.quickReply,r=this.props,i=r.messagesPageUri,o=r.publishMessage,s=r.stagedAttachments,c=r.removeMessageEditorStagingText;this.publishTypingMessage.cancel();o({text:t,richText:n,quickReply:a,url:i,fileAttachment:Object(y.a)(s)});c()}},{key:"onSelectAttachmentFiles",value:function(e){var t=e.files;if(t&&t.length){var n=this.props,a=n.onSelectAttachmentFile,r=n.currentConversation;a({file:t.item(0),thread:r})}}},{key:"onRemoveAttachment",value:function(e){var t=e.attachment,n=this.props,a=n.currentConversation,r=n.onRemoveAttachment;r({attachment:t,thread:a})}},{key:"render",value:function(){var e=this.props,t=e.coloring,n=e.currentConversation,a=e.disablePublish,r=e.disableTextInput,i=e.isOnFocus,o=e.mobile,s=e.networkOffline,c=e.shouldDisableAttachment,l=e.shouldSendInputStagingEvent,d=e.showingHsBranding,p=e.stagedAttachments,m=e.toggleOnAndOffInputFocus,h=e.stagedMessage,b=e.showQuickReplyPlaceholder;return f.a.createElement(u.a,{coloring:t,chatInputChanged:this.onChatInputChanged,disabled:r,disablePublish:a,isOnFocus:i,maxAttachmentFileSize:O.b,mobile:o,networkOffline:s,onSelectAttachmentFiles:this.onSelectAttachmentFiles,onRemoveAttachment:this.onRemoveAttachment,publishMessage:this.onPublishMessage,shouldDisableAttachment:c,showingHsBranding:d,stagedAttachments:p,stagedMessageEditorText:h,supportsAttachments:Object(g.isPersistedThread)(n),toggleOnAndOffInputFocus:m,fileTypes:C.a,showQuickReplyPlaceholder:b,shouldSendInputStagingEvent:l,inputStaging:this.inputStagingEvent})}}]);return t}(h.PureComponent);k.displayName="MessageEditorWrapper";k.propTypes={closeInitialMessageBubble:m.a.func.isRequired,coloring:Object(v.a)("ColoringRecord").isRequired,currentConversation:Object(v.a)("Thread"),disablePublish:m.a.bool.isRequired,disableTextInput:m.a.bool.isRequired,inputStagingEvent:m.a.func,isOnFocus:m.a.bool.isRequired,messagesPageUri:m.a.string,mobile:m.a.bool,networkOffline:m.a.bool.isRequired,onRemoveAttachment:m.a.func.isRequired,onSelectAttachmentFile:m.a.func.isRequired,publishMessage:m.a.func.isRequired,publishTypingMessage:m.a.func.isRequired,removeMessageEditorStagingText:m.a.func.isRequired,setMessageEditorStagingText:m.a.func.isRequired,shouldDisableAttachment:m.a.bool,shouldSendInputStagingEvent:m.a.bool.isRequired,showInitialMessageBubble:m.a.bool.isRequired,showQuickReplyPlaceholder:m.a.bool.isRequired,showingHsBranding:m.a.bool.isRequired,stagedAttachments:m.a.instanceOf(j.List),stagedMessage:m.a.string,toggleOnAndOffInputFocus:m.a.func};t.a=k},ivel:function(e,t,n){"use strict";n.r(t);n.d(t,"applyGdprConsent",function(){return i});var a=n("DHw3"),r=n("3ApS"),i=function(){return function(e,t){Object(r.shouldRecordImplicitConsentToProcess)(t())&&e(Object(a.consentToProcess)());return Promise.resolve()}}},kg2J:function(e,t,n){"use strict";var a=n("az9m"),r=n("VfuR"),i=n.n(r),o=n("Ktcs"),s=n.n(o),c=n("9f1P"),u=n.n(c),l=n("c0kh").h,d=n("3RBx"),p=u.a.div.withConfig({displayName:"VizExNanoProgress__Bar",componentId:"vrf6zp-0"})(["transition:width 0.2s ease-in-out;left:0;position:absolute;top:0;opacity:",";width:",";height:3px;z-index:",";background-color:",";"],function(e){return 0===e.value?0:1},function(e){return e.value+"%"},function(e){return e.zIndex},function(e){var t=e.theme;return l(t)}),m=function(e){var t=e.zIndex,n=e.value,r=e.theme,i=Object(a.a)(e,["zIndex","value","theme"]);return s.a.createElement(p,Object.assign({},i,{"aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":n,role:"progressbar",zIndex:t,value:n,theme:r}))};m.propTypes={theme:d.a,value:i.a.number,zIndex:i.a.number};m.defaultProps={zIndex:10,value:0};m.displayName="VizExNanoProgress";t.a=m},lBOe:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n("BjQQ"),r=Object(a.a)("fileUploads")},lEuo:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n("4scq"),r=n("Jtvd"),i=n("nncj");function o(){return function(e,t){e(Object(r.handleStoreMessagesCookie)(Object(a.getMessagesUtk)(t())));e(Object(i.trackInteraction)("widget-interaction",{action:"clicked consent to cookies button"}))}}},lbaU:function(e,t,n){"use strict";var a=n("az9m"),r=n("Ktcs"),i=n.n(r),o=n("VfuR"),s=n.n(o),c="javascript:void(0)",u=/^([^:]+):/,l=/[\s\x00-\x1f]/g,d=function(e){if(e&&"string"==typeof e){var t=e.match(u);if(!t||e===c)return!1;if("javascript:"===t[0].replace(l,"").toLowerCase())return!0}return!1},p=n("9f1P"),m=n.n(p).a.img.withConfig({displayName:"VizExImage__StyledImg",componentId:"sc-1owz4lv-0"})(["display:block;height:auto;max-width:100%;"]),h=function(e){var t=e.src,n=Object(a.a)(e,["src"]),r=d(t);r&&console.warn("VizExImage was given an unsafe src, defaulting to empty.");return i.a.createElement(m,Object.assign({},n,{src:r?null:t}))};h.propTypes={src:s.a.string.isRequired};h.displayName="VizExImage";t.a=h},mP5C:function(e,t,n){"use strict";var a=n("QYOI"),r=n("3I2d"),i=Object(a.Record)({width:"auto",minHeight:36,borderColor:r.h,whiteSpace:"normal",lineHeight:"1rem",color:r.h},"QuickReplyTheme");t.a=i},mdUv:function(e,t,n){"use strict";var a=n("9f1P"),r=n.n(a),i=n("c0kh"),o="help",s="default",c="error",u=n("QBr6"),l=function(e){var t=e.use,n=e.theme;switch(t){case c:return Object(a.css)(["color:",";"],Object(i.c)(n));case o:return Object(a.css)(["color:",";"],Object(i.d)(n));case s:default:return null}},d=r.a.small.withConfig({displayName:"VizExSmall",componentId:"f5rdak-0"})(["display:block;",";",";"],u.b,l);t.a=d},mluK:function(e,t,n){"use strict";n.r(t);n.d(t,"sendConsentToCommunicate",function(){return s});var a=n("nDpY"),r=n.n(a),i=n("kMAx"),o="livechat-public/v1/privacy/consentToCommunicate";function s(e){var t=e.sessionId,n=e.hubspotUtk,a=e.threadId;return i.a.put(o,{query:{sessionId:t,hubspotUtk:n,threadId:a,portalId:r.a.get()}})}},mqjQ:function(e,t,n){"use strict";n.d(t,"a",function(){return a});n.d(t,"b",function(){return r});n.d(t,"d",function(){return i});n.d(t,"c",function(){return o});var a="FIRST",r="FIRST_IN_GROUP",i="LAST_IN_GROUP",o="LAST"},nKka:function(e,t,n){"use strict";var a=n("xq+X");t.a=Object(a.a)(["meetingsLinkUrl"])},nqur:function(e,t,n){var a=n("XuUM"),r=n("QzTW"),i=n("BOd2"),o=n("g+7s"),s=n("ifQL");function c(e){var t=-1,n=null==e?0:e.length;this.clear();for(;++t<n;){var a=e[t];this.set(a[0],a[1])}}c.prototype.clear=a;c.prototype.delete=r;c.prototype.get=i;c.prototype.has=o;c.prototype.set=s;e.exports=c},o5Ko:function(e,t,n){"use strict";var a=n("3I2d"),r=n("QYOI"),i=n("5Utl"),o=Object(r.Record)({width:"auto",minHeight:36,borderColor:a.h,whiteSpace:"normal",lineHeight:"1rem",color:a.h},"QuickReplyTheme"),s=Object(r.Record)({alignItems:"flex-start",avatarWidth:"32px",backgroundColor:a.l,borderColor:a.a,borderRadius:"4px",borderWidth:"1px",messageSpacing:"8px",textColor:a.p,fileAttachmentTheme:Object(i.a)(),quickReplyTheme:o(),headerBackgroundColor:a.q,headerTextColor:a.p,avatarBackgroundColor:a.a,avatarBorderColor:a.a,avatarTextColor:a.p},"Theme");t.a=s},oDJb:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n("BjQQ"),r=Object(a.a)("fileUploadsErrors")},oEjG:function(e,t,n){"use strict";n.r(t);n.d(t,"removeAttachment",function(){return i});var a=n("CRij"),r=n("bDpH"),i=Object(a.createAction)(r.g)},oLNr:function(e,t,n){"use strict";n.r(t);n.d(t,"uploadAttachmentClient",function(){return r});var a=n("jfD2"),r=function(e){var t=e.formData,n=e.uploadUrl,r=e.onProgress,i=void 0===r?function(){}:r;return a.a.post(n,{headers:{"content-type":!1},data:t,timeout:0,withXhr:function(e){e.upload.addEventListener("progress",i,!1)}})}},oMfq:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var a=n("A9rd"),r=n("VO0R"),i=n("yIGR"),o=n("QYOI"),s=n("ib5I"),c=n("oEKk"),u=n("Gcf9"),l=Object(s.a)([u.a],function(e){return e&&Object(i.getEntries)(e).size?Object(i.getEntries)(e).reduce(function(e,t,n){return t&&n&&Object(r.isSucceeded)(t)?Object(c.a)(String(n),Object(a.a)(t),e):e},Object(o.Map)()):Object(o.Map)()})},ooj3:function(e,t,n){"use strict";var a=n("Ktcs"),r=n.n(a),i=n("9f1P"),o=n.n(i),s=n("rsRY"),c=o.a.div.withConfig({displayName:"ErrorState__ErrorWrapper",componentId:"sc-158c0d-0"})(["display:flex;justify-content:center;align-items:center;height:100%;flex-direction:column;"]),u=function(){return r.a.createElement(c,null,r.a.createElement("h5",null,r.a.createElement(s.a,{message:"conversations-visitor-ui.asyncError.body"})),r.a.createElement("div",{className:"m-top-3"},r.a.createElement(s.a,{message:"conversations-visitor-ui.asyncError.noRetry"})))};u.displayName="ErrorState";var l=u,d=o.a.div.withConfig({displayName:"ThreadHistoryError__ThreadHistoryErrorWrapper",componentId:"sc-73lsqe-0"})(["text-align:center;flex-grow:1;"]),p=function(){return r.a.createElement(d,null,r.a.createElement(l,null))};p.displayName="ThreadHistoryError";t.a=p},or3H:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a="WEB"},pRQC:function(e,t,n){"use strict";var a=n("+FUr"),r=n("LjY7"),i=n("woGC"),o=n("YZ/j"),s=n("MEIQ"),c=n("VfuR"),u=n.n(c),l=n("Ktcs"),d=n.n(l),p=n("9f1P"),m=n.n(p),h=n("zSU9"),f=n("TSck"),b=n("v6JX"),g=n("1GJt"),v=n("9OKC"),O=n("3I2d"),j=m.a.div.withConfig({displayName:"ChatAreaAlert__Wrapper",componentId:"sc-1gi9el6-0"})(["width:100%;display:flex;justify-content:center;background-color:transparent;"]),y=m.a.div.withConfig({displayName:"ChatAreaAlert__Alert",componentId:"sc-1gi9el6-1"})(["display:flex;justify-content:flex-end;align-items:center;padding:7px 14px;min-width:85%;background-color:",";border:1px solid ",";font-weight:500;font-size:12px;"],O.n,O.o),C=m.a.div.withConfig({displayName:"ChatAreaAlert__Title",componentId:"sc-1gi9el6-2"})(["flex:0 1 100%;"]),x=m.a.div.withConfig({displayName:"ChatAreaAlert__LinkWrapper",componentId:"sc-1gi9el6-3"})(["flex:0 0 auto;"]),k=m()(h.a).withConfig({displayName:"ChatAreaAlert__StyledCloseButton",componentId:"sc-1gi9el6-4"})(["position:static;flex:0 0 12px;margin-left:20px;"]),E=function(e){Object(s.a)(t,e);function t(){Object(a.a)(this,t);return Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}Object(r.a)(t,[{key:"render",value:function(){return d.a.createElement(j,null,d.a.createElement(y,null,d.a.createElement(C,null,this.props.title),d.a.createElement(x,null,this.props.link),d.a.createElement(k,{use:"transparent-on-background",theme:Object(v.i)(O.p,Object(g.a)()),onClick:this.props.onClose},d.a.createElement(f.a,{icon:d.a.createElement(b.a,null)}))))}}]);return t}(d.a.Component);E.propTypes={link:u.a.node,onClose:u.a.func.isRequired,title:u.a.node.isRequired};E.defaultProps={onClose:function(){}};E.displayName="ChatAreaAlert";t.a=E},pnsR:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var a=n("yIGR"),r=n("ib5I"),i=n("AAJh"),o=n("V/zO"),s=Object(r.a)([i.a,o.getCurrentThreadId],function(e,t){return"number"!=typeof t?null:Object(a.getEntry)(t,e)||null})},prD3:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n("mnU7"),r=n("AJY7"),i=n("pkFW"),o=function(e){if(!e)return null;var t=e.filter(r.isUploadCompleted).map(a.getFileId);return t.size?Object(i.a)({fileIds:t}):null}},q5yn:function(e,t,n){"use strict";n.r(t);n.d(t,"getFileName",function(){return i});var a=n("BjQQ"),r=n("mnU7"),i=function(e){var t=Object(r.getFile)(e);return Object(a.a)("name",t)||""}},qENm:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var a=n("A9rd"),r=n("yIGR"),i=n("ib5I"),o=n("V/zO"),s=n("aCdO"),c=n("gupl"),u=Object(i.a)([c.a,o.getCurrentThreadId],function(e,t){var n=Object(r.getEntries)(e).map(a.a);return Object(s.getSortedMessagesByThreadId)(n,t)})},rXC1:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var a=n("M2Ie"),r=n("Iv5K"),i=n("rkDb"),o=n("8JFU"),s=n("4scq"),c=n("SE0r"),u=n("zGuL"),l=n("/5gn"),d=n("ax+l"),p=function(e){var t=e.thread;return function(e,n){var p=Object(i.getChannelName)(t),m=Object(i.getThreadId)(t),h=Object(i.getSource)(t),f=r.VISITOR_SENDER,b=Object(l.a)(f),g=Object(s.getMessagesUtk)(n()),v=new c.a({id:Object(u.generateUuid)(),typingState:null,sender:Object(a.a)({"@type":f},b,g),status:{source:h,messageStatus:d.b}});e(Object(o.publishMessageToConversation)({channel:p,message:v,threadId:m}))}}},rvWB:function(e,t,n){"use strict";n.r(t);n.d(t,"uploadAttachment",function(){return b});var a=n("9hgJ"),r=n("mnU7"),i=n("nncj"),o=n("xOvp"),s=n("M+r2"),c=n("oLNr"),u=n("W3K0"),l=n("32t3"),d=n("iKkD"),p=n("T7hB"),m=n("wVuR"),h=n("+rg3"),f=n("ZyKU"),b=function(e){var t=e.attachment,n=e.threadId;return function(e,b){var g=Date.now();e(Object(l.attachmentUploadStart)({attachment:t,threadId:n}));var v=Object(o.getSessionId)(b()),O=Object(r.getLocalId)(t),j=Object(r.getFile)(t),y=Object(u.createFormDataForAttachment)({file:j});return Object(s.fetchAttachmentUploadUrlClient)({sessionId:v,threadId:n}).then(function(t){var a=t.uploadUrl;return Object(c.uploadAttachmentClient)({formData:y,onProgress:function(t){var a=t.loaded,r=t.total;e(Object(m.handleAttachmentUploadProgress)({localId:O,threadId:n,loaded:a,total:r}))},uploadUrl:f.a+"/"+a})}).then(function(t){var r=Object(a.a)(t.objects,1)[0],o=Date.now();e(Object(d.attachmentUploadComplete)({localId:O,threadId:n,fileId:r.id,uploadedFile:r}));e(Object(i.trackInteraction)("attached-file",{action:"attached file","attachment-type":r.extension,"attachment-size-bytes":j.size,"upload-time-ms":o-g}))}).catch(function(){e(Object(h.attachmentError)(p.b,n));e(Object(i.trackInteraction)("failed-to-attach-file",{action:"failed to attach file","failure-type":"upload error"}))})}}},sToE:function(e,t,n){"use strict";n.r(t);n.d(t,"validateAttachmentFile",function(){return o});var a=n("T7hB"),r=n("LI65"),i=n("L1i+"),o=function(e){var t=Object(i.a)();Object(r.fileExceedsSizeLimit)(e)?t.reject(a.a):t.resolve();return t.promise}},t2YF:function(e,t,n){"use strict";var a=n("+FUr"),r=n("LjY7"),i=n("woGC"),o=n("YZ/j"),s=n("MEIQ"),c=n("VfuR"),u=n.n(c),l=n("Ktcs"),d=n.n(l),p=n("9f1P"),m=n.n(p),h=n("3I2d"),f=n("dLcb"),b=n("XpET"),g=n("pRQC"),v=n("rsRY"),O=m.a.div.withConfig({displayName:"ProcessConsentPrompt__ConsentPromptWrapper",componentId:"sc-9lwhbi-0"})(["border-top:2px solid ",";"],h.f),j=m.a.div.withConfig({displayName:"ProcessConsentPrompt__AlertWrapper",componentId:"sc-9lwhbi-1"})(["margin:10px;"]),y=function(e){Object(s.a)(t,e);function t(){Object(a.a)(this,t);return Object(i.a)(this,Object(o.a)(t).apply(this,arguments))}Object(r.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.trackInteraction)("widget-interaction",{action:"view consent to process"})}},{key:"render",value:function(){var e=this.props,t=e.coloring,n=e.consentToProcess,a=e.consentToProcessError,r=e.consentToProcessMessage,i=e.dismissConsentToProcessError,o=e.showGdprConsentToProcessButton;return d.a.createElement(O,null,a?d.a.createElement(j,null,d.a.createElement(g.a,{title:d.a.createElement(v.a,{message:"conversations-visitor-ui.network.offline.title"}),onClose:i})):d.a.createElement(f.a,{showButton:o,message:r,onClick:n,coloring:t}))}}]);return t}(l.Component);y.displayName="ProcessConsentPrompt";y.propTypes={coloring:Object(b.a)("ColoringRecord"),consentToProcess:u.a.func,consentToProcessError:u.a.bool,consentToProcessMessage:u.a.string,dismissConsentToProcessError:u.a.func,showGdprConsentToProcessButton:u.a.bool,trackInteraction:u.a.func};t.a=y},tRLC:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var a=n("ib5I"),r=n("BjQQ"),i=n("oDJb"),o=n("rkDb"),s=n("Xqh6"),c=Object(a.a)([i.a,s.a],function(e,t){var n=Object(o.getThreadId)(t);return Object(r.a)(n,e)||null})},u70c:function(e,t,n){"use strict";var a,r=n("M2Ie"),i=n("bmAq"),o=n("+FUr"),s=n("LjY7"),c=n("woGC"),u=n("YZ/j"),l=n("MEIQ"),d=n("VfuR"),p=n.n(d),m=n("Q9/I"),h=n("XpET"),f=n("9f1P"),b=n.n(f),g=n("3I2d"),v="default",O="blank",j="on-shade",y="on-dark",C=(a={},Object(r.a)(a,v,{primary:g.j,secondary:g.l}),Object(r.a)(a,j,{primary:g.l,secondary:g.j}),Object(r.a)(a,y,{primary:g.k,secondary:g.r}),a),x="\n  background: "+g.q+";\n",k=function(e){var t=e.primary;return"\n  background: "+t+";\n  background: linear-gradient(to right, "+t+", "+e.secondary+" 20%, "+t+" 40%);\n  background-size: 1200px;\n"},E=function(e){return C[e]},T=function(e){var t=e.use;return t===O?x:k(E(t))},I=function(e){return"number"==typeof e},w=function(e){return I(e)?e+"px":e},R="1s",S="linear",A="0s",M="infinite",P="forwards",N=700,q=Object(f.keyframes)(["0%{background-position:-","px 0}100%{background-position:","px 0}"],N,N),_=Object(f.css)(["animation:"," "," "," "," "," ",";"],q,R,S,A,M,P),L=b.a.div.withConfig({displayName:"SkeletonBase",componentId:"naonl1-0"})(["margin:",";padding:",";",";",";"],function(e){var t=e.margin;return t?w(t):void 0},function(e){var t=e.padding;return t?w(t):void 0},function(e){var t=e.use;return T({use:t})},function(e){return e.use!==O&&_});L.defaultProps={use:v};L.propTypes={margin:p.a.oneOfType([p.a.number,p.a.string]),padding:p.a.oneOfType([p.a.number,p.a.string]),use:p.a.oneOf([v,j,y,O])};var F=L,z=32,D=b()(F).withConfig({displayName:"SkeletonCircle",componentId:"sc-1a3tugc-0"})(["border-radius:50%;width:",";height:",";min-width:",";"],function(e){var t=e.size;return w(t)},function(e){var t=e.size;return w(t)},function(e){var t=e.size;return w(t)});D.defaultProps={size:z};D.propTypes={size:p.a.number};var B=D,U=n("Ktcs"),Q=n.n(U),H=n("X0Cv"),V=n("NlO/"),W=n("I3fj"),Y=n("cDXp"),K=n.n(Y),G=n("dQWp"),X=function(){},Z=function(e){Object(l.a)(t,e);function t(e){var n;Object(o.a)(this,t);(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleClick=n.handleClick.bind(Object(m.a)(n));return n}Object(s.a)(t,[{key:"handleClick",value:function(){var e=this.props;(0,e.onClick)(e.sender)}},{key:"render",value:function(){var e=this.props,t=e.isLoading,n=e.sender,a=e.size;if(t)return Q.a.createElement(B,{size:32});if(!n)return Q.a.createElement(H.a,{size:a});switch(Object(V.getSenderType)(n)){case G.b:case G.d:return Q.a.createElement(H.a,{size:a,src:Object(W.a)(n)||K.a});default:return Q.a.createElement("span",{onClick:this.handleClick},Q.a.createElement(H.a,{size:a,src:Object(W.a)(n)}))}}}]);return t}(U.PureComponent);Z.displayName="SenderAvatar";Z.propTypes={isLoading:p.a.bool,onClick:p.a.func.isRequired,sender:Object(h.a)("Sender"),size:H.a.propTypes.size};Z.defaultProps={onClick:X,size:"sm"};var J=n("XCGw"),$=n("h3zd"),ee=n("K7wl"),te=n("SRO8"),ne=n("8qT0"),ae=Object(te.a)(function(e,t,n){return t?n.get(Object(ne.buildSenderLocator)(t,e)):null}),re="STARTED",ie=Object(te.a)(function(e){return!Object(W.b)(e)&&Object(W.h)(e)===re}),oe="#cbd6e2",se="#00a4bd",ce=window.navigator?navigator.userAgent.toLowerCase():"",ue=function(){return ce.includes("trident/")>=0},le=n("BjQQ"),de=Object(le.a)("alignItems"),pe=Object(le.a)("avatarWidth"),me=Object(le.a)("backgroundColor"),he=Object(le.a)("borderColor"),fe=Object(le.a)("borderRadius"),be=Object(le.a)("borderWidth"),ge=(Object(le.a)("messageSpacing"),Object(le.a)("textColor")),ve=Object(le.a)("fileAttachmentTheme"),Oe=(Object(le.a)("quickReplyTheme"),Object(le.a)("widgetAccent")),je=n("YxZp"),ye=Object(U.createContext)(Object(je.a)()),Ce=Object(f.keyframes)(["25%{background-color:",";}75%{background-color:",";}"],oe,oe),xe=Object(f.keyframes)(["0%,100%{transform:translateY(0);}25%{transform:translateY(.25em);}50%{transform:translateY(0);}75%{transform:translateY(-.25em);}"]);ue()&&(xe=Object(f.keyframes)(["0%,100%{top:0;}25%{top:.25em;}50%{top:0}75%{top:-.25em;}"]));var ke=b.a.div.withConfig({displayName:"TypingDots__Dot",componentId:"sc-11fzcdi-0"})(["position:relative;background-color:currentColor;color:",";border-radius:50%;height:1em;width:1em;animation:",",",";animation-duration:1s;animation-timing-function:linear;animation-iteration-count:infinite;&:not(:last-child){margin-right:0.75em;}&:nth-child(2){animation-delay:-0.66s;}&:nth-child(3){animation-delay:-0.33s;}"],function(e){return e.color?e.color:se},xe,Ce),Ee=b.a.div.withConfig({displayName:"TypingDots__TypingDotsWrapper",componentId:"sc-11fzcdi-1"})(["display:flex;align-items:center;justify-content:center;height:24px;font-size:8px;width:4.5em;"]),Te=function(e){Object(l.a)(t,e);function t(){Object(o.a)(this,t);return Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}Object(s.a)(t,[{key:"render",value:function(){var e=Oe(this.context);return Q.a.createElement(Ee,null,Q.a.createElement(ke,{color:e,className:"dot-1"}),Q.a.createElement(ke,{color:e,className:"dot-2"}),Q.a.createElement(ke,{color:e,className:"dot-3"}))}}]);return t}(U.Component);Te.contextType=ye;Te.displayName="TypingDots";var Ie=Te,we=n("2S+z"),Re=b.a.div.withConfig({displayName:"SpacingWrapper",componentId:"wsao8b-0"})(["padding-top:4px;padding-bottom:4px;padding-left:10px;padding-right:10px;width:100%;"]),Se=p.a.oneOf([J.b,J.a,J.c]),Ae=n("LKvj"),Me=n("Urcc"),Pe=function(e){Object(Me.a)(void 0===e||"object"==typeof e,"Invalid config type given");e&&Object.values(e).forEach(function(e){Object(Me.a)(e instanceof je.a,"All themes in the configuration must be a `Theme` record. Found %s",typeof e)})},Ne=Object(U.memo)(function(e){var t=e.themeConfig,n=e.use,a=e.children;Pe(t);t=Object.assign({},Ae.b,t);var r=n?t[n]:t[J.b]||Object(je.a)();return Q.a.createElement(ye.Provider,{value:r},a)});Ne.displayName="ThemeProvider";Ne.propTypes={children:p.a.node.isRequired,themeConfig:p.a.objectOf(Object(h.a)("Theme")),use:Se};var qe=Ne,_e=b.a.div.withConfig({displayName:"PrimaryMessageAvatar__PrimaryMessageAvatarWrapper",componentId:"sc-1jbonid-0"})(["align-items:center;display:flex;flex-shrink:0;justify-items:center;margin-top:35px;"]),Le=function(e){Object(l.a)(t,e);function t(){Object(o.a)(this,t);return Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.className;return Q.a.createElement(_e,{className:n},t)}}]);return t}(U.PureComponent);Le.displayName="PrimaryMessageAvatar";Le.propTypes={children:p.a.node.isRequired,className:p.a.string};var Fe=b.a.div.withConfig({displayName:"PrimaryMessageContentSection__PaddedArea",componentId:"sc-1r9yv2i-0"})(["padding:8px 16px;"]),ze=b.a.div.withConfig({displayName:"PrimaryMessageContentSection__PrimaryMessageContentSectionWrapper",componentId:"sc-1r9yv2i-1"})(["width:100%;button{width:auto;}"]),De=function(e){Object(l.a)(t,e);function t(){Object(o.a)(this,t);return Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}Object(s.a)(t,[{key:"renderContent",value:function(){var e=this.props.children;return Q.a.createElement(Fe,null,e)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.className;return Q.a.Children.count(t)>0?Q.a.createElement(ze,{className:n},Q.a.createElement("div",{className:"width-100 padding-x-4 padding-y-2"},this.renderContent())):null}}]);return t}(U.PureComponent);De.contextType=ye;De.displayName="PrimaryMessageContentSection";De.propTypes={children:p.a.node,className:p.a.string};var Be=b.a.div.withConfig({displayName:"PrimaryMessageContent__PrimaryMessageContentWrapper",componentId:"sc-1v69g1t-0"})(["position:relative;min-height:32px;word-break:break-word;box-sizing:border-box;border-style:solid;border-width:",";border-color:",";background-color:",";color:",";display:inline-flex;align-items:center;flex-direction:column;border-radius:",";","{border-top-style:solid;border-top-width:1px;border-top-color:",";&:first-child{border-top:none;}}max-width:284px;"],function(e){return e.borderWidth},function(e){return e.borderColor},function(e){return e.backgroundColor},function(e){return e.textColor},function(e){return e.borderRadius},ze,function(e){return e.borderColor}),Ue=function(e){Object(l.a)(t,e);function t(e){var n;Object(o.a)(this,t);(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={expanded:!!e.isLastMessage};n.onCollapseButtonClick=n.onCollapseButtonClick.bind(Object(m.a)(n));n.expandMessage=n.expandMessage.bind(Object(m.a)(n));return n}Object(s.a)(t,[{key:"onCollapseButtonClick",value:function(){this.setState({expanded:!1})}},{key:"expandMessage",value:function(){this.state.expanded||this.setState({expanded:!0})}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.className;return Q.a.createElement(Be,{className:n,backgroundColor:me(this.context),borderColor:he(this.context),borderRadius:fe(this.context),borderWidth:be(this.context),textColor:ge(this.context)},t)}}]);return t}(U.PureComponent);Ue.contextType=ye;Ue.displayName="PrimaryMessageContent";Ue.propTypes={children:p.a.node,className:p.a.string,isLastMessage:p.a.bool};var Qe=b.a.div.withConfig({displayName:"PrimaryMessageFooter__PrimaryMessageFooterWrapper",componentId:"sc-191j3gs-0"})(["display:flex;margin-top:4px;max-width:284px;"]),He=function(e){Object(l.a)(t,e);function t(){Object(o.a)(this,t);return Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.className;return Q.a.createElement(Qe,{className:n},t)}}]);return t}(U.PureComponent);He.displayName="PrimaryMessageFooter";He.propTypes={children:p.a.node.isRequired,className:p.a.string};var Ve=b.a.div.withConfig({displayName:"PrimaryMessageHeader__PrimaryMessageHeaderWrapper",componentId:"duz94r-0"})(["display:flex;height:16px;align-items:center;margin-top:4px;margin-bottom:4px;width:100%;"]),We=function(e){Object(l.a)(t,e);function t(){Object(o.a)(this,t);return Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.className;return Q.a.createElement(Ve,{className:n},t)}}]);return t}(U.PureComponent);We.displayName="PrimaryMessageHeader";We.propTypes={children:p.a.node.isRequired,className:p.a.string};var Ye=b.a.div.withConfig({displayName:"PrimaryMessageHeaderContent__PrimaryMessageHeaderContentWrapper",componentId:"sc-1bzjchr-0"})(["margin-left:1px;min-width:0;"]),Ke=function(e){Object(l.a)(t,e);function t(){Object(o.a)(this,t);return Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.className;return Q.a.createElement(Ye,{className:n},t)}}]);return t}(U.PureComponent);Ke.displayName="PrimaryMessageHeaderContent";Ke.propTypes={children:p.a.node.isRequired,className:p.a.string};var Ge="8px",Xe=b.a.div.withConfig({displayName:"PrimaryMessage__PrimaryMessageWrapper",componentId:"j723ak-0"})(["display:flex;flex-direction:column;align-items:",";padding-left:",";","{","{width:",";margin-left:-",";margin-right:",";}>:first-child{&","{margin-left:",";}}}","{margin-left:",";}","{margin-left:",";}"],function(e){return e.alignment||"flex-start"},Ge,Ve,_e,function(e){return e.avatarWidth},Ge,Ge,Ye,function(e){return e.avatarWidth},Be,function(e){return e.avatarWidth},Qe,function(e){return e.avatarWidth}),Ze=function(e){Object(l.a)(t,e);function t(){Object(o.a)(this,t);return Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.children,a=t.className,r=t.positionDescriptors,i=t.use;return n?Q.a.createElement(qe,{themeConfig:this.context,use:i},Q.a.createElement(Re,{positionDescriptors:r,className:a},Q.a.createElement(ye.Consumer,null,function(t){return Q.a.createElement(Xe,{"data-test-id":e.props["data-test-id"],"data-test-use":i,alignment:de(t),avatarWidth:pe(t)},n)}))):null}}]);return t}(U.PureComponent);Ze.contextType=Ae.a;Ze.displayName="PrimaryMessage";Ze.propTypes={children:p.a.node,className:p.a.string,"data-test-id":p.a.string,positionDescriptors:$.a,use:Se};var Je=n("az9m"),$e=b.a.div.withConfig({displayName:"SkeletonText__SkeletonTextWrapper",componentId:"l81tz-0"})(["position:relative;width:",";"],function(e){var t=e.width;return w(t)}),et=b()(F).withConfig({displayName:"SkeletonText__SkeletonTextInner",componentId:"l81tz-1"})(["height:0.75em;left:0;position:absolute;top:50%;transform:translateY(-50%);width:100%;"]),tt=function(e){Object(l.a)(t,e);function t(){Object(o.a)(this,t);return Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.width,n=Object(Je.a)(e,["width"]);return Q.a.createElement($e,{width:t},"",Q.a.createElement(et,n))}}]);return t}(Q.a.PureComponent);tt.defaultProps={width:"100%"};tt.propTypes={width:p.a.oneOfType([p.a.number,p.a.string])};var nt=tt,at=n("mdUv"),rt=n("rsRY"),it=n("1jbZ"),ot=n("POuG"),st=["de","ja"],ct=function(e,t){var n=e.givenName,a=e.familyName,r=e.email,i=t&&t.locale||Object(it.a)();return st.indexOf(i)>=0||!n?Object(ot.a)({firstName:n,lastName:a,email:r},t):n},ut=function(e){Object(l.a)(t,e);function t(){Object(o.a)(this,t);return Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}Object(s.a)(t,[{key:"getUnknownSenderText",value:function(){switch(Object(W.g)(this.props.sender)){case G.b:return Q.a.createElement(rt.a,{message:"conversations-message-history.responder.bot"});case G.a:return Q.a.createElement(rt.a,{message:"conversations-message-history.responder.unknownResponder"});case G.e:return Q.a.createElement(rt.a,{message:"conversations-message-history.responder.unknownVisitor"});case G.d:return Q.a.createElement(rt.a,{message:"conversations-message-history.responder.automatic"});default:return Q.a.createElement(rt.a,{message:"conversations-message-history.responder.unknownSender"})}}},{key:"render",value:function(){var e=this.props,t=e.sender;return e.isLoading?Q.a.createElement(nt,{width:100}):t&&ct({givenName:Object(W.d)(t),familyName:Object(W.f)(t),email:Object(W.c)(t)})||this.getUnknownSenderText()}}]);return t}(U.PureComponent);ut.displayName="SenderName";ut.propTypes={isLoading:p.a.bool,sender:Object(h.a)("Sender")};var lt=function(e){Object(l.a)(t,e);function t(){Object(o.a)(this,t);return Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isSenderLoading,n=e.sender;return t?Q.a.createElement(nt,{width:150}):Q.a.createElement(at.a,{use:"help"},Q.a.createElement("strong",null,Q.a.createElement(ut,{sender:n})))}}]);return t}(U.PureComponent);lt.displayName="SenderHeaderContent";lt.propTypes={isSenderLoading:p.a.bool,sender:Object(h.a)("Sender")};var dt=lt,pt=function(e){Object(l.a)(t,e);function t(){Object(o.a)(this,t);return Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isSenderLoading,n=e.sender;return Q.a.createElement(dt,{sender:n,isSenderLoading:t})}}]);return t}(U.PureComponent);pt.displayName="TypingHeaderContent";pt.propTypes={isSenderLoading:p.a.bool,sender:Object(h.a)("Sender")};var mt=function(e){Object(l.a)(t,e);function t(){Object(o.a)(this,t);return Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.message,n=e.positionDescriptors,a=e.senders,r=Object(we.getSenderId)(t),i=Object(we.getSenderType)(t),o=Object(we.getSenderType)(t)===G.e,s=ae(r,i,a),c=Object(W.b)(s),u=ie(s),l=o?J.c:J.a;return Q.a.createElement(Ze,{positionDescriptors:n,use:l},Q.a.createElement(We,null,Q.a.createElement(Le,null,Q.a.createElement(Z,{sender:c,isLoading:u})),Q.a.createElement(Ke,null,Q.a.createElement(pt,{message:t,sender:c,isSenderLoading:u}))),Q.a.createElement(Ue,null,Q.a.createElement(De,null,Q.a.createElement(Ie,null))))}}]);return t}(U.PureComponent);mt.displayName="TypingIndicatorMessage";mt.propTypes={message:p.a.oneOfType([Object(h.a)("PubNubMessageRecord"),Object(h.a)("TypingIndicatorMessage")]).isRequired,positionDescriptors:$.a.isRequired,senders:ee.a.isRequired};var ht,ft=mt,bt=n("qHBY"),gt=n("Aw1I"),vt=n("hETE"),Ot=n("t6nY"),jt=n.n(Ot),yt=b.a.div.withConfig({displayName:"DashedLabel__StyledBorder",componentId:"d0ze3h-0"})(["display:flex;flex-grow:1;border:solid 1px ",";"],g.i);function Ct(e){var t=e.children,n=e.transparent,a=e["data-test-id"],r=e.labelPadding;return Q.a.createElement("div",{className:jt()("display-flex align-end",r,n&&"justify-center",!r&&"m-y-6"),"data-test-id":a||"dashed-label"},!n&&Q.a.createElement(yt,{className:"m-bottom-3"}),Q.a.createElement("div",{className:"max-100 p-x-4"},Q.a.createElement(at.a,{use:"help",className:"m-bottom-1 align-center text-center word-break-break-word flex-column"},t)),!n&&Q.a.createElement(yt,{className:"m-bottom-3"}))}Ct.displayName="DashedLabel";Ct.propTypes=(ht={children:p.a.node.isRequired},Object(r.a)(ht,"data-test-id",p.a.string),Object(r.a)(ht,"transparent",p.a.bool),ht);var xt=Ct,kt=n("E7sj"),Et=n.n(kt),Tt=n("0N9h"),It=n("TIjT"),wt=n("tyHp"),Rt=n("23im"),St=n("cPln"),At=["gmail_extra","gmail_quote","hs_reply","x_hs_reply_wrap"],Mt="divRplyFwdMsg",Pt=function(e,t){return t===Mt||e&&e.contains&&At.some(function(t){return e.contains(t)})},Nt=function(e){var t=e.node,n=t.classList,a=t.id,r=t.attributes,i=void 0===r?[]:r;if(Pt(n,a)){var o=Ut.createElement("span");Object.keys(i).forEach(function(e){var t=i[e];o.setAttribute(t.nodeName,t.nodeValue)});o.innerHTML="";o.setAttribute("data-email-reply","");return{node:o}}return null},qt=["hs_signature"],_t=function(e){return e&&e.contains&&qt.some(function(t){return e.contains(t)})},Lt=function(e){var t=e.node,n=t.classList,a=t.attributes,r=void 0===a?[]:a;if(_t(n)){var i=Ut.createElement("span");Object.keys(r).forEach(function(e){var t=r[e];i.setAttribute(t.nodeName,t.nodeValue)});i.innerHTML="";i.setAttribute("data-email-signature","");return{node:i}}return null},Ft=["position","top","bottom","left","right","z-index","clear","float","background-image","white-space"],zt=function(e){var t=e.node;if(t&&t.style&&t.style.length>0&&t.style.removeProperty){Ft.forEach(function(e){return t.style.removeProperty(e)});return{node:t}}return null},Dt=function(e){var t=e.node,n=e.node_name;if(t&&"img"===n&&t.attributes){t.attributes["data-original-height"]&&t.setAttribute("height",t.attributes["data-original-height"].value);t.attributes["data-original-width"]&&t.setAttribute("width",t.attributes["data-original-width"].value);t.attributes["data-full-size-src"]&&t.setAttribute("src",t.attributes["data-full-size-src"].value);return{node:t}}return null},Bt=function(e){var t=e.node;if("div"===e.node_name&&t&&t.classList&&t.classList.contains("gmail_default")){var n=Ut.createElement("span");Object.keys(t.attributes).forEach(function(e){var a=t.attributes[e];n.setAttribute(a.nodeName,a.nodeValue)});n.innerHTML=t.innerHTML.trim();return{node:n}}return null},Ut=document.implementation.createHTMLDocument(""),Qt={transformers:[Kt,Nt,Lt,zt,Bt,Dt],dom:Ut,elements:["b","blockquote","br","caption","cite","code","col","colgroup","dd","dl","dt","em","figure","h1","h2","h3","h4","h5","h6","i","img","li","ol","p","pre","q","small","strike","strong","sub","sup","table","tbody","td","tfoot","th","thead","tr","u","ul","font","div","span","a"],attributes:{__ALL__:["style","align","valign","width","height"],blockquote:["cite"],col:["span"],colgroup:["span"],figure:["style"],ol:["start","type"],q:["cite"],img:["title","alt","src"],table:["summary","bgcolor"],td:["abbr","axis","colspan","rowspan","bgcolor"],th:["abbr","axis","colspan","rowspan","scope","bgcolor"],ul:["type"],font:["size"],a:["href","title"],span:["data-at-mention","data-owner-id","contenteditable","data-email-reply"]},add_attributes:{a:{target:"_blank"}},remove_contents:["script"],protocols:{a:{href:["http","https"]}}},Ht=function(e,t){return"p"===t&&e&&e.classList&&e.classList.contains("MsoNormal")&&e.children&&e.children.length},Vt=function(e){return e&&!e.children.legnth&&"o:p"===e.tagName.toLowerCase()&&e.innerHTML.includes("&nbsp;")},Wt=function(e){return e&&"span"===e.tagName.toLowerCase()&&Vt(e.firstElementChild)},Yt=function(e){return!!e.getElementsByTagName("img").length},Kt=function e(t){var n=t.node,a=t.node_name;if(Ht(n,a)){var r=n.firstElementChild;if(Vt(r)||Wt(r)){if(Yt(n)){n.removeChild(r);return e({node:n,node_name:"p"})}return{node:Ut.createElement("br")}}var i=Ut.createElement("div");Object.keys(n.attributes).forEach(function(e){var t=n.attributes[e];i.setAttribute(t.nodeName,t.nodeValue)});i.innerHTML=n.innerHTML.trim().replace(/&nbsp;/g,"");return{node:i}}return null},Gt=n("JuOs"),Xt=n.n(Gt),Zt=function(e){return new Xt.a(e)},Jt=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return Object.assign.apply(Object,[new Error].concat(n,[{message:e}]))},$t=function(e){setTimeout(function(){throw e},0)},en=function(e){Array.from(e.querySelectorAll("br + [data-email-reply]")).forEach(function(e){var t=e.previousElementSibling;t&&t.nodeName&&"br"===t.nodeName.toLowerCase()&&t.classList&&t.classList.add("display-none")})},tn=Ut.body,nn=Object(te.a)(function(e,t){var n=Ut.createElement("div");try{tn.innerHTML=e;var a=Object.assign({},Qt);a.transformers=t;var r=Zt(a).clean_node(tn).cloneNode(!0);n.appendChild(r);en(n)}catch(e){var i=Jt("Error sanitizing email message: "+e.message,e);$t(i)}return n.innerHTML}),an=Object(te.a)(function(e){return nn(e,[Kt,Bt,zt,Dt])}),rn=Object(te.a)(function(e){if(!e)return null;var t=document.createElement("div");t.innerHTML=an(e);document.body.appendChild(t);var n=t.innerText;document.body.removeChild(t);return n}),on=n("z1kt"),sn=[Rt.a,It.a,wt.a,St.a],cn=Object(te.a)(function(e){setTimeout(function(){Object(Me.a)(sn.some(function(t){return e instanceof t}),"hasTextContent: Unsupported message record type %s supplied",Object(Tt.a)(e))},0);var t=Object(on.f)(e),n=Object(we.getRichText)(e)||Object(we.getPlainText)(e);return t||Boolean(n&&n.length&&rn(n))}),un=n("lLpL"),ln=b.a.div.withConfig({displayName:"ContentText__ContentTextWrapper",componentId:"sc-1bbrnzd-0"})(["word-wrap:break-word;box-sizing:border-box;width:100%;white-space:pre-wrap;a{font-weight:inherit;text-decoration:underline;}"]),dn=function(e){Object(l.a)(t,e);function t(){Object(o.a)(this,t);return Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e["aria-label"],n=e.contentText,a=e.onClickAction;return Q.a.createElement(ln,null,Q.a.createElement("div",{"aria-label":t,"data-test-id":"primary-message-content",dangerouslySetInnerHTML:{__html:Object(un.a)(n,{shouldPreserveNewlines:!0})},onClick:a}))}}]);return t}(U.PureComponent);dn.displayName="ContentText";dn.propTypes={"aria-label":p.a.string,contentText:p.a.string.isRequired,onClickAction:p.a.func};dn.defaultProps={onClickAction:function(){}};var pn=n("xq+X"),mn=function(e){return Object(pn.a)(["metadata","officeHoursStartTime"],e)},hn=function(e){return Object(pn.a)(["officeHoursStartTime"],e)},fn=function(e){return e["@type"]===gt.q?hn(e)&&hn(e)-(new Date).getTime()<0:mn(e)&&mn(e)-(new Date).getTime()<0},bn=function(e){var t=e.message;return t["@type"]===gt.q||cn(t)?fn(t)?null:Q.a.createElement(xt,{transparent:!0,labelPadding:"m-y-1"},Q.a.createElement(dn,{"aria-label":Et.a.text("conversations-visitor-message-history.systemMessage"),contentText:Object(we.getRichText)(t)||Object(we.getPlainText)(t)})):null};bn.displayName="AvailabilityMessage";bn.propTypes={message:p.a.oneOfType([Object(h.a)("PubNubMessageRecord"),Object(h.a)("TypicalResponseTimeMessage"),Object(h.a)("OfficeHoursMessage")]).isRequired};var gn=bn,vn=["id"],On=["timestamp"],jn=(Object(pn.a)(vn),Object(pn.a)(On)),yn={MY:"i18n.dateTime.monthAndYear",MD:"i18n.dateTime.monthAndDay",QY:"i18n.dateTime.quarterAndYear",WMDY:"i18n.dateTime.weekDayAndMonthAndDayAndYear"},Cn=function(e){var t=e.value,n=e.type,a=e.format,r=e.length,i=n?Et.a.moment[n](t):t,o="",s="",c="";if("s"===r){var u=Object.keys(Et.a.translations.en.i18n.dateTime.shortForm.months)[i.month()];o=Et.a.text("i18n.dateTime.shortForm.months."+u,{locale:Et.a.locale});s=i.format("ddd");c=i.format("ll")}else{o=i.format("MMMM");s=i.format("dddd");c=i.format("LL")}var l={monthName:o,locale:Et.a.locale};switch(a){case"MD":l.dayNumber=i.date();break;case"QY":l.quarterNumber=i.quarter();l.yearNumber=i.year().toString();break;case"WMDY":l.weekDay=s;l.fullDate=c;break;default:l.yearNumber=i.year().toString()}return Et.a.text(yn[a],l)},xn=function(e,t){return Cn({value:e,type:t,format:"MD",length:"m"})},kn=Object(U.memo)(function(e){var t=e.message,n=e.labelPadding,a=jn(t),r=xn(a,"userTz");return Q.a.createElement(xt,{labelPadding:n},Q.a.createElement(at.a,{use:"help"},r))});kn.displayName="DateLabelMessage";kn.propTypes={labelPadding:p.a.string,message:Object(h.a)("DateMessage").isRequired};var En=kn,Tn=b.a.div.withConfig({displayName:"DateLabel__StyleWrapper",componentId:"iwr3bm-0"})(["","{border-color:",";}"],yt,g.f),In=function(e){return Q.a.createElement(Tn,null,Q.a.createElement(En,Object.assign({},e,{labelPadding:"m-y-3"})))};In.displayName="DateLabel";In.propTypes=En.propTypes;var wn=In,Rn=n("mqjQ"),Sn=n("zwQg"),An=n("bTtM"),Mn=n("QYOI"),Pn=function(){return Q.a.createElement("i",null,Q.a.createElement(rt.a,{message:"conversations-message-history.noContent"}))};Pn.displayName="NoContentLabel";var Nn=Pn,qn=n("r1tY"),_n=["fileId"],Ln=["fileMetadata"],Fn=["thumbnailMetadata"],zn=(Object(pn.a)(_n),Object(pn.a)(Ln)),Dn=(Object(pn.a)(Fn),["expiresAt"]),Bn=["url"],Un=["name"],Qn=["extension"],Hn=["type"],Vn=["fileSize"],Wn=["width"],Yn=["height"],Kn=(Object(pn.a)(Dn),Object(pn.a)(Bn)),Gn=Object(pn.a)(Un),Xn=Object(pn.a)(Qn),Zn=Object(pn.a)(Hn),Jn=Object(pn.a)(Vn),$n=Object(pn.a)(Wn),ea=Object(pn.a)(Yn),ta=function(e){var t=Gn(e),n=Xn(e);return n?t+"."+n:t},na=n("lbaU"),aa=n("sURU"),ra=b.a.div.withConfig({displayName:"InlineImageAttachment__InlineImageAttachmentWrapper",componentId:"u28w74-0"})(["display:block;max-width:100%;"]),ia=function(e){Object(l.a)(t,e);function t(e){var n;Object(o.a)(this,t);(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).hasLoadedImage=function(){n.setState({hasLoaded:!0})};n.state={hasLoaded:!1};return n}Object(s.a)(t,[{key:"getDimensions",value:function(){var e=this.props,t=e.maxWidth,n=e.width,a=e.height;return!this.state.hasLoaded&&t&&n&&a?n<=t?{width:n,height:a}:{width:t,height:a*(t/n)}:{}}},{key:"render",value:function(){var e=this.props,t=e.name,n=e.url,a=this.getDimensions(),r=a.width,i=a.height;return Q.a.createElement(ra,null,Q.a.createElement(aa.a,{href:n,target:"_blank","data-test-id":"inline-image-attachment"},Q.a.createElement(na.a,{alt:t,src:n,width:r,height:i,style:{minHeight:i},onLoad:this.hasLoadedImage})))}}]);return t}(U.PureComponent);ia.displayName="InlineImageAttachment";ia.propTypes={height:p.a.number,maxWidth:p.a.number,name:p.a.string.isRequired,url:p.a.string.isRequired,width:p.a.number};var oa=ia,sa="IMG",ca=function(e){return e.filter(function(e){var t=zn(e),n=Zn(t),a=Xn(t);return Boolean(n===sa&&"svg"!==a)})},ua=function(e){return e.filter(function(e){var t=zn(e),n=Zn(t),a=Xn(t);return Boolean(n!==sa||"svg"===a)})},la=function(e){return e.some(function(e){var t=zn(e),n=Zn(t),a=Xn(t);return Boolean(n===sa&&"svg"!==a)})},da=300,pa=b.a.div.withConfig({displayName:"InlineImageAttachments__FileAttachmentsWrapper",componentId:"kc2ror-0"})(["cursor:pointer;box-sizing:border-box;width:100%;max-width:","px;display:block;margin-bottom:16px;margin-top:8px;"],da),ma=function(e){Object(l.a)(t,e);function t(e){var n;Object(o.a)(this,t);(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={maxWidth:da};n.wrapperRef=Object(U.createRef)();return n}Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=Object(qn.findDOMNode)(this.wrapperRef.current);e&&e.offsetWidth&&e.offsetWidth!==this.state.maxWidth&&this.setState({maxWidth:e.offsetWidth})}},{key:"render",value:function(){var e=this,t=this.props.fileAttachments;return Q.a.createElement(pa,{ref:this.wrapperRef},ca(t).map(function(t,n){var a=zn(t),r=ta(a),i=Kn(a),o=$n(a),s=ea(a);return Q.a.createElement(oa,{key:"image-"+n,name:r,url:i,width:o,height:s,maxWidth:e.state.maxWidth})}))}}]);return t}(U.PureComponent);ma.displayName="InlineImageAttachments";ma.propTypes={fileAttachments:p.a.instanceOf(Mn.List)};var ha=ma,fa=n("/MuR"),ba=n("064J"),ga=n("o5Ko"),va=Object(U.createContext)(Object(ga.a)()),Oa=n("CbkJ"),ja=n("TSck"),ya=function(e){return Q.a.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 20 24"},e),Q.a.createElement("defs",null,Q.a.createElement("path",{d:"M14.466 0c.076 0 .153.008.233.023.1.02.196.059.288.104.023.011.046.023.068.037.09.052.177.111.252.187l6.345 6.4c.075.076.135.163.186.255.013.023.025.045.036.068.045.093.083.19.103.295.015.075.023.153.023.231v13.2c0 1.884-1.468 3.2-3.569 3.2H6.534c-2.1 0-3.568-1.316-3.568-3.2V3.6c0-1.985 1.6-3.6 3.568-3.6zm-1.133 2H6.25C5.56 2 5 2.56 5 3.25v17.917c0 .689.68.833 1.25.833h12.5c.57 0 1.25-.144 1.25-.833v-12.5h-4.583c-1.149 0-2.084-.935-2.084-2.084V2z",id:"file__a"})),Q.a.createElement("use",{xlinkHref:"#file__a"}))};ya.displayName="SVGFile";var Ca=ya,xa=b.a.div.withConfig({displayName:"FileAttachmentTile__FileAttachmentTileWrapper",componentId:"sc-100mjhi-0"})(["max-width:300px;"]),ka=function(e){Object(l.a)(t,e);function t(){Object(o.a)(this,t);return Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}Object(s.a)(t,[{key:"render",value:function(){var e=this.props.fileMetadata,t=ta(e),n=Kn(e),a=Jn(e);return Q.a.createElement(xa,null,Q.a.createElement(Oa.a,{onClick:function(){return window.open(n)},fileName:t,fileInfo:Q.a.createElement(ba.a,{value:a}),preview:Q.a.createElement(ja.a,{icon:Q.a.createElement(Ca,null),size:"sm"})}))}}]);return t}(U.PureComponent);ka.contextType=va;ka.displayName="FileAttachmentTile";ka.propTypes={fileMetadata:Object(h.a)("FileMetadataRecord").isRequired};var Ea=ka,Ta=Object(le.a)("tileBackgroundColor"),Ia=b.a.div.withConfig({displayName:"AttachmentsFooter__AttachmentsFooterWrapper",componentId:"p0ee93-0"})(["cursor:pointer;box-sizing:border-box;display:block;background-color:",";"],function(e){return e.backgroundColor}),wa=b()(Ea).withConfig({displayName:"AttachmentsFooter__StyledFileAttachmentTile",componentId:"p0ee93-1"})(["background-color:",";"],function(e){return e.backgroundColor||"rgba(255, 255, 255, 0.5)"}),Ra=function(e){Object(l.a)(t,e);function t(){Object(o.a)(this,t);return Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.fileAttachments;return Q.a.createElement(Ia,{backgroundColor:me(this.context)},t.map(function(t,n){return Q.a.createElement(wa,{key:n,fileMetadata:zn(t),backgroundColor:Ta(ve(e.context))})}))}}]);return t}(U.PureComponent);Ra.contextType=ye;Ra.displayName="AttachmentsFooter";Ra.propTypes={fileAttachments:p.a.instanceOf(Mn.List).isRequired};var Sa=Ra,Aa=/^rgb/i,Ma=function(e){var t,n,a;try{if(Aa.test(e)){var r=e.match(/(\d+)\D+(\d+)\D+(\d+)/);t=parseInt(r[1],10);n=parseInt(r[2],10);a=parseInt(r[3],10)}else{var i=e.toLowerCase().replace(/^#/,"");3===i.length&&(i=i.replace(/([0-9a-f])/g,"$1$1"));t=parseInt(i.substring(0,2),16);n=parseInt(i.substring(2,4),16);a=parseInt(i.substring(4,6),16)}if([t,n,a].some(isNaN))return{}}catch(e){return{}}return{r:t,g:n,b:a}},Pa=function(e){var t=Ma(e),n=t.r,a=t.g,r=t.b;if([n,a,r].some(isNaN))return{hue:0,saturation:0,lightness:0};var i,o=n/255,s=a/255,c=r/255,u=Math.max(o,s,c),l=Math.min(o,s,c),d=(u+l)/2,p=u-l;if(0===p)return{hue:0,saturation:0,lightness:d};var m=d>.5?p/(2-u-l):p/(u+l);switch(u){case o:i=(s-c)/p+(s<c?6:0);break;case s:i=(c-o)/p+2;break;default:i=(o-s)/p+4}i*=60;return{hue:i=Math.round(i),saturation:m,lightness:d}},Na=function(e){var t=e<0?0:e>1?1:e;return Math.round(100*t)+"%"},qa=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1,n=Pa(e),a=n.hue,r=n.saturation,i=n.lightness;return"hsl("+[a,Na(r),Na(i+t)].join(", ")+")"},_a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;return qa(e,-t)},La=n("y+AS"),Fa=n.n(La),za=b.a.div.withConfig({displayName:"CommonMessageContent__HyperlinkStyleWrapper",componentId:"sc-1x69nol-0"})([""," a{color:",";&:hover{color:",";}&:active{color:",";}}"],Be,function(e){return e.hyperlinkColor},function(e){var t=e.hyperlinkColor;return t&&_a(t)},function(e){var t=e.hyperlinkColor;return t&&_a(t,.2)}),Da=function(e){Object(l.a)(t,e);function t(){Object(o.a)(this,t);return Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}Object(s.a)(t,[{key:"isSentFromVisitor",value:function(){return Object(we.getSenderType)(this.props.message)===G.e}},{key:"isClickableLink",value:function(e){return new RegExp("([a-zA-Z0-9]+://)?([a-zA-Z0-9_]+:[a-zA-Z0-9_]+@)?([a-zA-Z0-9.-]+\\.[A-Za-z]{2,4})(:[0-9]+)?(/.*)?").test(e)}},{key:"handleOnClickEvent",value:function(e){e.persist();"A"===e.target.tagName&&this.props.toggleOpen(!1)}},{key:"renderContentText",value:function(){var e=this.props,t=e.message,n=e.mobile,a=Object(we.getRichText)(t)||Object(we.getPlainText)(t),r=n&&this.isClickableLink(a);if(!a)return null;var i=Object(we.getRichText)(t)&&Fa.a.link(a,{stripPrefix:!1});return Q.a.createElement(dn,{contentText:i||a,"aria-label":this.isSentFromVisitor()?Et.a.text("conversations-visitor-message-history.myMessage"):Et.a.text("conversations-visitor-message-history.agentMessage"),onClickAction:r?this.handleOnClickEvent.bind(this):null})}},{key:"renderMessageSection",value:function(){var e=this.props,t=e.fileAttachments,n=e.isLastMessage,a=e.message,r=!Object(fa.b)(a)&&t&&la(t),i=cn(a);return r||i?Q.a.createElement(De,{isLastMessage:n},this.renderContentText(),r&&Q.a.createElement(ha,{fileAttachments:t})):null}},{key:"renderAttachmentsSection",value:function(){var e=this.props,t=e.fileAttachments,n=e.message,a=Object(fa.b)(n)?t:ua(t);return a&&a.size?Q.a.createElement(De,null,Q.a.createElement(Sa,{fileAttachments:a})):null}},{key:"render",value:function(){var e=this.renderMessageSection(),t=this.renderAttachmentsSection(),n=this.isSentFromVisitor();return Q.a.createElement(za,{hyperlinkColor:n&&ge(this.context)},Q.a.createElement(Ue,null,e,t,!e&&!t&&Q.a.createElement(De,null,Q.a.createElement(Nn,null)),this.props.quickReplySelect&&this.props.quickReplySelect()))}}]);return t}(U.PureComponent);Da.contextType=ye;Da.displayName="CommonMessageContent";Da.propTypes={fileAttachments:p.a.instanceOf(Mn.List),isLastMessage:p.a.bool,message:p.a.oneOfType([Object(h.a)("PubNubMessageRecord"),Object(h.a)("CommonMessage")]).isRequired,mobile:p.a.bool,quickReplySelect:p.a.oneOfType([p.a.bool,p.a.func]),toggleOpen:p.a.func};var Ba=Da,Ua=function(e){Object(l.a)(t,e);function t(){Object(o.a)(this,t);return Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.fileAttachments,n=e.message,a=e.positionDescriptors,r=Object(Sn.a)(n),i=a.includes(Rn.c);return Q.a.createElement(Ze,{positionDescriptors:a,use:J.c},Q.a.createElement(Ba,{fileAttachments:t,isLastMessage:i,message:r}),i&&Q.a.createElement(He,null,Q.a.createElement(at.a,{use:"help"},Q.a.createElement(An.a,{message:"conversations-visitor-message-history.status.publishing.UNPUBLISHED"}))))}}]);return t}(U.PureComponent);Ua.displayName="ActivelyPublishingMessage";Ua.propTypes={fileAttachments:p.a.instanceOf(Mn.List),message:Object(h.a)("ActivelyPublishing").isRequired,positionDescriptors:$.a.isRequired};var Qa=Ua,Ha=n("BvgU"),Va=n("fA4S"),Wa=n("+ADX"),Ya=n("L1d0"),Ka=n("fjDW"),Ga=b()(Va.a).withConfig({displayName:"EmailCaptureInput__StyledVizExButton",componentId:"sc-1fnttyu-0"})(["padding:0;width:100% !important;height:100%;"]),Xa=b.a.div.withConfig({displayName:"EmailCaptureInput__LoadingButtonContainer",componentId:"sc-1fnttyu-1"})(["width:38px;height:32px;margin:4px 4px 4px 0;"]),Za={disabled:p.a.bool,locale:p.a.string,onChange:p.a.func.isRequired,onKeyPress:p.a.func.isRequired,onSubmit:p.a.func,submissionState:p.a.oneOf(["ready","submitting","done"]),value:p.a.string},Ja=function(e){var t=e.disabled,n=e.value,a=e.onChange,r=e.onKeyPress,i=e.onSubmit,o=e.locale,s=e.submissionState;return Q.a.createElement(Ka.a,{"aria-label":Et.a.text("conversations-visitor-message-history.email-capture.placeholderText",{locale:o}),value:n,placeholder:Et.a.text("conversations-visitor-message-history.email-capture.placeholderText",{locale:o}),"data-test-id":"email-capture-input",onChange:a,onKeyPress:r,suffix:Q.a.createElement(Xa,null,Q.a.createElement(Wa.a,{currentState:s,onClick:i,disabled:t,"aria-label":Et.a.text("conversations-visitor-message-history.email-capture.sendEmail",{locale:o}),"data-test-id":"email-capture-submit-button",Button:Ga},Q.a.createElement(ja.a,{icon:Q.a.createElement(Ya.a,{color:g.q})})))})};Ja.displayName="EmailCaptureInput";Ja.propTypes=Za;var $a=Ja,er=b.a.span.withConfig({displayName:"CaptureSection__ErrorMessage",componentId:"sc-1io6djn-0"})(["color:",";font-size:12px;line-height:18px;text-align:left;margin-top:9px;display:flex;"],g.e),tr=function(e){var t=e.message,n=e.email,a=e.errorMessage,r=e.onChange,i=e.onKeyPress,o=e.onSubmit,s=e.submissionState;return Q.a.createElement(De,{key:"email-prompt-capture-section"},Q.a.createElement(dn,{"aria-label":Et.a.text("conversations-visitor-message-history.agentMessage"),contentText:Object(we.getPlainText)(t)}),Q.a.createElement($a,{disabled:!n,value:n,onChange:r,onKeyPress:i,onSubmit:o,submissionState:s}),Q.a.createElement(er,{"aria-live":"assertive"},a))};tr.displayName="CaptureSection";tr.propTypes={email:p.a.string,errorMessage:p.a.string,message:Object(h.a)("PubNubMessageRecord").isRequired,onChange:p.a.func.isRequired,onKeyPress:p.a.func.isRequired,onSubmit:p.a.func.isRequired,submissionState:p.a.string.isRequired};var nr=n("3RBx"),ar=n("c0kh"),rr=ar.a,ir=ar.f,or=ar.h,sr=n("gJFg"),cr=function(e){var t=e.theme;return Object(f.css)(["box-shadow:0 0 0 1px ",";"],Object(sr.a)(or(t),40))},ur=function(e){var t=e.checked,n=e.theme;return Object(f.css)(["background-color:",";color:",";"],rr(n),!t&&Object(sr.a)(or(n),40))},lr=b.a.div.withConfig({displayName:"VizExCheckbox__CheckboxBox",componentId:"sc-1so4h75-0"})(["flex-shrink:0;height:16px;width:16px;transition:color 0.15s ease-out,background-color 0.15s ease-out;color:",";border-color:currentColor;border:2px solid;border-radius:3px;position:relative;",";",";"],function(e){var t=e.checked,n=e.theme;return t?or(n):ir(n)},function(e){var t=e.hover,n=e.theme,a=e.checked;return t&&ur({theme:n,checked:a})},function(e){var t=e.focus,n=e.theme;return t&&cr({theme:n})}),dr=b.a.label.withConfig({displayName:"VizExCheckbox__CheckboxWrapper",componentId:"sc-1so4h75-1"})(["position:relative;display:inline-flex;flex-direction:row;align-items:center;font-size:16px;cursor:pointer;:hover ","{","}input:focus + ","{","}"],lr,ur,lr,cr),pr=b.a.input.withConfig({displayName:"VizExCheckbox__CheckboxInput",componentId:"sc-1so4h75-2"})(["position:absolute;top:0;width:1px;height:1px;margin:-1px;padding:0;overflow:hidden;clip:rect(0,0,0,0);border:0;"]),mr=b.a.svg.withConfig({displayName:"VizExCheckbox__Indicator",componentId:"sc-1so4h75-3"})(["height:100%;width:100%;top:0;left:0;position:absolute;pointer-events:none;"]),hr=b.a.div.withConfig({displayName:"VizExCheckbox__ContentWrapper",componentId:"sc-1so4h75-4"})(["padding-left:8px;user-select:none;cursor:pointer;"]),fr=function(e){var t=e.onChange,n=e.theme,a=e.children,r=e.checked,i=e.focus,o=e.hover,s=Object(Je.a)(e,["onChange","theme","children","checked","focus","hover"]),c=Object(U.useRef)(null);return Q.a.createElement(dr,Object.assign({},s,{onClick:function(){c.current.focus()},"data-testid":"VizExCheckbox",checked:r,theme:n}),Q.a.createElement(pr,{ref:c,"data-testid":"VizExCheckbox-input",type:"checkbox",onChange:t}),Q.a.createElement(lr,{theme:n,checked:r,focus:i,hover:o},r&&Q.a.createElement(mr,{viewBox:"0 0 15 15.343"},Q.a.createElement("path",{d:"M1.013 8.11c0-.223.078-.412.234-.568l1.14-1.14c.155-.155.345-.233.568-.233s.413.077.57.233l2.46 2.47 5.492-5.5c.156-.156.346-.234.568-.234.224 0 .413.077.57.233l1.138 1.14c.156.155.234.345.234.568 0 .224-.078.414-.234.57l-6.06 6.06-1.14 1.14c-.155.155-.345.233-.568.233s-.413-.078-.57-.234l-1.138-1.14-3.03-3.03c-.156-.156-.234-.346-.234-.57z",fill:"currentColor"}))),a&&Q.a.createElement(hr,null,a))};fr.displayName="VizExCheckbox";fr.propTypes={checked:p.a.bool,children:p.a.node,focus:p.a.bool,hover:p.a.bool,onChange:p.a.func,theme:nr.a};var br=fr,gr=b.a.div.withConfig({displayName:"ConsentToCommunicate__BreakString",componentId:"ytpoga-0"})(["-ms-word-break:break-all;display:block;word-break:break-word;word-wrap:break-word;"]),vr=b()(at.a).withConfig({displayName:"ConsentToCommunicate__SmallNoParagraphPadding",componentId:"ytpoga-1"})(["p{margin-bottom:0;}"]),Or=function(e){var t=e.message,n=e.companyName,a=e.consentToCommunicate,r=e.onChange,i=Object(un.a)(t)||Et.a.text("conversations-visitor-message-history.email-capture.consentToCommunicate",{accountName:n});return Q.a.createElement(br,{checked:a,onChange:r},Q.a.createElement(vr,{use:"help"},Q.a.createElement(gr,null,Q.a.createElement("span",{dangerouslySetInnerHTML:{__html:i}}))))};Or.displayName="ConsentToCommunicate";Or.propTypes={companyName:p.a.string,consentToCommunicate:p.a.bool.isRequired,message:p.a.string.isRequired,onChange:p.a.func.isRequired};var jr=Or,yr=/\s|@.{0,}@/,Cr=function(e){Object(l.a)(t,e);function t(e){var n;Object(o.a)(this,t);(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).onConsentChange=function(){n.setState({hasConsentedToCommunicate:!n.state.hasConsentedToCommunicate})};n.state={email:"",emailError:!1,hasConsentedToCommunicate:!1,submitFailure:!1,submissionState:"ready"};n.handleChange=n.handleChange.bind(Object(m.a)(n));n.handleKeyPress=n.handleKeyPress.bind(Object(m.a)(n));n.handleSubmit=n.handleSubmit.bind(Object(m.a)(n));return n}Object(s.a)(t,[{key:"handleChange",value:function(e){this.setState({email:e.target.value,emailError:!1,submitFailure:!1,submissionState:"ready"})}},{key:"handleKeyPress",value:function(e){var t=13;e.which===t&&this.handleSubmit()}},{key:"handleSubmit",value:function(){var e=this,t=this.props,n=t.sendVisitorEmailAddress,a=t.threadId,r=this.state,i=r.email,o=r.hasConsentedToCommunicate,s=i.trim();Ha.a.test(s)&&!s.match(yr)?this.setState({submissionState:"submitting"},function(){n({email:s,consentToCommunicate:o,threadId:a}).then(function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).error;e.setState({submitFailure:Boolean(t),submissionState:"done"})}).done()}):this.setState({emailError:!0,submissionState:"ready"})}},{key:"getValidationMessage",value:function(){switch(!0){case this.state.emailError:return Q.a.createElement(An.a,{message:"conversations-visitor-message-history.email-capture.invalid"});case this.state.submitFailure:return Q.a.createElement(An.a,{message:"conversations-visitor-message-history.email-capture.failed"});default:return null}}},{key:"render",value:function(){var e=this.props,t=e.companyName,n=e.consentToCommunicateMessage,a=e.hasVisitorEmail,r=e.message,i=e.positionDescriptors,o=e.requiresConsentToCommunicate,s=this.state,c=s.email,u=s.hasConsentedToCommunicate,l=this.getValidationMessage();return Q.a.createElement(Ze,{positionDescriptors:i,use:J.a},Q.a.createElement(Ue,null,a?Q.a.createElement(De,null,Q.a.createElement(An.a,{"data-test-id":"email-capture-success",message:"conversations-visitor-message-history.email-capture.thanks"})):Q.a.createElement(Q.a.Fragment,null,Q.a.createElement(tr,{message:r,email:c,errorMessage:l,onChange:this.handleChange,onKeyPress:this.handleKeyPress,onSubmit:this.handleSubmit,submissionState:this.state.submissionState}),o&&Q.a.createElement(De,{key:"email-prompt-content-section"},Q.a.createElement(jr,{message:n,companyName:t,consentToCommunicate:u,onChange:this.onConsentChange})))))}}]);return t}(U.PureComponent);Cr.displayName="EmailCapturePromptMessage";Cr.propTypes={companyName:p.a.string,consentToCommunicateMessage:p.a.string,hasVisitorEmail:p.a.bool.isRequired,message:p.a.oneOfType([Object(h.a)("PubNubMessageRecord"),Object(h.a)("EmailCapturePromptMessage")]).isRequired,positionDescriptors:$.a.isRequired,requiresConsentToCommunicate:p.a.bool,sendVisitorEmailAddress:p.a.func.isRequired,threadId:p.a.number.isRequired};var xr=Cr,kr=n("19qb"),Er=n("zC+/"),Tr=n("TGEe"),Ir=n("ib5I"),wr=n("LnxI"),Rr=n("qeXV"),Sr=Object(Ir.a)(Rr.getLatestWidgetData,function(e){return Object(wr.c)(e)}),Ar=Object(Ir.a)(Rr.getLatestWidgetData,Object(le.a)("companyName")),Mr=n("GfCx"),Pr=n("O3Qn"),Nr=n("V/zO"),qr=function(e){return{coloring:Object(Er.a)(e),companyName:Ar(e),consentToCommunicateMessage:Sr(e),hasVisitorEmail:Object(Mr.a)(e),requiresConsentToCommunicate:Object(Tr.a)(e),threadId:Object(Nr.getCurrentThreadId)(e)}},_r={sendVisitorEmailAddress:Pr.sendVisitorEmailAddress},Lr=Object(kr.connect)(qr,_r)(xr),Fr=function(e){return Q.a.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 28 25"},e),Q.a.createElement("path",{d:"M12 7.663c-.042-.286.044-.577.234-.796.192-.218.469-.344.76-.344h2.011c.292 0 .57.126.76.344.192.22.277.51.236.796l-1.006 6.992c-.07.492-.494.857-.995.857-.5 0-.925-.365-.995-.857l-1.006-6.992zm2 13.841c-1.11 0-2.01-.894-2.01-1.997 0-1.103.9-1.998 2.01-1.998 1.111 0 2.01.895 2.01 1.998s-.899 1.997-2.01 1.997zm3.001-19.783C16.375.643 15.253 0 14 0s-2.374.643-3 1.72L.47 19.838c-.627 1.078-.627 2.365 0 3.442C1.096 24.357 2.217 25 3.47 25H24.53c1.253 0 2.374-.643 3-1.72.627-1.078.627-2.365 0-3.443L17.001 1.721z",fillRule:"evenodd"}))};Fr.displayName="SVGWarning";var zr=Fr,Dr=function(e){Object(l.a)(t,e);function t(){Object(o.a)(this,t);return Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.fileAttachments,n=e.message,a=e.onRepublish,r=e.positionDescriptors,i=Object(Sn.a)(n);return Q.a.createElement(Ze,{positionDescriptors:r,use:J.c},Q.a.createElement(Ba,{fileAttachments:t,isLastMessage:!0,message:i}),Q.a.createElement(He,null,Q.a.createElement(at.a,{use:"error"},Q.a.createElement(ja.a,{icon:Q.a.createElement(zr,null),className:"m-right-1"}),Q.a.createElement(aa.a,{onClick:function(){return a(i)},use:"error"},Q.a.createElement(An.a,{message:"conversations-visitor-message-history.status.publishing.PUBLISH_FAILED"})))))}}]);return t}(U.PureComponent);Dr.displayName="FailedToPublishMessage";Dr.propTypes={fileAttachments:p.a.instanceOf(Mn.List),message:Object(h.a)("FailedToPublish").isRequired,onRepublish:p.a.func.isRequired,positionDescriptors:$.a.isRequired};var Br=Dr,Ur={onRepublish:n("AnBI").a},Qr=Object(kr.connect)(null,Ur)(Br),Hr=n("qI4+");function Vr(e){return"string"==typeof e}function Wr(e){return Vr(e)?e:e.has("label")?e.get("label"):e.get("value")}function Yr(e){return Vr(e)?e:e.get("value")}var Kr=n("d04J"),Gr=n("aHOs"),Xr=n("zSU9"),Zr=function(e){return Q.a.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 32 32"},e),Q.a.createElement("path",{d:"M29.92 2.58L11.33 21.17l-9.25-9.25c-.362-.362-.862-.586-1.415-.586-1.105 0-2.001.896-2.001 2.001 0 .553.224 1.053.586 1.415L9.92 25.41c.362.362.862.587 1.415.587s1.053-.224 1.415-.587l20-20c.362-.362.586-.862.586-1.415 0-1.105-.896-2.001-2.001-2.001-.553 0-1.053.224-1.415.586z"}))};Zr.displayName="SVGSuccess";var Jr=Zr,$r=b.a.div.withConfig({displayName:"QuickReplyGroup__ButtonWrapper",componentId:"sc-1lh4uzs-0"})(["margin-bottom:12px;> *{margin-right:8px;margin-bottom:8px;}> *:last-child{margin-right:0;}padding:8px;display:inline-block;"]),ei=b()(Va.a).withConfig({displayName:"QuickReplyGroup__LeftAlignButton",componentId:"sc-1lh4uzs-1"})(["text-align:left;"]),ti=function(e){Object(l.a)(t,e);function t(e){var n;Object(o.a)(this,t);(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleSendMulti=n.handleSendMulti.bind(Object(m.a)(n));n.handleQuickReplySend=n.handleQuickReplySend.bind(Object(m.a)(n));n.handleSendIndividual=n.handleSendIndividual.bind(Object(m.a)(n));n.handleSelect=n.handleSelect.bind(Object(m.a)(n));n.state={selected:Object(Mn.Set)()};return n}Object(s.a)(t,[{key:"hasSelected",value:function(){return this.state.selected.size>0}},{key:"handleSelect",value:function(e){this.setState(function(t){var n=t.selected;return{selected:n.includes(e)?n.delete(e):n.add(e)}})}},{key:"handleSendMulti",value:function(){var e=this.props.multiSelect,t=this.state.selected;if(e&&this.hasSelected()){var n=t.map(Wr).join(", ");this.handleQuickReplySend(n,t)}}},{key:"handleSendIndividual",value:function(e){if(!this.props.multiSelect){var t=Object(Mn.List)([e]),n=Wr(e);this.handleQuickReplySend(n,t)}}},{key:"handleQuickReplySend",value:function(e,t){var n=this.props,a=n.message;(0,n.publishMessage)({text:e,quickReply:Object(Kr.a)(a).set("quickReplies",t.toJS())})}},{key:"renderOptions",value:function(){var e=this.props,t=e.options,n=e.multiSelect,a=e.disabled,r=this.state.selected,i=n?this.handleSelect:this.handleSendIndividual;return t.map(function(e){var t=function(){return i(e)},o=r.includes(e),s=Yr(e),c=Wr(e);if(!s||!c)return null;var u=n&&Q.a.createElement(br,{className:"m-right-2",checked:o,onChange:t},c);return Q.a.createElement(ei,{key:"quickreply."+s,onClick:t,disabled:a,size:"sm"},u||c)})}},{key:"renderSendButton",value:function(){var e=this.props,t=e.disabled;if(!e.multiSelect)return null;var n=!this.hasSelected()||t;return Q.a.createElement(Xr.a,{disabled:n,onClick:this.handleSendMulti,key:"send-button",size:"sm"},Q.a.createElement(ja.a,{icon:Q.a.createElement(Jr,null),size:"sm"}))}},{key:"render",value:function(){return Q.a.createElement($r,{"data-test-id":"quick-reply-group"},[].concat(Object(Gr.a)(this.renderOptions()),[this.renderSendButton()]))}}]);return t}(Q.a.Component);ti.contextType=ye;ti.defaultProps={multiSelect:!1,hasSentReply:!1};ti.displayName="QuickReplyGroup";ti.propTypes={disabled:p.a.bool.isRequired,message:p.a.oneOfType([Object(h.a)("CommonMessage"),Object(h.a)("PubNubMessageRecord"),Object(h.a)("InitialMessage")]).isRequired,multiSelect:p.a.bool.isRequired,options:p.a.instanceOf(Mn.Set).isRequired,publishMessage:p.a.func};var ni=ti,ai=7,ri=(n("FS71"),ar.f),ii=ar.e,oi=(ar.a,ar.b,ar.g,ar.f,ar.h,ar.h),si=(ar.h,"__PLACEHOLDER_VALUE__"),ci=b.a.select.withConfig({displayName:"VizExMobileSelect__StyledSelect",componentId:"y7f1s9-0"})(["appearance:none;background:none;border-radius:3px;border:1px solid transparent;color:inherit;cursor:inherit;font-size:16px;margin:0;outline:none;padding:8px 32px 10px 10px;width:100%;height:40px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;&::-ms-expand{display:none;}:focus::-ms-value{color:",";background:transparent;}"],function(e){var t=e.theme;return Object(ar.i)(t)}),ui=b.a.div.withConfig({displayName:"VizExMobileSelect__SelectContainer",componentId:"y7f1s9-1"})(["background-color:",";border-radius:3px;border:1px solid ",";cursor:pointer;display:block;font-size:16px;height:40px;line-height:22px;padding:0;position:relative;text-align:left;transition:all 0.15s ease-out;width:100%;&::after{border-color:transparent;border-style:solid;border-width:0.375em;display:inline-block;vertical-align:middle;border-top-color:",";margin-top:0.375em;margin-top:-3px;content:' ';position:absolute;top:50%;right:1em;z-index:2;pointer-events:none;}"],function(e){var t=e.theme;return ii(t)},function(e){var t=e.theme;return ri(t)},function(e){var t=e.theme;return oi(t)}),li=function(e){var t=e.options,n=e.disabled,a=e.value,r=e.onChange,i=e.placeholder,o=e.theme,s=Object(Je.a)(e,["options","disabled","value","onChange","placeholder","theme"]),c=t.map(function(e){var t=e.value,n=e.text;return Q.a.createElement("option",{value:t,key:t},n)});return Q.a.createElement(ui,{theme:o},Q.a.createElement(ci,Object.assign({},s,{"data-testid":"VizExSelect",disabled:n,defaultValue:si,value:a,onChange:r,theme:o}),i&&Q.a.createElement("option",{disabled:!0,value:si},i),c))};li.displayName="VizExMobileSelect";li.propTypes={disabled:p.a.bool,onChange:p.a.func.isRequired,options:p.a.arrayOf(p.a.shape({text:p.a.string,value:p.a.string})).isRequired,placeholder:p.a.string,theme:nr.a,value:p.a.string};var di=li,pi="__PLACEHOLDER_VALUE__",mi=function(e){var t=e.quickReplyOptions,n=e.onChange,a=e.disabled,r=e.value,i=e.placeholder,o=Object(U.useMemo)(function(){return t.map(function(e){var t=Yr(e);return{text:Wr(e),value:t}}).toJS()},[t]);return Q.a.createElement(di,{options:o,onChange:n,disabled:a,defaultValue:pi,value:r,placeholder:i})};mi.displayName="QuickReplySelect";mi.propTypes={disabled:p.a.bool,onChange:p.a.func.isRequired,placeholder:p.a.string,quickReplyOptions:p.a.instanceOf(Mn.OrderedSet).isRequired,value:p.a.string};var hi=mi,fi=n("9TFD"),bi=n("ZovQ"),gi=n("+GUp"),vi=n("A3tK"),Oi=n("+cIb"),ji=Object(te.a)(function(e){var t=e.companyLogo,n=e.customChatName;return new Oi.a({avatar:t,firstName:n,senderType:G.a})}),yi=n("erfM"),Ci=n("lPZn"),xi=Object(te.a)(function(e,t,n){var a=Object(yi.agentTypeToSenderType)(Object(Ci.getAgentType)(e)||n);return new Oi.a({id:Object(Ci.getUserId)(e)||t,avatar:Object(Ci.getAvatar)(e),firstName:Object(Ci.getFirstName)(e),email:Object(Ci.getEmail)(e),lastName:Object(Ci.getLastName)(e),senderType:a})}),ki=b.a.div.withConfig({displayName:"InitialMessageAvatar__MultiAvatarWrapper",componentId:"sc-1og2inh-0"})(["width:100%;height:100%;display:flex;justify-content:center;flex-wrap:wrap;margin-right:4px;margin-left:-4px;& > *{flex:1;line-height:1;position:relative;& > *{position:absolute;left:0;bottom:-8px;}div{background-color:white;}}"]),Ei=function(e){Object(l.a)(t,e);function t(){Object(o.a)(this,t);return Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}Object(s.a)(t,[{key:"getSenderAvatars",value:function(){var e=this.props,t=e.chatHeadingConfig,n=e.sender,a=e.sendFromResponders;if(Object(gi.isFromBot)(n))return Object(Mn.List)([n]);if(a.size)return Object(vi.a)(xi,a);var r=Object(fi.a)(t);return r?Object(Mn.List)([ji({companyLogo:r,customChatName:Object(bi.a)(t)})]):Object(Mn.List)()}},{key:"renderAvatars",value:function(){var e=this.getSenderAvatars();if(!e.size)return Q.a.createElement(Z,null);if(1===e.size){var t=e.get(0);return Q.a.createElement(Z,{sender:t})}var n=2===e.size;return Q.a.createElement(ki,null,e.map(function(e,t){return Q.a.createElement(Z,{key:t,sender:e,size:n?"xs":"xxs"})}))}},{key:"render",value:function(){return Q.a.createElement(Le,null,this.renderAvatars())}}]);return t}(U.PureComponent);Ei.displayName="InitialMessageAvatar";Ei.propTypes={chatHeadingConfig:p.a.oneOfType([Object(h.a)("CompanyChatHeadingConfig"),Object(h.a)("OwnerChatHeadingConfig"),Object(h.a)("UsersAndTeamsChatHeadingConfig")]),sendFromResponders:p.a.instanceOf(Mn.List).isRequired,sender:Object(h.a)("Sender")};var Ti=Ei,Ii=function(e){Object(l.a)(t,e);function t(e){var n;Object(o.a)(this,t);(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleQuickReplySend=function(){var e=n.props,t=e.message,a=e.publishMessage,r=n.state.selectedQuickReply;a({text:Wr(r),quickReply:Object(Kr.a)(t).set("quickReplies",[r])})};n.handleQuickReplySelect=function(e){var t=e.target.value,a=n.props.message,r=Object(Kr.d)(a).filter(function(e){return Yr(e)===t}).first();n.setState({selectedQuickReply:r})};n.showQuickReplySelection=function(){var e=n.props.message,t=Object(Kr.d)(e),a=Object(Kr.b)(e);return n.showQuickReplies()&&t.count()>ai&&!a};n.renderQuickReplySelect=function(){var e=n.props,t=e.message,a=e.isThreadStarted,r=e.requiresExplicitConsentToProcess,i=n.state.selectedQuickReply,o=Object(Kr.d)(t);return Q.a.createElement("div",{className:"m-y-2"},Q.a.createElement(hi,{quickReplyOptions:o,disabled:r||!a,onChange:n.handleQuickReplySelect,value:Yr(i),placeholder:Et.a.text("conversations-visitor-message-history.quickReply.selectionPlaceholder")}))};n.renderQuickReplySendButton=function(){var e=n.props.isThreadStarted,t=n.state.selectedQuickReply;return Q.a.createElement(He,null,Q.a.createElement(Va.a,{disabled:!e||!Yr(t),onClick:n.handleQuickReplySend,size:"sm",use:"primary"},Q.a.createElement(rt.a,{message:"conversations-visitor-message-history.quickReply.selectionComplete"})))};n.state={selectedQuickReply:Object(Mn.Map)()};return n}Object(s.a)(t,[{key:"hasQuickReplyOptions",value:function(){var e=this.props.message,t=Object(we.getSenderType)(e);return Object(Kr.a)(e)&&t===G.b}},{key:"showQuickReplies",value:function(){var e=this.props,t=e.hasUnansweredQuickReplyMessage,n=e.positionDescriptors,a=t&&n.get(Rn.c);return this.hasQuickReplyOptions()&&a}},{key:"renderAvatar",value:function(){var e=this.props,t=e.chatHeadingConfig,n=e.message,a=e.senders,r=e.sendFromResponders,i=Object(we.getSenderId)(n),o=Object(we.getSenderType)(n),s=ae(i,o,a),c=Object(W.b)(s);return Q.a.createElement(Ti,{chatHeadingConfig:t,sender:c,sendFromResponders:r})}},{key:"renderQuickReplyGroup",value:function(){var e=this.props,t=e.isThreadStarted,n=e.message,a=e.publishMessage,r=e.requiresExplicitConsentToProcess,i=Object(Kr.d)(n),o=Object(Kr.b)(n);return Q.a.createElement(He,null,Q.a.createElement(ni,{disabled:r||!t,options:i,message:n,multiSelect:o,publishMessage:a,onSend:this.handleQuickReplySend}))}},{key:"renderContentSection",value:function(){var e,t,n=this.props.message;if(Boolean(Object(V.getType)(n))){e=Object(we.getPlainText)(n);t=Object(we.getRichText)(n)}else{e=Object(Hr.b)(n);t=Object(Hr.a)(n)}var a=Fa.a.link(t,{stripPrefix:!1});return Q.a.createElement(De,null,Q.a.createElement(dn,{"aria-label":Et.a.text("conversations-visitor-message-history.agentMessage"),contentText:a||e}),this.showQuickReplySelection()&&this.renderQuickReplySelect())}},{key:"renderMessageFooter",value:function(){var e=this.props.message,t=Object(Kr.d)(e),n=Object(Kr.b)(e);return this.showQuickReplySelection()?this.renderQuickReplySendButton():this.showQuickReplies()&&(t.count()<=ai||n)?this.renderQuickReplyGroup():null}},{key:"render",value:function(){var e=this.props.positionDescriptors,t=e.get(Rn.a);return Q.a.createElement(Ze,{positionDescriptors:e,use:J.a},t&&Q.a.createElement(We,null,this.renderAvatar()),Q.a.createElement(Ue,null,this.renderContentSection()),this.renderMessageFooter())}}]);return t}(U.PureComponent);Ii.displayName="InitialMessage";Ii.propTypes={chatHeadingConfig:p.a.oneOfType([Object(h.a)("CompanyChatHeadingConfig"),Object(h.a)("OwnerChatHeadingConfig"),Object(h.a)("UsersAndTeamsChatHeadingConfig")]),hasUnansweredQuickReplyMessage:p.a.bool,isThreadStarted:p.a.bool.isRequired,message:p.a.oneOfType([Object(h.a)("PubNubMessageRecord"),Object(h.a)("InitialMessage")]).isRequired,positionDescriptors:$.a.isRequired,publishMessage:p.a.func,requiresExplicitConsentToProcess:p.a.bool.isRequired,sendFromResponders:p.a.instanceOf(Mn.List).isRequired,senders:ee.a.isRequired};var wi=Ii,Ri=n("a4p2"),Si=n("N02q"),Ai=n("/11t"),Mi=n("Gbx4"),Pi=n("GAhl"),Ni=n("cep6"),qi=n("MS0j"),_i=function(e){var t=Object(Ni.a)(e);return{chatHeadingConfig:Object(Si.a)(e),sendFromResponders:Object(Ai.a)(e),hasUnansweredQuickReplyMessage:Object(Pi.a)(e,{thread:t}),isThreadStarted:Object(Ri.a)(t),mobile:Object(qi.getIsMobile)(e)}},Li={publishMessage:Mi.a},Fi=Object(kr.connect)(_i,Li)(wi),zi=function(e){return e?Et.a.moment.userTz(e).format("LT"):null},Di=function(e){var t=Object(we.getSenderType)(e);return Object(Kr.a)(e)&&t===G.b},Bi=function(e){Object(l.a)(t,e);function t(e){var n;Object(o.a)(this,t);(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleQuickReplySend=function(){var e=n.props,t=e.message,a=e.publishMessage,r=n.state.selectedQuickReply;a({text:Wr(r),quickReply:Object(Kr.a)(t).set("quickReplies",[r])})};n.handleQuickReplySelect=function(e){var t=e.target.value,a=n.props.message,r=Object(Kr.d)(a).filter(function(e){return Yr(e)===t}).first();n.setState({selectedQuickReply:r})};n.showQuickReplies=function(){var e=n.props,t=e.hasUnansweredQuickReplyMessage,a=e.message,r=e.positionDescriptors,i=t&&r.get(Rn.c);return Di(a)&&i};n.showQuickReplySelection=function(){var e=n.props.message,t=Object(Kr.d)(e),a=Object(Kr.b)(e);return n.showQuickReplies()&&t.count()>ai&&!a};n.renderQuickReplyGroup=function(){var e=n.props,t=e.isThreadStarted,a=e.message,r=e.publishMessage,i=e.requiresExplicitConsentToProcess,o=Object(Kr.d)(a),s=Object(Kr.b)(a);return Q.a.createElement(He,null,Q.a.createElement(ni,{options:o,disabled:i||!t,message:a,multiSelect:s,publishMessage:r,onChange:n.handleQuickReplyUpdate}))};n.renderQuickReplySendButton=function(){var e=n.props.isThreadStarted,t=n.state.selectedQuickReply;return Q.a.createElement(He,null,Q.a.createElement(Va.a,{disabled:!e||!Yr(t),onClick:n.handleQuickReplySend,size:"sm",use:"primary"},Q.a.createElement(rt.a,{message:"conversations-visitor-message-history.quickReply.selectionComplete"})))};n.renderQuickReplySelect=function(){var e=n.props,t=e.message,a=e.isThreadStarted,r=e.requiresExplicitConsentToProcess,i=n.state.selectedQuickReply,o=Object(Kr.d)(t);return Q.a.createElement("div",{className:"m-bottom-3 m-x-3"},Q.a.createElement(hi,{quickReplyOptions:o,disabled:r||!a,onChange:n.handleQuickReplySelect,value:Yr(i),placeholder:Et.a.text("conversations-visitor-message-history.quickReply.selectionPlaceholder")}))};n.state={selectedQuickReply:Object(Mn.Map)()};return n}Object(s.a)(t,[{key:"isSentFromVisitor",value:function(){return Object(we.getSenderType)(this.props.message)===G.e}},{key:"renderMessageHeader",value:function(){var e=this.props,t=e.message,n=e.positionDescriptors,a=e.senders;if(!n.includes(Rn.b)||this.isSentFromVisitor())return null;var r=Object(we.getSenderId)(t),i=Object(we.getSenderType)(t),o=ae(r,i,a),s=Object(W.b)(o);s||(s=Object(Oi.a)({senderType:i,firstName:Object(we.getFromName)(t),email:Object(we.getFromAddress)(t)||null}));var c=ie(o);return Q.a.createElement(We,null,Q.a.createElement(Le,null,Q.a.createElement(Z,{sender:s,isLoading:c})),Q.a.createElement(Ke,null,Q.a.createElement(dt,{isSenderLoading:c,sender:s})))}},{key:"renderTimeStamp",value:function(){var e=this.props,t=e.message,n=e.positionDescriptors.includes(Rn.d),a=Object(we.getTimestamp)(t);return n&&a?Q.a.createElement(He,null,Q.a.createElement(at.a,{use:"help"},zi(a))):null}},{key:"renderMessageFooter",value:function(){var e=this.props.message,t=Object(Kr.d)(e),n=Object(Kr.b)(e);return this.showQuickReplies()&&this.showQuickReplySelection()?this.renderQuickReplySendButton():this.showQuickReplies()&&(t.count()<=ai||n)?this.renderQuickReplyGroup():this.renderTimeStamp()}},{key:"render",value:function(){var e=this.props,t=e.fileAttachments,n=e.message,a=e.positionDescriptors,r=e.toggleOpen,i=e.mobile,o=this.isSentFromVisitor()?J.c:J.a;return Q.a.createElement(Ze,{positionDescriptors:a,use:o},this.renderMessageHeader(),Q.a.createElement(Ba,{fileAttachments:t,isLastMessage:a.includes(Rn.c),message:n,quickReplySelect:this.showQuickReplySelection()&&this.renderQuickReplySelect,mobile:i,toggleOpen:r}),this.renderMessageFooter())}}]);return t}(U.PureComponent);Bi.displayName="CommonMessage";Bi.propTypes={fileAttachments:p.a.instanceOf(Mn.List),hasUnansweredQuickReplyMessage:p.a.bool,isThreadStarted:p.a.bool.isRequired,message:p.a.oneOfType([Object(h.a)("PubNubMessageRecord"),Object(h.a)("CommonMessage")]).isRequired,mobile:p.a.bool,positionDescriptors:$.a.isRequired,publishMessage:p.a.func,requiresExplicitConsentToProcess:p.a.bool.isRequired,senders:ee.a,toggleOpen:p.a.func};var Ui,Qi=Bi,Hi=n("yybq"),Vi=function(e){var t=Object(Ni.a)(e);return{hasUnansweredQuickReplyMessage:Object(Pi.a)(e,{thread:t}),isThreadStarted:Object(Ri.a)(t),mobile:Object(qi.getIsMobile)(e)}},Wi={publishMessage:Mi.a,toggleOpen:Hi.toggleOpen},Yi=Object(kr.connect)(Vi,Wi)(Qi),Ki=n("Zqdz"),Gi=function(e){return{requiresExplicitConsentToProcess:Object(Ki.a)(e)}},Xi={},Zi=Object(kr.connect)(Gi,Xi);n.d(t,"a",function(){return Ji});var Ji=(Ui={},Object(r.a)(Ui,vt.a,Qa),Object(r.a)(Ui,gt.d,Yi),Object(r.a)(Ui,bt.a,Zi(Yi)),Object(r.a)(Ui,i.a,wn),Object(r.a)(Ui,gt.j,Lr),Object(r.a)(Ui,vt.b,Qr),Object(r.a)(Ui,gt.m,Zi(Fi)),Object(r.a)(Ui,gt.q,gn),Object(r.a)(Ui,gt.v,gn),Object(r.a)(Ui,gt.w,ft),Ui)},vNKw:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a=["video/*","audio/*","application/json","application/vnd.ms-excel","application/vnd.ms-powerpoint","application/msword","application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.oasis.opendocument.graphics","application/vnd.oasis.opendocument.presentation","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.text","image/gif","image/jpeg","image/jpg","image/png","image/tiff","text/calendar","text/css","text/csv","text/plain"]},wVuR:function(e,t,n){"use strict";n.r(t);n.d(t,"handleAttachmentUploadProgress",function(){return i});var a=n("ZyKU"),r=n("BaOL"),i=function(e){var t=e.localId,n=e.threadId,i=e.loaded,o=e.total;return function(e){var s=i/o*a.c;e(Object(r.attachmentUploadProgress)({localId:t,threadId:n,progress:s}))}}},wxZq:function(e,t,n){var a=n("fwVr");function r(){this.__data__=a?a(null):{};this.size=0}e.exports=r},wzyz:function(e,t,n){var a=n("HopT"),r=n("/gqD");function i(e,t){var n=r(e,t);return a(n)?n:void 0}e.exports=i},xL7U:function(e,t,n){"use strict";n.r(t);n.d(t,"PRIMARY",function(){return a});n.d(t,"SECONDARY",function(){return r});var a="primary",r="secondary"},xqCo:function(e,t,n){"use strict";n.r(t);n.d(t,"sendConsentToProcess",function(){return s});var a=n("nDpY"),r=n.n(a),i=n("kMAx"),o="livechat-public/v1/privacy/consentToProcess";function s(e){var t=e.sessionId,n=e.hubspotUtk,a=e.welcomeMessageId;return i.a.put(o,{query:{sessionId:t,hubspotUtk:n,welcomeMessageId:a,portalId:r.a.get()}})}},zF3W:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n("CRij"),r=n("bDpH"),i=Object(a.createAction)(r.f)},zRU2:function(e,t,n){var a=n("nqur"),r="Expected a function";function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(r);var n=function(){var a=arguments,r=t?t.apply(this,a):a[0],i=n.cache;if(i.has(r))return i.get(r);var o=e.apply(this,a);n.cache=i.set(r,o)||i;return o};n.cache=new(i.Cache||a);return n}i.Cache=a;e.exports=i},zYvt:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a=5e3},znLu:function(e,t,n){"use strict";var a=n("+FUr"),r=n("LjY7"),i=n("woGC"),o=n("YZ/j"),s=n("Q9/I"),c=n("MEIQ"),u=n("VfuR"),l=n.n(u),d=n("Ktcs"),p=n.n(d),m=n("aHOs"),h=n("D1/i"),f=n("CkTg");function b(e){if("number"==typeof e&&e>=0)return e;throw new Error("expected `interval` to be a positive number but got `"+e+"`")}function g(e,t){b(e);Object(f.a)(t);var n,a,r=0,i=null;function o(){if(null!==i){clearTimeout(i);i=null}}function s(){r=Date.now();a=t.apply(void 0,Object(m.a)(n))}function c(){for(var t=arguments.length,c=new Array(t),u=0;u<t;u++)c[u]=arguments[u];n=c;o();Date.now()-r>=e?s():i=setTimeout(s,e);return a}c.cancel=o;return c}var v=Object(h.a)(g),O=100,j=function(e){Object(c.a)(t,e);function t(e){var n;Object(a.a)(this,t);(n=Object(i.a)(this,Object(o.a)(t).call(this,e))).state={inTop:!0,inBottom:!0,height:0,distanceToBottom:0,shouldKeepAtBottom:!0};n.scrollContainer=p.a.createRef();n.onResize=v(O,n.onResize.bind(Object(s.a)(n)));n.onScroll=v(O,n.onScroll.bind(Object(s.a)(n)));return n}Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this.scrollContainer.current;if(e){this.setState({height:e.clientHeight});this.scrollToBottom()}window.addEventListener("resize",this.onResize,{passive:!0})}},{key:"getSnapshotBeforeUpdate",value:function(){var e=this.scrollContainer.current;return e?{prevScrollTop:e.scrollTop}:null}},{key:"componentDidUpdate",value:function(e,t,n){var a=this.scrollContainer.current;if(n&&a)if(this.state.shouldKeepAtBottom)this.scrollToBottom();else if(0!==this.state.distanceToBottom){var r=n.prevScrollTop;a.scrollTop===r&&t.height>this.state.height&&this.setScrollTop(a.scrollTop+(t.height-this.state.height))}else this.setState({shouldKeepAtBottom:!0})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResize)}},{key:"onScroll",value:function(){var e=this.props,t=e.onScrollToTop,n=e.onScrollToBottom,a=this.inThreshold(),r=a.inTop,i=a.inBottom;!this.state.inTop&&r&&t();!this.state.inBottom&&i&&n();var o=this.getScrollDistanceFromBottom();this.setState({inTop:r,inBottom:i,distanceToBottom:o,shouldKeepAtBottom:!1})}},{key:"inThreshold",value:function(){var e=this.props,t=e.topThreshold,n=e.bottomThreshold;return{inTop:this.getScrollDistanceFromTop()<=t,inBottom:this.getScrollDistanceFromBottom()<=n}}},{key:"getScrollDistanceFromTop",value:function(){var e=this.scrollContainer.current;return e?e.scrollTop:0}},{key:"getScrollDistanceFromBottom",value:function(){var e=this.scrollContainer.current;if(!e)return 0;var t=e.scrollTop,n=e.scrollHeight,a=e.clientHeight,r=e.offsetHeight;return n-(a||r)-t}},{key:"scrollToBottom",value:function(){var e=this.scrollContainer.current;e&&this.setScrollTop(e.scrollHeight);this.setState({shouldKeepAtBottom:!0})}},{key:"setScrollTop",value:function(e){var t=this.scrollContainer.current;t&&(t.scrollTop=e||0)}},{key:"onResize",value:function(){var e=this.scrollContainer.current;e&&this.setState({height:e.clientHeight||0})}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.className;return p.a.createElement("div",{className:n,style:{flexGrow:1},ref:this.scrollContainer,onScroll:this.onScroll},t)}}]);return t}(d.PureComponent);j.displayName="ScrollWrapper";j.propTypes={bottomThreshold:l.a.number.isRequired,children:l.a.node,className:l.a.string,onScrollToBottom:l.a.func.isRequired,onScrollToTop:l.a.func.isRequired,topThreshold:l.a.number.isRequired};var y=function(){};j.defaultProps={bottomThreshold:300,onScrollToBottom:y,onScrollToTop:y,topThreshold:300};var C=j,x=n("gwLF"),k=function(e){return document.querySelector("["+x.a+'="'+e+'"]')},E=n("Urcc"),T=function(e,t){var n=!0,a=!1,r=void 0;try{for(var i,o=t[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=i.value;Object(E.a)(!!e.prototype[s],"Component missing required function %s",s)}}catch(e){a=!0;r=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw r}}},I=function(){var e=document.querySelector("["+x.a+"]:last-child");return e&&e.getAttribute?e.getAttribute(x.a):null},w=function(e){var t=I();if(!e||!t)return null;var n=k(t);if(!n)return null;var a=e.getScrollDistanceFromTop();return{lastMessageId:t,lastMessageOffsetTop:n.offsetTop,prevScrollTop:a}},R=300,S=function(){return function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{alignment:"start"}).alignment,n=k(e);e&&n&&n.scrollIntoView&&n.scrollIntoView("start"===t)}},A=function(e){var t=e.scrollWrapperRef;return function(){var e=t.current;e&&e.scrollToBottom()}},M=function(e){var t=e.scrollWrapperRef;return function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).threshold,n=void 0===e?R:e,a=t.current;a&&a.state&&(t.current.state.distanceToBottom<=n||a.getScrollDistanceFromBottom()<=n)&&a.scrollToBottom()}},P=function(e){var t=e.current;return{lastMessageId:t.lastMessageId,lastMessageOffsetTop:t.lastMessageOffsetTop,prevScrollTop:t.prevScrollTop}},N=function(e){T(e,["getScrollDistanceFromTop","getScrollDistanceFromBottom","setScrollTop","scrollToBottom"]);var t=Object(d.forwardRef)(function(e,t){var n=Object(d.useRef)(),a=Object(d.useRef)();t.current={scrollToMessage:S(),scrollToBottom:A({scrollWrapperRef:n}),scrollToBottomIfInThreshold:M({scrollWrapperRef:n})};var r=Object(d.useRef)(!0);Object(d.useLayoutEffect)(function(){var e=n.current;if(r.current){a.current=w(e);r.current=!1}else if(a.current){var t=P(a),i=t.lastMessageId,o=t.lastMessageOffsetTop,s=t.prevScrollTop;a.current=w(e);if(e.getScrollDistanceFromTop()===s){var c=k(i);if(c&&c.offsetTop){var u=c.offsetTop-o;u&&e.setScrollTop(e.getScrollDistanceFromTop()+u)}}}});return p.a.createElement(C,Object.assign({ref:n},e))});t.displayName="WithScrollTo";return t},q=n("XpET"),_=n("Dogn"),L=n("+UNX"),F=n("9f1P"),z=n.n(F),D=n("uOqy"),B=n("t6nY"),U=n.n(B),Q=n("sjvu"),H=n("ooj3"),V=z()(D.a).withConfig({displayName:"ThreadHistoryFetcher__LoadingSpinnerWrapper",componentId:"sc-1wh6m0q-0"})(["height:0;margin-top:20px;"]),W=z()(N(C)).withConfig({displayName:"ThreadHistoryFetcher__ScrollToWrapper",componentId:"sc-1wh6m0q-1"})(["flex:1 1;display:flex;flex-direction:column;padding-bottom:12px;align-self:stretch;overflow-y:scroll;overflow-x:hidden;"]),Y=function(e){Object(c.a)(t,e);function t(e){var n;Object(a.a)(this,t);(n=Object(i.a)(this,Object(o.a)(t).call(this,e))).scrollWrapper=Object(d.createRef)();n.fetchHistory=n.fetchHistory.bind(Object(s.a)(n));return n}Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this.scrollWrapper.current;e&&e.scrollToBottom();this.fetchHistory()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.threadId,a=t.messageCount,r=t.shouldScrollToBottom,i=t.isOnFocus,o=e.threadId,s=e.messageCount,c=e.shouldScrollToBottom,u=e.isOnFocus,l=this.scrollWrapper.current;if(n===o)if(s){a!==s&&l&&l.scrollToBottomIfInThreshold();r!==c&&l&&l.scrollToBottomIfInThreshold();i!==u&&l&&l.scrollToBottomIfInThreshold()}else l&&l.scrollToBottom();else{this.fetchHistory();l&&l.scrollToBottom()}}},{key:"fetchHistory",value:function(){var e=this.props,t=e.fetchThreadHistory,n=e.threadId,a=e.threadHistory,r=e.sessionId;n!==Q.a&&t({offsetOrdinal:Object(_.c)(a),offsetTimestamp:Object(_.d)(a),threadId:n,sessionId:r})}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.isLoadingHistory,a=e.loadingHistoryFailed,r=e.threadId,i=e.threadHistory;if(n&&!Object(L.hasMessages)(i))return p.a.createElement(D.a,{grow:!0});if(a&&!Object(L.hasMessages)(i))return p.a.createElement(H.a,null);var o=U()(this.props.className,"messages-scroll-container-utv");return p.a.createElement(W,{key:r,className:o,ref:this.scrollWrapper,onScrollToTop:this.fetchHistory},n&&p.a.createElement(V,{grow:!0}),t)}}]);return t}(d.PureComponent);Y.propTypes={children:l.a.node.isRequired,className:l.a.string,fetchThreadHistory:l.a.func.isRequired,isLoadingHistory:l.a.bool,isOnFocus:l.a.bool.isRequired,loadingHistoryFailed:l.a.bool,messageCount:l.a.number.isRequired,sessionId:l.a.string.isRequired,shouldScrollToBottom:l.a.bool.isRequired,threadHistory:Object(q.a)("ThreadHistory"),threadId:l.a.number.isRequired};Y.displayName="ThreadHistoryFetcher";t.a=Y}}]);
//# sourceMappingURL=threadview-utv.js.map